!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("paper")},{paper:3}],2:[function(a,b,c){},{}],3:[function(a,b,c){var d=function(c,e){var f=c?c.window:a("./node/window"),g=f&&f.document;c=c||f;var h=new function(){function a(a,b,c,e,f){function g(d,g){g=g||(g=j(b,d))&&(g.get?g:g.value),"string"==typeof g&&"#"===g[0]&&(g=a[g.substring(1)]||g);var k,m="function"==typeof g,n=g,o=f||m&&!g.base?g&&g.get?d in a:a[d]:null;f&&o||(m&&o&&(g.base=o),m&&e!==!1&&(k=d.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(i[k[3].toLowerCase()+k[4]]=k[2]),n&&!m&&n.get&&"function"==typeof n.get&&h.isPlainObject(n)||(n={value:n,writable:!0}),(j(a,d)||{configurable:!0}).configurable&&(n.configurable=!0,n.enumerable=c),l(a,d,n))}var i={};if(b){for(var k in b)b.hasOwnProperty(k)&&!d.test(k)&&g(k);for(var k in i){var m=i[k],n=a["set"+m],o=a["get"+m]||n&&a["is"+m];!o||e!==!0&&0!==o.length||g(k,{get:o,set:n})}}return a}function b(a,b,c){return a&&("length"in a&&!a.getLength&&"number"==typeof a.length?f:g).call(a,b,c=c||a),c}function c(a,b,c){for(var d=c,e=b.length;d<e;d++){var f=b[d];for(var g in f)f.hasOwnProperty(g)&&(a[g]=f[g])}return a}var d=/^(statics|enumerable|beans|preserve)$/,f=[].forEach||function(a,b){for(var c=0,d=this.length;c<d;c++)a.call(b,this[c],c,this)},g=function(a,b){for(var c in this)this.hasOwnProperty(c)&&a.call(b,this[c],c,this)},i=Object.create||function(a){return{__proto__:a}},j=Object.getOwnPropertyDescriptor||function(a,b){var c=a.__lookupGetter__&&a.__lookupGetter__(b);return c?{get:c,set:a.__lookupSetter__(b),enumerable:!0,configurable:!0}:a.hasOwnProperty(b)?{value:a[b],enumerable:!0,configurable:!0,writable:!0}:null},k=Object.defineProperty||function(a,b,c){return(c.get||c.set)&&a.__defineGetter__?(c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)):a[b]=c.value,a},l=function(a,b,c){return delete a[b],k(a,b,c)};return a(function(){c(this,arguments,0)},{inject:function(b){if(b){var c=b.statics===!0?b:b.statics,d=b.beans,e=b.preserve;c!==b&&a(this.prototype,b,b.enumerable,d,e),a(this,c,!0,d,e)}for(var f=1,g=arguments.length;f<g;f++)this.inject(arguments[f]);return this},extend:function(){for(var b,c,d,e=this,f=0,g=arguments.length;f<g&&(!b||!c);f++)d=arguments[f],b=b||d.initialize,c=c||d.prototype;return b=b||function(){e.apply(this,arguments)},c=b.prototype=c||i(this.prototype),l(c,"constructor",{value:b,writable:!0,configurable:!0}),a(b,this,!0),arguments.length&&this.inject.apply(b,arguments),b.base=e,b}},!0).inject({inject:function(){for(var b=0,c=arguments.length;b<c;b++){var d=arguments[b];d&&a(this,d,d.enumerable,d.beans,d.preserve)}return this},extend:function(){var a=i(this);return a.inject.apply(a,arguments)},each:function(a,c){return b(this,a,c)},set:function(){return c(this,arguments,0)},clone:function(){return new this.constructor(this)},statics:{each:b,create:i,define:l,describe:j,set:function(a){return c(a,arguments,1)},clone:function(a){return c(new a.constructor,arguments,0)},isPlainObject:function(a){var b=null!=a&&a.constructor;return b&&(b===Object||b===h||"Object"===b.name)},pick:function(a,b){return a!==e?a:b}}})};"undefined"!=typeof b&&(b.exports=h),h.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+h.each(this,function(a,b){if(!/^_/.test(b)){var c=typeof a;this.push(b+": "+("number"===c?l.instance.number(a):"string"===c?"'"+a+"'":a))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(a){return h.importJSON(a,this)},exportJSON:function(a){return h.exportJSON(this,a)},toJSON:function(){return h.serialize(this)},_set:function(a){if(a&&h.isPlainObject(a))return h.filter(this,a)},statics:{exports:{enumerable:!0},extend:function ha(){var a=ha.base.apply(this,arguments),b=a.prototype._class;return b&&!h.exports[b]&&(h.exports[b]=a),a},equals:function(a,b){if(a===b)return!0;if(a&&a.equals)return a.equals(b);if(b&&b.equals)return b.equals(a);if(a&&b&&"object"==typeof a&&"object"==typeof b){if(Array.isArray(a)&&Array.isArray(b)){var c=a.length;if(c!==b.length)return!1;for(;c--;)if(!h.equals(a[c],b[c]))return!1}else{var d=Object.keys(a),c=d.length;if(c!==Object.keys(b).length)return!1;for(;c--;){var e=d[c];if(!b.hasOwnProperty(e)||!h.equals(a[e],b[e]))return!1}}return!0}return!1},read:function(a,b,c,d){if(this===h){var f=this.peek(a,b);return a.__index++,f}var g=this.prototype,i=g._readIndex,j=b||i&&a.__index||0;d||(d=a.length-j);var k=a[j];return k instanceof this||c&&c.readNull&&null==k&&d<=1?(i&&(a.__index=j+1),k&&c&&c.clone?k.clone():k):(k=h.create(this.prototype),i&&(k.__read=!0),k=k.initialize.apply(k,j>0||d<a.length?Array.prototype.slice.call(a,j,j+d):a)||k,i&&(a.__index=j+k.__read,k.__read=e),k)},peek:function(a,b){return a[a.__index=b||a.__index||0]},remain:function(a){return a.length-(a.__index||0)},readAll:function(a,b,c){for(var d,e=[],f=b||0,g=a.length;f<g;f++)e.push(Array.isArray(d=a[f])?this.read(d,0,c):this.read(a,f,c,1));return e},readNamed:function(a,b,c,d,f){var g=this.getNamed(a,b),i=g!==e;if(i){var j=a._filtered;j||(j=a._filtered=h.create(a[0]),j._filtering=a[0]),j[b]=e}return this.read(i?[g]:a,c,d,f)},getNamed:function(a,b){var c=a[0];if(a._hasObject===e&&(a._hasObject=1===a.length&&h.isPlainObject(c)),a._hasObject)return b?c[b]:a._filtered||c},hasNamed:function(a,b){return!!this.getNamed(a,b)},filter:function(a,b,c){for(var d=Object.keys(b._filtering||b),f=0,g=d.length;f<g;f++){var h=d[f];if(!c||!c[h]){var i=b[h];i!==e&&(a[h]=i)}}return a},isPlainValue:function(a,b){return this.isPlainObject(a)||Array.isArray(a)||b&&"string"==typeof a},serialize:function(a,b,c,d){b=b||{};var e,f=!d;if(f&&(b.formatter=new l(b.precision),d={length:0,definitions:{},references:{},add:function(a,b){var c="#"+a._id,d=this.references[c];if(!d){this.length++;var e=b.call(a),f=a._class;f&&e[0]!==f&&e.unshift(f),this.definitions[c]=e,d=this.references[c]=[c]}return d}}),a&&a._serialize){e=a._serialize(b,d);var g=a._class;!g||a._compactSerialize||!f&&c||e[0]===g||e.unshift(g)}else if(Array.isArray(a)){e=[];for(var i=0,j=a.length;i<j;i++)e[i]=h.serialize(a[i],b,c,d)}else if(h.isPlainObject(a)){e={};for(var k=Object.keys(a),i=0,j=k.length;i<j;i++){var m=k[i];e[m]=h.serialize(a[m],b,c,d)}}else e="number"==typeof a?b.formatter.number(a,b.precision):a;return f&&d.length>0?[["dictionary",d.definitions],e]:e},deserialize:function(a,b,c,d,e){var f=a,g=!c,i=g&&a&&a.length&&"dictionary"===a[0][0];if(c=c||{},Array.isArray(a)){var j=a[0],k="dictionary"===j;if(1==a.length&&/^#/.test(j))return c.dictionary[j];j=h.exports[j],f=[];for(var l=j?1:0,m=a.length;l<m;l++)f.push(h.deserialize(a[l],b,c,k,i));if(j){var n=f;b?f=b(j,n,g||e):(f=h.create(j.prototype),j.apply(f,n))}}else if(h.isPlainObject(a)){f={},d&&(c.dictionary=f);for(var o in a)f[o]=h.deserialize(a[o],b,c)}return i?f[1]:f},exportJSON:function(a,b){var c=h.serialize(a,b);return b&&b.asString===!1?c:JSON.stringify(c)},importJSON:function(a,b){return h.deserialize("string"==typeof a?JSON.parse(a):a,function(a,c,d){var e=d&&b&&b.constructor===a,f=e?b:h.create(a.prototype);if(1===c.length&&f instanceof x&&(e||!(f instanceof z))){var g=c[0];h.isPlainObject(g)&&(g.insert=!1)}return(e?f._set:a).apply(f,c),e&&(b=null),f})},splice:function(a,b,c,d){var f=b&&b.length,g=c===e;c=g?a.length:c,c>a.length&&(c=a.length);for(var h=0;h<f;h++)b[h]._index=c+h;if(g)return a.push.apply(a,b),[];var i=[c,d];b&&i.push.apply(i,b);for(var j=a.splice.apply(a,i),h=0,k=j.length;h<k;h++)j[h]._index=e;for(var h=c+f,k=a.length;h<k;h++)a[h]._index=h;return j},capitalize:function(a){return a.replace(/\b[a-z]/g,function(a){return a.toUpperCase()})},camelize:function(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})},hyphenate:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var i={on:function(a,b){if("string"!=typeof a)h.each(a,function(a,b){this.on(b,a)},this);else{var c=this._eventTypes,d=c&&c[a],e=this._callbacks=this._callbacks||{};e=e[a]=e[a]||[],e.indexOf(b)===-1&&(e.push(b),d&&d.install&&1===e.length&&d.install.call(this,a))}return this},off:function(a,b){if("string"!=typeof a)return void h.each(a,function(a,b){this.off(b,a)},this);var c,d=this._eventTypes,e=d&&d[a],f=this._callbacks&&this._callbacks[a];return f&&(!b||(c=f.indexOf(b))!==-1&&1===f.length?(e&&e.uninstall&&e.uninstall.call(this,a),delete this._callbacks[a]):c!==-1&&f.splice(c,1)),this},once:function(a,b){return this.on(a,function(){b.apply(this,arguments),this.off(a,b)})},emit:function(a,b){var c=this._callbacks&&this._callbacks[a];if(!c)return!1;var d=[].slice.call(arguments,1),e=b&&b.target&&!b.currentTarget;c=c.slice(),e&&(b.currentTarget=this);for(var f=0,g=c.length;f<g;f++)if(c[f].apply(this,d)===!1){b&&b.stop&&b.stop();break}return e&&delete b.currentTarget,!0},responds:function(a){return!(!this._callbacks||!this._callbacks[a])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(a){var b=this._eventTypes,c=this._callbacks,d=a?"install":"uninstall";if(b)for(var e in c)if(c[e].length>0){var f=b[e],g=f&&f[d];g&&g.call(this,e)}},statics:{inject:function ia(a){var b=a._events;if(b){var c={};h.each(b,function(b,d){var e="string"==typeof b,f=e?b:d,g=h.capitalize(f),i=f.substring(2).toLowerCase();c[i]=e?{}:b,f="_"+f,a["get"+g]=function(){return this[f]},a["set"+g]=function(a){var b=this[f];b&&this.off(i,b),a&&this.on(i,a),this[f]=a}}),a._eventTypes=c}return ia.base.apply(this,arguments)}}},j=h.extend({_class:"PaperScope",initialize:function ja(){d=this,this.settings=new h({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=ja._id++,ja._scopes[this._id]=this;var a=ja.prototype;if(!this.support){var b=da.getContext(1,1)||{};a.support={nativeDash:"setLineDash"in b||"mozDash"in b,nativeBlendModes:ea.nativeModes},da.release(b)}if(!this.agent){var e=c.navigator.userAgent.toLowerCase(),f=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(e)||[])[0],g="darwin"===f?"mac":f,i=a.agent=a.browser={platform:g};g&&(i[g]=!0),e.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(a,b,c,d,e){if(!i.chrome){var f="opera"===b?d:/^(node|trident)$/.test(b)?e:c;i.version=f,i.versionNumber=parseFloat(f),b="trident"===b?"msie":b,i.name=b,i[b]=!0}}),i.chrome&&delete i.webkit,i.atom&&delete i.chrome}},version:"0.10.2",getView:function(){var a=this.project;return a&&a._view},getPaper:function(){return this},execute:function(a,b){d.PaperScript.execute(a,this,b),W.updateFocus()},install:function(a){var b=this;h.each(["project","view","tool"],function(c){h.define(a,c,{configurable:!0,get:function(){return b[c]}})});for(var c in this)!/^_/.test(c)&&this[c]&&(a[c]=this[c])},setup:function(a){return d=this,this.project=new w(a),this},createCanvas:function(a,b){return da.getCanvas(a,b)},activate:function(){d=this},clear:function(){for(var a=this.projects,b=this.tools,c=this.palettes,d=a.length-1;d>=0;d--)a[d].remove();for(var d=b.length-1;d>=0;d--)b[d].remove();for(var d=c.length-1;d>=0;d--)c[d].remove()},remove:function(){this.clear(),delete j._scopes[this._id]},statics:new function(){function a(a){return a+="Attribute",function(b,c){return b[a](c)||b[a]("data-paper-"+c)}}return{_scopes:{},_id:0,get:function(a){return this._scopes[a]||null},getAttribute:a("get"),hasAttribute:a("has")}}}),k=h.extend(i,{initialize:function(a){this._scope=d,this._index=this._scope[this._list].push(this)-1,!a&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var a=this._scope[this._reference];return a&&a!==this&&a.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",a),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(h.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l=h.extend({initialize:function(a){this.precision=h.pick(a,5),this.multiplier=Math.pow(10,this.precision)},number:function(a){return this.precision<16?Math.round(a*this.multiplier)/this.multiplier:a},pair:function(a,b,c){return this.number(a)+(c||",")+this.number(b)},point:function(a,b){return this.number(a.x)+(b||",")+this.number(a.y)},size:function(a,b){return this.number(a.width)+(b||",")+this.number(a.height)},rectangle:function(a,b){return this.point(a,b)+(b||",")+this.size(a,b)}});l.instance=new l;var m=new function(){function a(a,b,c){return a<b?b:a>c?c:a}function b(a,b,c){function d(a){var b=134217729*a,c=a-b,d=c+b,e=a-d;return[d,e]}var e=b*b-a*c,g=b*b+a*c;if(3*f(e)<g){var h=d(a),i=d(b),j=d(c),k=b*b,l=i[0]*i[0]-k+2*i[0]*i[1]+i[1]*i[1],m=a*c,n=h[0]*j[0]-m+h[0]*j[1]+h[1]*j[0]+h[1]*j[1];e=k-m+(l-n)}return e}function c(){var a=Math.max.apply(Math,arguments);return a&&(a<1e-8||a>1e8)?h(2,-Math.round(i(a))):0}var d=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],f=Math.abs,g=Math.sqrt,h=Math.pow,i=Math.log2||function(a){return Math.log(a)*Math.LOG2E},j=1e-12,k=1.12e-16;return{TOLERANCE:1e-6,EPSILON:j,MACHINE_EPSILON:k,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-9,KAPPA:4*(g(2)-1)/3,isZero:function(a){return a>=-j&&a<=j},clamp:a,integrate:function(a,b,c,f){for(var g=d[f-2],h=e[f-2],i=.5*(c-b),j=i+b,k=0,l=f+1>>1,m=1&f?h[k++]*a(j):0;k<l;){var n=i*g[k];m+=h[k++]*(a(j+n)+a(j-n))}return i*m},findRoot:function(a,b,c,d,e,g,h){for(var i=0;i<g;i++){var j=a(c),k=j/b(c),l=c-k;if(f(k)<h)return l;j>0?(e=c,c=l<=d?.5*(d+e):l):(d=c,c=l>=e?.5*(d+e):l)}return c},solveQuadratic:function(d,e,h,i,l,m){var n,o=1/0;if(f(d)<j){if(f(e)<j)return f(h)<j?-1:0;n=-h/e}else{e*=-.5;var p=b(d,e,h);if(p&&f(p)<k){var q=c(f(d),f(e),f(h));q&&(d*=q,e*=q,h*=q,p=b(d,e,h))}if(p>=-k){var r=p<0?0:g(p),s=e+(e<0?-r:r);0===s?(n=h/d,o=-n):(n=s/d,o=h/s)}}var t=0,u=null==l,v=l-j,w=m+j;return isFinite(n)&&(u||n>v&&n<w)&&(i[t++]=u?n:a(n,l,m)),o!==n&&isFinite(o)&&(u||o>v&&o<w)&&(i[t++]=u?o:a(o,l,m)),t},solveCubic:function(b,d,e,i,l,n,o){function p(a){q=a;var c=b*q;r=c+d,s=r*q+e,t=(c+r)*q+s,u=s*q+i}var q,r,s,t,u,v=c(f(b),f(d),f(e),f(i));if(v&&(b*=v,d*=v,e*=v,i*=v),f(b)<j)b=d,r=e,s=i,q=1/0;else if(f(i)<j)r=d,s=e,q=0;else{p(-(d/b)/3);var w=u/b,x=h(f(w),1/3),y=w<0?-1:1,z=-t/b,A=z>0?1.324717957244746*Math.max(x,g(z)):x,B=q-y*A;if(B!==q){do p(B),B=0===t?q:q-u/t/(1+k);while(y*B>y*q);f(b)*q*q>f(i/q)&&(s=-i/q,r=(s-e)/q)}}var C=m.solveQuadratic(b,r,s,l,n,o),D=null==n;return isFinite(q)&&(0===C||C>0&&q!==l[0]&&q!==l[1])&&(D||q>n-j&&q<o+j)&&(l[C++]=D?q:a(q,n,o)),C}}},n={_id:1,_pools:{},get:function(a){if(a){var b=this._pools[a];return b||(b=this._pools[a]={_id:1}),b._id++}return this._id++}},o=h.extend({_class:"Point",_readIndex:!0,initialize:function(a,b){var c=typeof a;if("number"===c){var d="number"==typeof b;this.x=a,this.y=d?b:a,this.__read&&(this.__read=d?2:1)}else if("undefined"===c||null===a)this.x=this.y=0,this.__read&&(this.__read=null===a?1:0);else{var e="string"===c?a.split(/[\s,]+/)||[]:a;Array.isArray(e)?(this.x=e[0],this.y=e.length>1?e[1]:e[0]):"x"in e?(this.x=e.x,this.y=e.y):"width"in e?(this.x=e.width,this.y=e.height):"angle"in e?(this.x=e.length,this.y=0,this.setAngle(e.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(a,b){return this.x=a,this.y=b,this},equals:function(a){return this===a||a&&(this.x===a.x&&this.y===a.y||Array.isArray(a)&&this.x===a[0]&&this.y===a[1])||!1},clone:function(){return new o(this.x,this.y)},toString:function(){var a=l.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(a){if(this.isZero()){var b=this._angle||0;this.set(Math.cos(b)*a,Math.sin(b)*a)}else{var c=a/this.getLength();m.isZero(c)&&this.getAngle(),this.set(this.x*c,this.y*c)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(a){this.setAngleInRadians.call(this,a*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var a=o.read(arguments),b=this.getLength()*a.getLength();if(m.isZero(b))return NaN;var c=this.dot(a)/b;return Math.acos(c<-1?-1:c>1?1:c)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(a){if(this._angle=a,!this.isZero()){var b=this.getLength();this.set(Math.cos(a)*b,Math.sin(a)*b)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var a=o.read(arguments);return 180*Math.atan2(this.cross(a),this.dot(a))/Math.PI},getDistance:function(){var a=o.read(arguments),b=a.x-this.x,c=a.y-this.y,d=b*b+c*c,e=h.read(arguments);return e?d:Math.sqrt(d)},normalize:function(a){a===e&&(a=1);var b=this.getLength(),c=0!==b?a/b:0,d=new o(this.x*c,this.y*c);return c>=0&&(d._angle=this._angle),d},rotate:function(a,b){if(0===a)return this.clone();a=a*Math.PI/180;var c=b?this.subtract(b):this,d=Math.sin(a),e=Math.cos(a);return c=new o(c.x*e-c.y*d,c.x*d+c.y*e),b?c.add(b):c},transform:function(a){return a?a._transformPoint(this):this},add:function(){var a=o.read(arguments);return new o(this.x+a.x,this.y+a.y)},subtract:function(){var a=o.read(arguments);return new o(this.x-a.x,this.y-a.y)},multiply:function(){var a=o.read(arguments);return new o(this.x*a.x,this.y*a.y)},divide:function(){var a=o.read(arguments);return new o(this.x/a.x,this.y/a.y)},modulo:function(){var a=o.read(arguments);return new o(this.x%a.x,this.y%a.y)},negate:function(){return new o((-this.x),(-this.y))},isInside:function(){return s.read(arguments).contains(this)},isClose:function(){var a=o.read(arguments),b=h.read(arguments);return this.getDistance(a)<=b},isCollinear:function(){var a=o.read(arguments);return o.isCollinear(this.x,this.y,a.x,a.y)},isColinear:"#isCollinear",isOrthogonal:function(){var a=o.read(arguments);return o.isOrthogonal(this.x,this.y,a.x,a.y)},isZero:function(){return m.isZero(this.x)&&m.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var a=o.read(arguments);return this.x*a.x+this.y*a.y},cross:function(){var a=o.read(arguments);return this.x*a.y-this.y*a.x},project:function(){var a=o.read(arguments),b=a.isZero()?0:this.dot(a)/a.dot(a);return new o(a.x*b,a.y*b)},statics:{min:function(){var a=o.read(arguments),b=o.read(arguments);return new o(Math.min(a.x,b.x),Math.min(a.y,b.y))},max:function(){var a=o.read(arguments),b=o.read(arguments);return new o(Math.max(a.x,b.x),Math.max(a.y,b.y))},random:function(){return new o(Math.random(),Math.random())},isCollinear:function(a,b,c,d){return Math.abs(a*d-b*c)<=1e-7*Math.sqrt((a*a+b*b)*(c*c+d*d))},isOrthogonal:function(a,b,c,d){return Math.abs(a*c+b*d)<=1e-7*Math.sqrt((a*a+b*b)*(c*c+d*d))}}},h.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new o(b(this.x),b(this.y))}},{})),p=o.extend({initialize:function(a,b,c,d){this._x=a,this._y=b,this._owner=c,this._setter=d},set:function(a,b,c){return this._x=a,this._y=b,c||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner.changeSelection(this._getSelection(),a)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),q=h.extend({_class:"Size",_readIndex:!0,initialize:function(a,b){var c=typeof a;if("number"===c){var d="number"==typeof b;this.width=a,this.height=d?b:a,this.__read&&(this.__read=d?2:1)}else if("undefined"===c||null===a)this.width=this.height=0,this.__read&&(this.__read=null===a?1:0);else{var e="string"===c?a.split(/[\s,]+/)||[]:a;Array.isArray(e)?(this.width=e[0],this.height=e.length>1?e[1]:e[0]):"width"in e?(this.width=e.width,this.height=e.height):"x"in e?(this.width=e.x,this.height=e.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1)}},set:function(a,b){return this.width=a,this.height=b,this},equals:function(a){return a===this||a&&(this.width===a.width&&this.height===a.height||Array.isArray(a)&&this.width===a[0]&&this.height===a[1])||!1},clone:function(){return new q(this.width,this.height)},toString:function(){var a=l.instance;return"{ width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.width),b.number(this.height)]},add:function(){var a=q.read(arguments);return new q(this.width+a.width,this.height+a.height)},subtract:function(){var a=q.read(arguments);return new q(this.width-a.width,this.height-a.height)},multiply:function(){var a=q.read(arguments);return new q(this.width*a.width,this.height*a.height)},divide:function(){var a=q.read(arguments);return new q(this.width/a.width,this.height/a.height)},modulo:function(){var a=q.read(arguments);return new q(this.width%a.width,this.height%a.height)},negate:function(){return new q((-this.width),(-this.height))},isZero:function(){return m.isZero(this.width)&&m.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(a,b){return new q(Math.min(a.width,b.width),Math.min(a.height,b.height))},max:function(a,b){return new q(Math.max(a.width,b.width),Math.max(a.height,b.height))},random:function(){return new q(Math.random(),Math.random())}}},h.each(["round","ceil","floor","abs"],function(a){var b=Math[a];this[a]=function(){return new q(b(this.width),b(this.height))}},{})),r=q.extend({initialize:function(a,b,c,d){this._width=a,this._height=b,this._owner=c,this._setter=d},set:function(a,b,c){return this._width=a,this._height=b,c||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(a){this._width=a,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(a){this._height=a,this._owner[this._setter](this)}}),s=h.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(a,b,c,d){var f=typeof a,g=0;if("number"===f?(this.x=a,this.y=b,this.width=c,this.height=d,g=4):"undefined"===f||null===a?(this.x=this.y=this.width=this.height=0,g=null===a?1:0):1===arguments.length&&(Array.isArray(a)?(this.x=a[0],this.y=a[1],this.width=a[2],this.height=a[3],g=1):a.x!==e||a.width!==e?(this.x=a.x||0,this.y=a.y||0,this.width=a.width||0,this.height=a.height||0,g=1):a.from===e&&a.to===e&&(this.x=this.y=this.width=this.height=0,this._set(a),g=1)),!g){var i=o.readNamed(arguments,"from"),j=h.peek(arguments);if(this.x=i.x,this.y=i.y,j&&j.x!==e||h.hasNamed(arguments,"to")){var k=o.readNamed(arguments,"to");this.width=k.x-i.x,this.height=k.y-i.y,this.width<0&&(this.x=k.x,this.width=-this.width),this.height<0&&(this.y=k.y,this.height=-this.height)}else{var l=q.read(arguments);this.width=l.width,this.height=l.height}g=arguments.__index}this.__read&&(this.__read=g)},set:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},clone:function(){return new s(this.x,this.y,this.width,this.height)},equals:function(a){var b=h.isPlainValue(a)?s.read(arguments):a;return b===this||b&&this.x===b.x&&this.y===b.y&&this.width===b.width&&this.height===b.height||!1},toString:function(){var a=l.instance;return"{ x: "+a.number(this.x)+", y: "+a.number(this.y)+", width: "+a.number(this.width)+", height: "+a.number(this.height)+" }"},_serialize:function(a){var b=a.formatter;return[b.number(this.x),b.number(this.y),b.number(this.width),b.number(this.height)]},getPoint:function(a){var b=a?o:p;return new b(this.x,this.y,this,"setPoint")},setPoint:function(){var a=o.read(arguments);this.x=a.x,this.y=a.y},getSize:function(a){var b=a?q:r;return new b(this.width,this.height,this,"setSize")},setSize:function(){var a=q.read(arguments);this._fixX&&(this.x+=(this.width-a.width)*this._fixX),this._fixY&&(this.y+=(this.height-a.height)*this._fixY),this.width=a.width,this.height=a.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(a){this._fixW||(this.width-=a-this.x),this.x=a,this._fixX=0},getTop:function(){return this.y},setTop:function(a){this._fixH||(this.height-=a-this.y),this.y=a,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(a){this._fixX!==e&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=a-this.width:this.width=a-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(a){this._fixY!==e&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=a-this.height:this.height=a-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(a){this.x=a-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(a){this.y=a-.5*this.height,this._fixY=.5},getCenter:function(a){var b=a?o:p;return new b(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var a=o.read(arguments);return this.setCenterX(a.x),this.setCenterY(a.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(a){return a&&a.width!==e||4===(Array.isArray(a)?a:arguments).length?this._containsRectangle(s.read(arguments)):this._containsPoint(o.read(arguments))},_containsPoint:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b<=this.x+this.width&&c<=this.y+this.height},_containsRectangle:function(a){var b=a.x,c=a.y;return b>=this.x&&c>=this.y&&b+a.width<=this.x+this.width&&c+a.height<=this.y+this.height},intersects:function(){var a=s.read(arguments);return a.x+a.width>this.x&&a.y+a.height>this.y&&a.x<this.x+this.width&&a.y<this.y+this.height},touches:function(){var a=s.read(arguments);return a.x+a.width>=this.x&&a.y+a.height>=this.y&&a.x<=this.x+this.width&&a.y<=this.y+this.height},intersect:function(){var a=s.read(arguments),b=Math.max(this.x,a.x),c=Math.max(this.y,a.y),d=Math.min(this.x+this.width,a.x+a.width),e=Math.min(this.y+this.height,a.y+a.height);return new s(b,c,d-b,e-c)},unite:function(){var a=s.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x+a.width),e=Math.max(this.y+this.height,a.y+a.height);return new s(b,c,d-b,e-c)},include:function(){var a=o.read(arguments),b=Math.min(this.x,a.x),c=Math.min(this.y,a.y),d=Math.max(this.x+this.width,a.x),e=Math.max(this.y+this.height,a.y);return new s(b,c,d-b,e-c)},expand:function(){var a=q.read(arguments),b=a.width,c=a.height;return new s(this.x-b/2,this.y-c/2,this.width+b,this.height+c)},scale:function(a,b){return this.expand(this.width*a-this.width,this.height*(b===e?a:b)-this.height)}},h.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(a,b){var c=a.join(""),d=/^[RL]/.test(c);b>=4&&(a[1]+=d?"Y":"X");var e=a[d?0:1],f=a[d?1:0],g="get"+e,h="get"+f,i="set"+e,j="set"+f,k="get"+c,l="set"+c;this[k]=function(a){var b=a?o:p;return new b(this[g](),this[h](),this,l)},this[l]=function(){var a=o.read(arguments);this[i](a.x),this[j](a.y)}},{beans:!0})),t=s.extend({initialize:function(a,b,c,d,e,f){this.set(a,b,c,d,!0),this._owner=e,this._setter=f},set:function(a,b,c,d,e){return this._x=a,this._y=b,this._width=c,this._height=d,e||this._owner[this._setter](this),this}},new function(){var a=s.prototype;return h.each(["x","y","width","height"],function(a){var b=h.capitalize(a),c="_"+a;this["get"+b]=function(){return this[c]},this["set"+b]=function(a){this[c]=a,this._dontNotify||this._owner[this._setter](this)}},h.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(b){var c="set"+b;this[c]=function(){this._dontNotify=!0,a[c].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(a){var b=this._owner;b.changeSelection&&b.changeSelection(2,a)}}))}),u=h.extend({_class:"Matrix",initialize:function ka(a){var b=arguments.length,c=!0;if(6===b?this.set.apply(this,arguments):1===b?a instanceof ka?this.set(a._a,a._b,a._c,a._d,a._tx,a._ty):Array.isArray(a)?this.set.apply(this,a):c=!1:0===b?this.reset():c=!1,!c)throw new Error("Unsupported matrix parameters")},set:function(a,b,c,d,e,f,g){return this._a=a,this._b=b,this._c=c,this._d=d,this._tx=e,this._ty=f,g||this._changed(),this},_serialize:function(a,b){return h.serialize(this.getValues(),a,!0,b)},_changed:function(){var a=this._owner;a&&(a._applyMatrix?a.transform(null,!0):a._changed(9))},clone:function(){return new u(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(a){return a===this||a&&this._a===a._a&&this._b===a._b&&this._c===a._c&&this._d===a._d&&this._tx===a._tx&&this._ty===a._ty;
},toString:function(){var a=l.instance;return"[["+[a.number(this._a),a.number(this._c),a.number(this._tx)].join(", ")+"], ["+[a.number(this._b),a.number(this._d),a.number(this._ty)].join(", ")+"]]"},reset:function(a){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,a||this._changed(),this},apply:function(a,b){var c=this._owner;return!!c&&(c.transform(null,!0,h.pick(a,!0),b),this.isIdentity())},translate:function(){var a=o.read(arguments),b=a.x,c=a.y;return this._tx+=b*this._a+c*this._c,this._ty+=b*this._b+c*this._d,this._changed(),this},scale:function(){var a=o.read(arguments),b=o.read(arguments,0,{readNull:!0});return b&&this.translate(b),this._a*=a.x,this._b*=a.x,this._c*=a.y,this._d*=a.y,b&&this.translate(b.negate()),this._changed(),this},rotate:function(a){a*=Math.PI/180;var b=o.read(arguments,1),c=b.x,d=b.y,e=Math.cos(a),f=Math.sin(a),g=c-c*e+d*f,h=d-c*f-d*e,i=this._a,j=this._b,k=this._c,l=this._d;return this._a=e*i+f*k,this._b=e*j+f*l,this._c=-f*i+e*k,this._d=-f*j+e*l,this._tx+=g*i+h*k,this._ty+=g*j+h*l,this._changed(),this},shear:function(){var a=o.read(arguments),b=o.read(arguments,0,{readNull:!0});b&&this.translate(b);var c=this._a,d=this._b;return this._a+=a.y*this._c,this._b+=a.y*this._d,this._c+=a.x*c,this._d+=a.x*d,b&&this.translate(b.negate()),this._changed(),this},skew:function(){var a=o.read(arguments),b=o.read(arguments,0,{readNull:!0}),c=Math.PI/180,d=new o(Math.tan(a.x*c),Math.tan(a.y*c));return this.shear(d,b)},append:function(a){if(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=a._a,g=a._c,h=a._b,i=a._d,j=a._tx,k=a._ty;this._a=f*b+h*d,this._c=g*b+i*d,this._b=f*c+h*e,this._d=g*c+i*e,this._tx+=j*b+k*d,this._ty+=j*c+k*e,this._changed()}return this},prepend:function(a){if(a){var b=this._a,c=this._b,d=this._c,e=this._d,f=this._tx,g=this._ty,h=a._a,i=a._c,j=a._b,k=a._d,l=a._tx,m=a._ty;this._a=h*b+i*c,this._c=h*d+i*e,this._b=j*b+k*c,this._d=j*d+k*e,this._tx=h*f+i*g+l,this._ty=j*f+k*g+m,this._changed()}return this},appended:function(a){return this.clone().append(a)},prepended:function(a){return this.clone().prepend(a)},invert:function(){var a=this._a,b=this._b,c=this._c,d=this._d,e=this._tx,f=this._ty,g=a*d-b*c,h=null;return g&&!isNaN(g)&&isFinite(e)&&isFinite(f)&&(this._a=d/g,this._b=-b/g,this._c=-c/g,this._d=a/g,this._tx=(c*f-d*e)/g,this._ty=(b*e-a*f)/g,h=this),h},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new u(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var a=this._a*this._d-this._c*this._b;return a&&!isNaN(a)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(a,b,c){return arguments.length<3?this._transformPoint(o.read(arguments)):this._transformCoordinates(a,b,c)},_transformPoint:function(a,b,c){var d=a.x,e=a.y;return b||(b=new o),b.set(d*this._a+e*this._c+this._tx,d*this._b+e*this._d+this._ty,c)},_transformCoordinates:function(a,b,c){for(var d=0,e=2*c;d<e;d+=2){var f=a[d],g=a[d+1];b[d]=f*this._a+g*this._c+this._tx,b[d+1]=f*this._b+g*this._d+this._ty}return b},_transformCorners:function(a){var b=a.x,c=a.y,d=b+a.width,e=c+a.height,f=[b,c,d,c,d,e,b,e];return this._transformCoordinates(f,f,4)},_transformBounds:function(a,b,c){for(var d=this._transformCorners(a),e=d.slice(0,2),f=e.slice(),g=2;g<8;g++){var h=d[g],i=1&g;h<e[i]?e[i]=h:h>f[i]&&(f[i]=h)}return b||(b=new s),b.set(e[0],e[1],f[0]-e[0],f[1]-e[1],c)},inverseTransform:function(){return this._inverseTransform(o.read(arguments))},_inverseTransform:function(a,b,c){var d=this._a,e=this._b,f=this._c,g=this._d,h=this._tx,i=this._ty,j=d*g-e*f,k=null;if(j&&!isNaN(j)&&isFinite(h)&&isFinite(i)){var l=a.x-this._tx,m=a.y-this._ty;b||(b=new o),k=b.set((l*g-m*f)/j,(m*d-l*e)/j,c)}return k},decompose:function(){var a,b,c,d=this._a,e=this._b,f=this._c,g=this._d,h=d*g-e*f,i=Math.sqrt,j=Math.atan2,k=180/Math.PI;if(0!==d||0!==e){var l=i(d*d+e*e);a=Math.acos(d/l)*(e>0?1:-1),b=[l,h/l],c=[j(d*f+e*g,l*l),0]}else if(0!==f||0!==g){var m=i(f*f+g*g);a=Math.asin(f/m)*(g>0?1:-1),b=[h/m,m],c=[0,j(d*f+e*g,m*m)]}else a=0,c=b=[0,0];return{translation:this.getTranslation(),rotation:a*k,scaling:new o(b),skewing:new o(c[0]*k,c[1]*k)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new o(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(a){this.isIdentity()||a.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},h.each(["a","b","c","d","tx","ty"],function(a){var b=h.capitalize(a),c="_"+a;this["get"+b]=function(){return this[c]},this["set"+b]=function(a){this[c]=a,this._changed()}},{})),v=h.extend({_class:"Line",initialize:function(a,b,c,d,e){var f=!1;arguments.length>=4?(this._px=a,this._py=b,this._vx=c,this._vy=d,f=e):(this._px=a.x,this._py=a.y,this._vx=b.x,this._vy=b.y,f=c),f||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new o(this._px,this._py)},getVector:function(){return new o(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(a,b){return v.intersect(this._px,this._py,this._vx,this._vy,a._px,a._py,a._vx,a._vy,!0,b)},getSide:function(a,b){return v.getSide(this._px,this._py,this._vx,this._vy,a.x,a.y,!0,b)},getDistance:function(a){return Math.abs(v.getSignedDistance(this._px,this._py,this._vx,this._vy,a.x,a.y,!0))},isCollinear:function(a){return o.isCollinear(this._vx,this._vy,a._vx,a._vy)},isOrthogonal:function(a){return o.isOrthogonal(this._vx,this._vy,a._vx,a._vy)},statics:{intersect:function(a,b,c,d,e,f,g,h,i,j){i||(c-=a,d-=b,g-=e,h-=f);var k=c*h-d*g;if(!m.isZero(k)){var l=a-e,n=b-f,p=(g*n-h*l)/k,q=(c*n-d*l)/k,r=1e-12,s=-r,t=1+r;if(j||s<p&&p<t&&s<q&&q<t)return j||(p=p<=0?0:p>=1?1:p),new o(a+p*c,b+p*d)}},getSide:function(a,b,c,d,e,f,g,h){g||(c-=a,d-=b);var i=e-a,j=f-b,k=i*d-j*c;return 0!==k||h||(k=(i*c+i*c)/(c*c+d*d),k>=0&&k<=1&&(k=0)),k<0?-1:k>0?1:0},getSignedDistance:function(a,b,c,d,e,f,g){return g||(c-=a,d-=b),0===c?d>0?e-a:a-e:0===d?c<0?f-b:b-f:((e-a)*d-(f-b)*c)/Math.sqrt(c*c+d*d)}}}),w=k.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(a){k.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new T(null,null,this),this._view=W.create(this,a||da.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(a,b){return h.serialize(this._children,a,!0,b)},_changed:function(a,b){if(1&a){var c=this._view;c&&(c._needsUpdate=!0,!c._requested&&c._autoUpdate&&c.requestUpdate())}var d=this._changes;if(d&&b){var e=this._changesById,f=b._id,g=e[f];g?g.flags|=a:d.push(e[f]={item:b,flags:a})}},clear:function(){for(var a=this._children,b=a.length-1;b>=0;b--)a[b].remove()},isEmpty:function(){return 0===this._children.length},remove:function la(){return!!la.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(a){this._currentStyle.initialize(a)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new z({project:this,insert:!0})},getSymbolDefinitions:function(){var a=[],b={};return this.getItems({"class":C,match:function(c){var d=c._definition,e=d._id;return b[e]||(b[e]=!0,a.push(d)),!1}}),a},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var a=this._selectionItems,b=[];for(var c in a){var d=a[c],e=d._selection;1&e&&d.isInserted()?b.push(d):e||this._updateSelection(d)}return b},_updateSelection:function(a){var b=a._id,c=this._selectionItems;a._selection?c[b]!==a&&(this._selectionCount++,c[b]=a):c[b]===a&&(this._selectionCount--,delete c[b])},selectAll:function(){for(var a=this._children,b=0,c=a.length;b<c;b++)a[b].setFullySelected(!0)},deselectAll:function(){var a=this._selectionItems;for(var b in a)a[b].setFullySelected(!1)},addLayer:function(a){return this.insertLayer(e,a)},insertLayer:function(a,b){if(b instanceof z){b._remove(!1,!0),h.splice(this._children,[b],a,0),b._setProject(this,!0);var c=b._name;c&&b.setName(c),this._changes&&b._changed(5),this._activeLayer||(this._activeLayer=b)}else b=null;return b},_insertItem:function(a,b,c,d){return b=this.insertLayer(a,b)||(this._activeLayer||this._insertItem(e,new z(x.NO_INSERT),!0,!0)).insertChild(a,b,c),d&&b.activate&&b.activate(),b},getItems:function(a){return x._getItems(this,a)},getItem:function(a){return x._getItems(this,a,null,null,!0)[0]||null},importJSON:function(a){this.activate();var b=this._activeLayer;return h.importJSON(a,b&&b.isEmpty()&&b)},removeOn:function(a){var b=this._removeSets;if(b){"mouseup"===a&&(b.mousedrag=null);var c=b[a];if(c){for(var d in c){var e=c[d];for(var f in b){var g=b[f];g&&g!=c&&delete g[e._id]}e.remove()}b[a]=null}}},draw:function(a,b,c){this._updateVersion++,a.save(),b.applyToContext(a);for(var d=this._children,e=new h({offset:new o(0,0),pixelRatio:c,viewMatrix:b.isIdentity()?null:b,matrices:[new u],updateMatrix:!0}),f=0,g=d.length;f<g;f++)d[f].draw(a,e);if(a.restore(),this._selectionCount>0){a.save(),a.strokeWidth=1;var i=this._selectionItems,j=this._scope.settings.handleSize,k=this._updateVersion;for(var l in i)i[l]._drawSelection(a,b,j,i,k);a.restore()}}}),x=h.extend(i,{statics:{extend:function ma(a){return a._serializeFields&&(a._serializeFields=h.set({},this.prototype._serializeFields,a._serializeFields)),ma.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new u,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}}},new function(){var a=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return h.each(a,function(a){this._events[a]={install:function(a){this.getView()._countItemEvent(a,1)},uninstall:function(a){this.getView()._countItemEvent(a,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:a}})},{initialize:function(){},_initialize:function(a,b){var c=a&&h.isPlainObject(a),f=c&&a.internal===!0,g=this._matrix=new u,i=c&&a.project||d.project,j=d.settings;return this._id=f?null:n.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&j.applyMatrix,b&&g.translate(b),g._owner=this,this._style=new T(i._currentStyle,this,i),f||c&&a.insert===!1||!j.insertItems&&(!c||a.insert!==!0)?this._setProject(i):(c&&a.parent||i)._insertItem(e,this,!0,!0),c&&a!==x.NO_INSERT&&h.filter(this,a,{internal:!0,insert:!0,project:!0,parent:!0}),c},_serialize:function(a,b){function c(c){for(var f in c){var g=e[f];h.equals(g,"leading"===f?1.2*c.fontSize:c[f])||(d[f]=h.serialize(g,a,"data"!==f,b))}}var d={},e=this;return c(this._serializeFields),this instanceof y||c(this._style._defaults),[this._class,d]},_changed:function(a){var b=this._symbol,c=this._parent||b,d=this._project;8&a&&(this._bounds=this._position=this._decomposed=this._globalMatrix=e),c&&40&a&&x._clearBoundsCache(c),2&a&&x._clearBoundsCache(this),d&&d._changed(a,this),b&&b._changed(a)},set:function(a){return a&&this._set(a),this},getId:function(){return this._id},getName:function(){return this._name},setName:function(a){if(this._name&&this._removeNamed(),a===+a+"")throw new Error("Names consisting only of numbers are not supported.");var b=this._getOwner();if(a&&b){var c=b._children,d=b._namedChildren;(d[a]=d[a]||[]).push(this),a in c||(c[a]=this)}this._name=a||e,this._changed(128)},getStyle:function(){return this._style},setStyle:function(a){this.getStyle().set(a)}},h.each(["locked","visible","blendMode","opacity","guide"],function(a){var b=h.capitalize(a),a="_"+a;this["get"+b]=function(){return this[a]},this["set"+b]=function(b){b!=this[a]&&(this[a]=b,this._changed("_locked"===a?128:129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(a){if(a!==this._selection){this._selection=a;var b=this._project;b&&(b._updateSelection(this),this._changed(129))}},changeSelection:function(a,b){var c=this._selection;this.setSelection(b?c|a:c&~a)},isSelected:function(){if(this._selectChildren)for(var a=this._children,b=0,c=a.length;b<c;b++)if(a[b].isSelected())return!0;return!!(1&this._selection)},setSelected:function(a){if(this._selectChildren)for(var b=this._children,c=0,d=b.length;c<d;c++)b[c].setSelected(a);this.changeSelection(1,a)},isFullySelected:function(){var a=this._children,b=!!(1&this._selection);if(a&&b){for(var c=0,d=a.length;c<d;c++)if(!a[c].isFullySelected())return!1;return!0}return b},setFullySelected:function(a){var b=this._children;if(b)for(var c=0,d=b.length;c<d;c++)b[c].setFullySelected(a);this.changeSelection(1,a)},isClipMask:function(){return this._clipMask},setClipMask:function(a){this._clipMask!=(a=!!a)&&(this._clipMask=a,a&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(a){this._data=a},getPosition:function(a){var b=this._position,c=a?o:p;if(!b){var d=this._pivot;b=this._position=d?this._matrix._transformPoint(d):this.getBounds().getCenter(!0)}return new c(b.x,b.y,this,"setPosition")},setPosition:function(){this.translate(o.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(a){var b=this._pivot;if(b){var c=a?o:p;b=new c(b.x,b.y,this,"setPivot")}return b},setPivot:function(){this._pivot=o.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},h.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(a,b){this[b]=function(b){return this.getBounds(b,a)}},{beans:!0,getBounds:function(a,b){var c=b||a instanceof u,d=h.set({},c?b:a,this._boundsOptions);d.stroke&&!this.getStrokeScaling()||(d.cacheItem=this);var e=this._getCachedBounds(c&&a,d);return 0===arguments.length?new t(e.x,e.y,e.width,e.height,this,"setBounds"):e},setBounds:function(){var a=s.read(arguments),b=this.getBounds(),c=this._matrix,d=new u,e=a.getCenter();d.translate(e),a.width==b.width&&a.height==b.height||(c.isInvertible()||(c.initialize(c._backup||(new u).translate(c.getTranslation())),b=this.getBounds()),d.scale(0!==b.width?a.width/b.width:0,0!==b.height?a.height/b.height:0)),e=b.getCenter(),d.translate(-e.x,-e.y),this.transform(d)},_getBounds:function(a,b){var c=this._children;return c&&0!==c.length?(x._updateBoundsCache(this,b.cacheItem),x._getBounds(c,a,b)):new s},_getCachedBounds:function(a,b){a=a&&a._orNullIfIdentity();var c=b.internal,d=b.cacheItem,e=c?null:this._matrix._orNullIfIdentity(),f=d&&(!a||a.equals(e))&&[b.stroke?1:0,b.handle?1:0,c?1:0].join("");if(x._updateBoundsCache(this._parent||this._symbol,d),f&&this._bounds&&f in this._bounds)return this._bounds[f].rect.clone();var g=this._getBounds(a||e,b);if(f){this._bounds||(this._bounds={});this._bounds[f]={rect:g.clone(),internal:b.internal}}return g},_getStrokeMatrix:function(a,b){var c=this.getStrokeScaling()?null:b&&b.internal?this:this._parent||this._symbol&&this._symbol._item,d=c?c.getViewMatrix().invert():a;return d&&d._shiftless()},statics:{_updateBoundsCache:function(a,b){if(a&&b){var c=b._id,d=a._boundsCache=a._boundsCache||{ids:{},list:[]};d.ids[c]||(d.list.push(b),d.ids[c]=b)}},_clearBoundsCache:function(a){var b=a._boundsCache;if(b){a._bounds=a._position=a._boundsCache=e;for(var c=0,d=b.list,f=d.length;c<f;c++){var g=d[c];g!==a&&(g._bounds=g._position=e,g._boundsCache&&x._clearBoundsCache(g))}}},_getBounds:function(a,b,c){var d=1/0,e=-d,f=d,g=e;c=c||{};for(var h=0,i=a.length;h<i;h++){var j=a[h];if(j._visible&&!j.isEmpty()){var k=j._getCachedBounds(b&&b.appended(j._matrix),c);d=Math.min(k.x,d),f=Math.min(k.y,f),e=Math.max(k.x+k.width,e),g=Math.max(k.y+k.height,g)}}return isFinite(d)?new s(d,f,e-d,g-f):new s}}}),{beans:!0,_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var a=this._decompose();return a&&a.rotation},setRotation:function(a){var b=this.getRotation();null!=b&&null!=a&&this.rotate(a-b)},getScaling:function(a){var b=this._decompose(),c=b&&b.scaling,d=a?o:p;return c&&new d(c.x,c.y,this,"setScaling")},setScaling:function(){var a=this.getScaling(),b=o.read(arguments,0,{clone:!0,readNull:!0});a&&b&&this.scale(b.x/a.x,b.y/a.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.initialize.apply(a,arguments)},getGlobalMatrix:function(a){var b=this._globalMatrix,c=this._project._updateVersion;if(b&&b._updateVersion!==c&&(b=null),!b){b=this._globalMatrix=this._matrix.clone();var d=this._parent;d&&b.prepend(d.getGlobalMatrix(!0)),b._updateVersion=c}return a?b:b.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(a){(this._applyMatrix=this._canApplyMatrix&&!!a)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(a,b){if(this._project!==a){this._project&&this._installEvents(!1),this._project=a;for(var c=this._children,d=0,e=c&&c.length;d<e;d++)c[d]._setProject(a);b=!0}b&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function na(a){na.base.call(this,a);for(var b=this._children,c=0,d=b&&b.length;c<d;c++)b[c]._installEvents(a)},getLayer:function(){for(var a=this;a=a._parent;)if(a instanceof z)return a;return null},getParent:function(){return this._parent},setParent:function(a){return a.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(a,b){this.removeChildren(),this.addChildren(a,b)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var a=this._getOwner();return a&&a._children[this._index+1]||null},getPreviousSibling:function(){var a=this._getOwner();return a&&a._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(a){return a===this||a&&this._class===a._class&&this._style.equals(a._style)&&this._matrix.equals(a._matrix)&&this._locked===a._locked&&this._visible===a._visible&&this._blendMode===a._blendMode&&this._opacity===a._opacity&&this._clipMask===a._clipMask&&this._guide===a._guide&&this._equals(a)||!1},_equals:function(a){return h.equals(this._children,a._children)},clone:function(a){var b=new this.constructor(x.NO_INSERT),c=this._children,d=h.pick(a?a.insert:e,a===e||a===!0),f=h.pick(a?a.deep:e,!0);c&&b.copyAttributes(this),c&&!f||b.copyContent(this),c||b.copyAttributes(this),d&&b.insertAbove(this);var g=this._name,i=this._parent;if(g&&i){for(var c=i._children,j=g,k=1;c[g];)g=j+" "+k++;g!==j&&b.setName(g)}return b},copyContent:function(a){for(var b=a._children,c=0,d=b&&b.length;c<d;c++)this.addChild(b[c].clone(!1),!0)},copyAttributes:function(a,b){this.setStyle(a._style);for(var c=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],d=0,e=c.length;d<e;d++){var f=c[d];a.hasOwnProperty(f)&&(this[f]=a[f])}b||this._matrix.initialize(a._matrix),this.setApplyMatrix(a._applyMatrix),this.setPivot(a._pivot),this.setSelection(a._selection);var g=a._data,i=a._name;this._data=g?h.clone(g):null,i&&this.setName(i)},rasterize:function(a,b){var c=this.getStrokeBounds(),d=(a||this.getView().getResolution())/72,f=c.getTopLeft().floor(),g=c.getBottomRight().ceil(),i=new q(g.subtract(f)),j=new B(x.NO_INSERT);if(!i.isZero()){var k=da.getCanvas(i.multiply(d)),l=k.getContext("2d"),m=(new u).scale(d).translate(f.negate());l.save(),m.applyToContext(l),this.draw(l,new h({matrices:[m]})),l.restore(),j.setCanvas(k)}return j.transform((new u).translate(f.add(i.divide(2))).scale(1/d)),(b===e||b)&&j.insertAbove(this),j},contains:function(){return!!this._contains(this._matrix._inverseTransform(o.read(arguments)))},_contains:function(a){var b=this._children;if(b){for(var c=b.length-1;c>=0;c--)if(b[c].contains(a))return!0;return!1}return a.isInside(this.getInternalBounds())},isInside:function(){return s.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new K.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(a,b){return a instanceof x&&this._asPathItem().getIntersections(a._asPathItem(),null,b,!0).length>0}},new function(){function a(){return this._hitTest(o.read(arguments),E.getOptions(arguments))}function b(){var a=o.read(arguments),b=E.getOptions(arguments),c=b.match,d=[];return b=h.set({},b,{match:function(a){c&&!c(a)||d.push(a)}}),this._hitTest(a,b),d}function c(a,b,c,d){var e=this._children;if(e)for(var f=e.length-1;f>=0;f--){var g=e[f],h=g!==d&&g._hitTest(a,b,c);if(h)return h}return null}return w.inject({hitTest:a,hitTestAll:b,_hitTest:c}),{hitTest:a,hitTestAll:b,_hitTestChildren:c}},{_hitTest:function(a,b,c){function d(a){return!o||a&&o(a)?a:null}function e(b,c){var d=l["get"+c]();if(a.subtract(d).divide(k).length<=1)return new E(b,p,{name:h.hyphenate(c),point:d})}if(this._locked||!this._visible||this._guide&&!b.guides||this.isEmpty())return null;var f=this._matrix,g=c?c.appended(f):this.getGlobalMatrix().prepend(this.getView()._matrix),i=this.getStrokeScaling()?null:g.inverted()._shiftless(),j=Math.max(b.tolerance,1e-6),k=b._tolerancePadding=new q(K._getStrokePadding(j,i));if(a=f._inverseTransform(a),!a||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(k.multiply(2))._containsPoint(a))return null;var l,m,n=!(b.guides&&!this._guide||b.selected&&!this.isSelected()||b.type&&b.type!==h.hyphenate(this._class)||b["class"]&&!(this instanceof b["class"])),o=b.match,p=this;if(n&&(b.center||b.bounds)&&this._parent){if(l=this.getInternalBounds(),b.center&&(m=e("center","Center")),!m&&b.bounds)for(var r=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],s=0;s<8&&!m;s++)m=e("bounds",r[s]);m=d(m)}return m||(m=this._hitTestChildren(a,b,g)||n&&d(this._hitTestSelf(a,b,g,i))||null),m&&m.point&&(m.point=f.transform(m.point)),m},_hitTestSelf:function(a,b){if(b.fill&&this.hasFill()&&this._contains(a))return new E("fill",this)},matches:function(a,b){function c(a,b){for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f=b[d];if(h.isPlainObject(e)&&h.isPlainObject(f)){if(!c(e,f))return!1}else if(!h.equals(e,f))return!1}return!0}var d=typeof a;if("object"===d){for(var e in a)if(a.hasOwnProperty(e)&&!this.matches(e,a[e]))return!1;return!0}if("function"===d)return a(this);if("match"===a)return b(this);var f=/^(empty|editable)$/.test(a)?this["is"+h.capitalize(a)]():"type"===a?h.hyphenate(this._class):this[a];if("class"===a){if("function"==typeof b)return this instanceof b;f=this._class}if("function"==typeof b)return!!b(f);if(b){if(b.test)return b.test(f);if(h.isPlainObject(b))return c(b,f)}return h.equals(f,b)},getItems:function(a){return x._getItems(this,a,this._matrix)},getItem:function(a){return x._getItems(this,a,this._matrix,null,!0)[0]||null},statics:{_getItems:function oa(a,b,c,d,e){if(!d){var f="object"==typeof b&&b,g=f&&f.overlapping,i=f&&f.inside,j=g||i,k=j&&s.read([j]);d={items:[],recursive:f&&f.recursive!==!1,inside:!!i,overlapping:!!g,rect:k,path:g&&new K.Rectangle({rectangle:k,insert:!1})},f&&(b=h.filter({},b,{recursive:!0,inside:!0,overlapping:!0}))}var l=a._children,m=d.items,k=d.rect;c=k&&(c||new u);for(var n=0,o=l&&l.length;n<o;n++){var p=l[n],q=c&&c.appended(p._matrix),r=!0;if(k){var j=p.getBounds(q);if(!k.intersects(j))continue;k.contains(j)||d.overlapping&&(j.contains(k)||d.path.intersects(p,q))||(r=!1)}if(r&&p.matches(b)&&(m.push(p),e))break;if(d.recursive!==!1&&oa(p,b,q,d,e),e&&m.length>0)break}return m}}},{importJSON:function(a){var b=h.importJSON(a,this);return b!==this?this.addChild(b):b},addChild:function(a,b){return this.insertChild(e,a,b)},insertChild:function(a,b,c){var d=b?this.insertChildren(a,[b],c):null;return d&&d[0]},addChildren:function(a,b){return this.insertChildren(this._children.length,a,b)},insertChildren:function(a,b,c,d){var e=this._children;if(e&&b&&b.length>0){b=Array.prototype.slice.apply(b);for(var f=b.length-1;f>=0;f--){var g=b[f];g&&(!d||g instanceof d)?g._remove(!1,!0):b.splice(f,1)}h.splice(e,b,a,0);for(var i=this._project,j=i._changes,f=0,k=b.length;f<k;f++){var g=b[f],l=g._name;g._parent=this,g._setProject(i,!0),l&&g.setName(l),j&&this._changed(5)}this._changed(11)}else b=null;return b},_insertItem:"#insertChild",_insertAt:function(a,b,c){var d=this;if(d!==a){var e=a&&a._getOwner();e?(d._remove(!1,!0),e._insertItem(a._index+b,d,c)):d=null}return d},insertAbove:function(a,b){return this._insertAt(a,1,b)},insertBelow:function(a,b){return this._insertAt(a,0,b)},sendToBack:function(){var a=this._getOwner();return a?a._insertItem(0,this):null},bringToFront:function(){var a=this._getOwner();return a?a._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(a){return this.insertChild(0,a)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(a){return a._insertItem(e,this.clone(!1))},reduce:function(a){var b=this._children;if(b&&1===b.length){var c=b[0].reduce(a);return this._parent?(c.insertAbove(this),this.remove()):c.remove(),c}return this},_removeNamed:function(){var a=this._getOwner();if(a){var b=a._children,c=a._namedChildren,d=this._name,e=c[d],f=e?e.indexOf(this):-1;f!==-1&&(b[d]==this&&delete b[d],e.splice(f,1),e.length?b[d]=e[0]:delete c[d])}},_remove:function(a,b){var c=this._getOwner(),d=this._project,e=this._index;return!!c&&(null!=e&&(d._activeLayer===this&&(d._activeLayer=this.getNextSibling()||this.getPreviousSibling()),h.splice(c._children,null,e,1)),this._name&&this._removeNamed(),this._installEvents(!1),a&&d._changes&&this._changed(5),b&&c._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(a){var b=a&&a.insertBelow(this);return b&&this.remove(),b},removeChildren:function(a,b){if(!this._children)return null;a=a||0,b=h.pick(b,this._children.length);for(var c=h.splice(this._children,null,a,b-a),d=c.length-1;d>=0;d--)c[d]._remove(!0,!1);return c.length>0&&this._changed(11),c},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var a=0,b=this._children.length;a<b;a++)this._children[a]._index=a;this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length},isEditable:function(){for(var a=this;a;){if(!a._visible||a._locked)return!1;a=a._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(a){function b(a){var b=[];do b.unshift(a);while(a=a._parent);return b}for(var c=b(this),d=b(a),e=0,f=Math.min(c.length,d.length);e<f;e++)if(c[e]!=d[e])return c[e]._index<d[e]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(a){return this._getOrder(a)===-1},isBelow:function(a){return 1===this._getOrder(a)},isParent:function(a){return this._parent===a},isChild:function(a){return a&&a._parent===this},isDescendant:function(a){for(var b=this;b=b._parent;)if(b===a)return!0;return!1},isAncestor:function(a){return!!a&&a.isDescendant(this)},isSibling:function(a){return this._parent===a._parent},isGroupedWith:function(a){for(var b=this._parent;b;){if(b._parent&&/^(Group|Layer|CompoundPath)$/.test(b._class)&&a.isDescendant(b))return!0;b=b._parent}return!1}},h.each(["rotate","scale","shear","skew"],function(a){var b="rotate"===a;this[a]=function(){var c=(b?h:o).read(arguments),d=o.read(arguments,0,{readNull:!0});return this.transform((new u)[a](c,d||this.getPosition(!0)))}},{translate:function(){var a=new u;return this.transform(a.translate.apply(a,arguments))},transform:function(a,b,c,d){a&&a.isIdentity()&&(a=null);var e=this._matrix,f=(b||this._applyMatrix)&&(!e.isIdentity()||a||b&&c&&this._children);if(!a&&!f)return this;if(a&&(!a.isInvertible()&&e.isInvertible()&&(e._backup=e.getValues()),e.prepend(a)),f=f&&this._transformContent(e,c,d)){var g=this._pivot,h=this._style,i=h.getFillColor(!0),j=h.getStrokeColor(!0);g&&e._transformPoint(g,g,!0),i&&i.transform(e),j&&j.transform(e),e.reset(!0),d&&this._canApplyMatrix&&(this._applyMatrix=!0)}var k=this._bounds,l=this._position;this._changed(9);var m=k&&a&&a.decompose();if(m&&!m.shearing&&m.rotation%90===0){for(var n in k){var o=k[n];if(f||!o.internal){var p=o.rect;a._transformBounds(p,p)}}var q=this._boundsGetter,p=k[q&&q.getBounds||q||"getBounds"];p&&(this._position=p.getCenter(!0)),this._bounds=k}else a&&l&&(this._position=a._transformPoint(l,l));return this},_transformContent:function(a,b,c){var d=this._children;if(d){for(var e=0,f=d.length;e<f;e++)d[e].transform(a,!0,b,c);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(o.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(o.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(o.read(arguments))},localToParent:function(){return this._matrix._transformPoint(o.read(arguments))},fitBounds:function(a,b){a=s.read(arguments);var c=this.getBounds(),d=c.height/c.width,e=a.height/a.width,f=(b?d>e:d<e)?a.width/c.width:a.height/c.height,g=new s(new o,new q(c.width*f,c.height*f));g.setCenter(a.getCenter()),this.setBounds(g)}}),{_setStyles:function(a,b,c){var e=this._style;if(e.hasFill()&&(a.fillStyle=e.getFillColor().toCanvasStyle(a)),e.hasStroke()){a.strokeStyle=e.getStrokeColor().toCanvasStyle(a),a.lineWidth=e.getStrokeWidth();var f=e.getStrokeJoin(),g=e.getStrokeCap(),h=e.getMiterLimit();if(f&&(a.lineJoin=f),g&&(a.lineCap=g),h&&(a.miterLimit=h),d.support.nativeDash){var i=e.getDashArray(),j=e.getDashOffset();i&&i.length&&("setLineDash"in a?(a.setLineDash(i),a.lineDashOffset=j):(a.mozDash=i,a.mozDashOffset=j))}}if(e.hasShadow()){var k=b.pixelRatio||1,l=c._shiftless().prepend((new u).scale(k,k)),m=l.transform(new o(e.getShadowBlur(),0)),n=l.transform(this.getShadowOffset());a.shadowColor=e.getShadowColor().toCanvasStyle(a),a.shadowBlur=m.getLength(),a.shadowOffsetX=n.x,a.shadowOffsetY=n.y}},draw:function(a,b,c){var d=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var e=b.matrices,f=b.viewMatrix,g=this._matrix,h=e[e.length-1].appended(g);if(h.isInvertible()){f=f?f.appended(h):h,e.push(h),b.updateMatrix&&(h._updateVersion=d,this._globalMatrix=h);var i,j,k,l=this._blendMode,m=this._opacity,n="normal"===l,o=ea.nativeModes[l],p=n&&1===m||b.dontStart||b.clip||(o||n&&m<1)&&this._canComposite(),q=b.pixelRatio||1;if(!p){var r=this.getStrokeBounds(f);if(!r.width||!r.height)return;k=b.offset,j=b.offset=r.getTopLeft().floor(),i=a,a=da.getContext(r.getSize().ceil().add(1).multiply(q)),1!==q&&a.scale(q,q)}a.save();var s=c?c.appended(g):this._canScaleStroke&&!this.getStrokeScaling(!0)&&f,t=!p&&b.clipItem,u=!s||t;if(p?(a.globalAlpha=m,o&&(a.globalCompositeOperation=l)):u&&a.translate(-j.x,-j.y),u&&(p?g:f).applyToContext(a),t&&b.clipItem.draw(a,b.extend({clip:!0})),s){a.setTransform(q,0,0,q,0,0);
var v=b.offset;v&&a.translate(-v.x,-v.y)}this._draw(a,b,f,s),a.restore(),e.pop(),b.clip&&!b.dontFinish&&a.clip(),p||(ea.process(l,a,i,m,j.subtract(k).multiply(q)),da.release(a),b.offset=k)}}},_isUpdated:function(a){var b=this._parent;if(b instanceof L)return b._isUpdated(a);var c=this._updateVersion===a;return!c&&b&&b._visible&&b._isUpdated(a)&&(this._updateVersion=a,c=!0),c},_drawSelection:function(a,b,c,d,e){var f=this._selection,g=1&f,h=2&f||g&&this._selectBounds,i=4&f;if(this._drawSelected||(g=!1),(g||h||i)&&this._isUpdated(e)){var j,k=this.getSelectedColor(!0)||(j=this.getLayer())&&j.getSelectedColor(!0),l=b.appended(this.getGlobalMatrix(!0)),m=c/2;if(a.strokeStyle=a.fillStyle=k?k.toCanvasStyle(a):"#009dec",g&&this._drawSelected(a,l,d),i){var n=this.getPosition(!0),o=n.x,p=n.y;a.beginPath(),a.arc(o,p,m,0,2*Math.PI,!0),a.stroke();for(var q=[[0,-1],[1,0],[0,1],[-1,0]],r=m,s=c+1,t=0;t<4;t++){var u=q[t],v=u[0],w=u[1];a.moveTo(o+v*r,p+w*r),a.lineTo(o+v*s,p+w*s),a.stroke()}}if(h){var x=l._transformCorners(this.getInternalBounds());a.beginPath();for(var t=0;t<8;t++)a[0===t?"moveTo":"lineTo"](x[t],x[++t]);a.closePath(),a.stroke();for(var t=0;t<8;t++)a.fillRect(x[t]-m,x[++t]-m,c,c)}}},_canComposite:function(){return!1}},h.each(["down","drag","up","move"],function(a){this["removeOn"+h.capitalize(a)]=function(){var b={};return b[a]=!0,this.removeOn(b)}},{removeOn:function(a){for(var b in a)if(a[b]){var c="mouse"+b,d=this._project,e=d._removeSets=d._removeSets||{};e[c]=e[c]||{},e[c][this._id]=this}return this}})),y=x.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||this.addChildren(Array.isArray(a)?a:arguments)},_changed:function pa(a){pa.base.call(this,a),1026&a&&(this._clipItem=e)},_getClipItem:function(){var a=this._clipItem;if(a===e){a=null;for(var b=this._children,c=0,d=b.length;c<d;c++)if(b[c]._clipMask){a=b[c];break}this._clipItem=a}return a},isClipped:function(){return!!this._getClipItem()},setClipped:function(a){var b=this.getFirstChild();b&&b.setClipMask(a)},_getBounds:function qa(a,b){var c=this._getClipItem();return c?c._getCachedBounds(a&&a.appended(c._matrix),h.set({},b,{stroke:!1})):qa.base.call(this,a,b)},_hitTestChildren:function ra(a,b,c){var d=this._getClipItem();return(!d||d.contains(a))&&ra.base.call(this,a,b,c,d)},_draw:function(a,b){var c=b.clip,d=!c&&this._getClipItem();b=b.extend({clipItem:d,clip:!1}),c?(a.beginPath(),b.dontStart=b.dontFinish=!0):d&&d.draw(a,b.extend({clip:!0}));for(var e=this._children,f=0,g=e.length;f<g;f++){var h=e[f];h!==d&&h.draw(a,b)}}}),z=y.extend({_class:"Layer",initialize:function(){y.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function sa(){return this._parent?sa.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=x.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(a){this._initialize(a)},_equals:function(a){return this._type===a._type&&this._size.equals(a._size)&&h.equals(this._radius,a._radius)},copyContent:function(a){this.setType(a._type),this.setSize(a._size),this.setRadius(a._radius)},getType:function(){return this._type},setType:function(a){this._type=a},getShape:"#getType",setShape:"#setType",getSize:function(){var a=this._size;return new r(a.width,a.height,this,"setSize")},setSize:function(){var a=q.read(arguments);if(this._size){if(!this._size.equals(a)){var b=this._type,c=a.width,d=a.height;if("rectangle"===b){var e=q.min(this._radius,a.divide(2));this._radius.set(e.width,e.height)}else"circle"===b?(c=d=(c+d)/2,this._radius=c/2):"ellipse"===b&&this._radius.set(c/2,d/2);this._size.set(c,d),this._changed(9)}}else this._size=a.clone()},getRadius:function(){var a=this._radius;return"circle"===this._type?a:new r(a.width,a.height,this,"setRadius")},setRadius:function(a){var b=this._type;if("circle"===b){if(a===this._radius)return;var c=2*a;this._radius=a,this._size.set(c,c)}else if(a=q.read(arguments),this._radius){if(this._radius.equals(a))return;if(this._radius.set(a.width,a.height),"rectangle"===b){var c=q.max(this._size,a.multiply(2));this._size.set(c.width,c.height)}else"ellipse"===b&&this._size.set(2*a.width,2*a.height)}else this._radius=a.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(a){var b=new(K[h.capitalize(this._type)])({center:new o,size:this._size,radius:this._radius,insert:!1});return b.copyAttributes(this),d.settings.applyMatrix&&b.setApplyMatrix(!0),(a===e||a)&&b.insertAbove(this),b},toShape:"#clone",_draw:function(a,b,c,d){var e=this._style,f=e.hasFill(),g=e.hasStroke(),h=b.dontFinish||b.clip,i=!d;if(f||g||h){var j=this._type,k=this._radius,l="circle"===j;if(b.dontStart||a.beginPath(),i&&l)a.arc(0,0,k,0,2*Math.PI,!0);else{var m=l?k:k.width,n=l?k:k.height,o=this._size,p=o.width,q=o.height;if(i&&"rectangle"===j&&0===m&&0===n)a.rect(-p/2,-q/2,p,q);else{var r=p/2,s=q/2,t=.44771525016920644,u=m*t,v=n*t,w=[-r,-s+n,-r,-s+v,-r+u,-s,-r+m,-s,r-m,-s,r-u,-s,r,-s+v,r,-s+n,r,s-n,r,s-v,r-u,s,r-m,s,-r+m,s,-r+u,s,-r,s-v,-r,s-n];d&&d.transform(w,w,32),a.moveTo(w[0],w[1]),a.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),r!==m&&a.lineTo(w[8],w[9]),a.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),s!==n&&a.lineTo(w[16],w[17]),a.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),r!==m&&a.lineTo(w[24],w[25]),a.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}a.closePath()}h||!f&&!g||(this._setStyles(a,b,c),f&&(a.fill(e.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),g&&a.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(a,b){var c=new s(this._size).setCenter(0,0),d=this._style,e=b.stroke&&d.hasStroke()&&d.getStrokeWidth();return a&&(c=a._transformBounds(c)),e?c.expand(K._getStrokePadding(e,this._getStrokeMatrix(a,b))):c}},new function(){function a(a,b,c){var d=a._radius;if(!d.isZero())for(var e=a._size.divide(2),f=0;f<4;f++){var g=new o(1&f?1:-1,f>1?1:-1),h=g.multiply(e),i=h.subtract(g.multiply(d)),j=new s(h,i);if((c?j.expand(c):j).contains(b))return i}}function b(a,b,c,d){var e=a.divide(b);return(!d||e.quadrant===d)&&e.subtract(e.normalize()).multiply(b).divide(c).length<=1}return{_contains:function c(b){if("rectangle"===this._type){var d=a(this,b);return d?b.subtract(d).divide(this._radius).getLength()<=1:c.base.call(this,b)}return b.divide(this.size).getLength()<=.5},_hitTestSelf:function d(c,e,f,g){var h=!1,i=this._style,j=e.stroke&&i.hasStroke(),k=e.fill&&i.hasFill();if(j||k){var l=this._type,m=this._radius,n=j?i.getStrokeWidth()/2:0,o=e._tolerancePadding.add(K._getStrokePadding(n,!i.getStrokeScaling()&&g));if("rectangle"===l){var p=o.multiply(2),q=a(this,c,p);if(q)h=b(c.subtract(q),m,o,q.getQuadrant());else{var r=new s(this._size).setCenter(0,0),t=r.expand(p),u=r.expand(p.negate());h=t._containsPoint(c)&&!u._containsPoint(c)}}else h=b(c,m,o)}return h?new E(j?"stroke":"fill",this):d.base.apply(this,arguments)}}},{statics:new function(){function a(a,b,c,d,e){var f=new A(h.getNamed(e));return f._type=a,f._size=c,f._radius=d,f.translate(b)}return{Circle:function(){var b=o.readNamed(arguments,"center"),c=h.readNamed(arguments,"radius");return a("circle",b,new q(2*c),c,arguments)},Rectangle:function(){var b=s.readNamed(arguments,"rectangle"),c=q.min(q.readNamed(arguments,"radius"),b.getSize(!0).divide(2));return a("rectangle",b.getCenter(!0),b.getSize(!0),c,arguments)},Ellipse:function(){var b=A._readEllipse(arguments),c=b.radius;return a("ellipse",b.center,c.multiply(2),c,arguments)},_readEllipse:function(a){var b,c;if(h.hasNamed(a,"radius"))b=o.readNamed(a,"center"),c=q.readNamed(a,"radius");else{var d=s.readNamed(a,"rectangle");b=d.getCenter(!0),c=d.getSize(!0).divide(2)}return{center:b,radius:c}}}}}),B=x.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},initialize:function(a,b){if(!this._initialize(a,b!==e&&o.read(arguments,1))){var c="string"==typeof a?g.getElementById(a):a;c?this.setImage(c):this.setSource(a)}this._size||(this._size=new q,this._loaded=!1)},_equals:function(a){return this.getSource()===a.getSource()},copyContent:function(a){var b=a._image,c=a._canvas;if(b)this._setImage(b);else if(c){var d=da.getCanvas(a._size);d.getContext("2d").drawImage(c,0,0),this._setImage(d)}this._crossOrigin=a._crossOrigin},getSize:function(){var a=this._size;return new r(a?a.width:0,a?a.height:0,this,"setSize")},setSize:function(){var a=q.read(arguments);if(!a.equals(this._size))if(a.width>0&&a.height>0){var b=this.getElement();this._setImage(da.getCanvas(a)),b&&this.getContext(!0).drawImage(b,0,0,a.width,a.height)}else this._canvas&&da.release(this._canvas),this._size=a.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(a){this.setSize(a,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(a){this.setSize(this.getWidth(),a)},getLoaded:function(){return this._loaded},isEmpty:function(){var a=this._size;return!a||0===a.width&&0===a.height},getResolution:function(){var a=this._matrix,b=new o(0,0).transform(a),c=new o(1,0).transform(a).subtract(b),d=new o(0,1).transform(a).subtract(b);return new q(72/c.getLength(),72/d.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(a){function b(a){var b=c.getView(),e=a&&a.type||"load";b&&c.responds(e)&&(d=b._scope,c.emit(e,new Y(a)))}var c=this;this._setImage(a),this._loaded?setTimeout(b,0):a&&V.add(a,{load:function(d){c._setImage(a),b(d)},error:b})},_setImage:function(a){this._canvas&&da.release(this._canvas),a&&a.getContext?(this._image=null,this._canvas=a,this._loaded=!0):(this._image=a,this._canvas=null,this._loaded=!!(a&&a.src&&a.complete)),this._size=new q(a?a.naturalWidth||a.width:0,a?a.naturalHeight||a.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var a=da.getContext(this._size);try{this._image&&a.drawImage(this._image,0,0),this._canvas=a.canvas}catch(b){da.release(a)}}return this._canvas},setCanvas:"#setImage",getContext:function(a){return this._context||(this._context=this.getCanvas().getContext("2d")),a&&(this._image=null,this._changed(513)),this._context},setContext:function(a){this._context=a},getSource:function(){var a=this._image;return a&&a.src||this.toDataURL()},setSource:function(a){var b=new f.Image,c=this._crossOrigin;c&&(b.crossOrigin=c),b.src=a,this.setImage(b)},getCrossOrigin:function(){var a=this._image;return a&&a.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(a){this._crossOrigin=a;var b=this._image;b&&(b.crossOrigin=a)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var a=s.read(arguments),b=da.getContext(a.getSize());return b.drawImage(this.getCanvas(),a.x,a.y,a.width,a.height,0,0,a.width,a.height),b.canvas},getSubRaster:function(){var a=s.read(arguments),b=new B(x.NO_INSERT);return b._setImage(this.getSubCanvas(a)),b.translate(a.getCenter().subtract(this.getSize().divide(2))),b._matrix.prepend(this._matrix),b.insertAbove(this),b},toDataURL:function(){var a=this._image,b=a&&a.src;if(/^data:/.test(b))return b;var c=this.getCanvas();return c?c.toDataURL.apply(c,arguments):null},drawImage:function(a){var b=o.read(arguments,1);this.getContext(!0).drawImage(a,b.x,b.y)},getAverageColor:function(a){var b,c;if(a?a instanceof J?(c=a,b=a.getBounds()):"object"==typeof a&&("width"in a?b=new s(a):"x"in a&&(b=new s(a.x-.5,a.y-.5,1,1))):b=this.getBounds(),!b)return null;var d=32,e=Math.min(b.width,d),f=Math.min(b.height,d),g=B._sampleContext;g?g.clearRect(0,0,d+1,d+1):g=B._sampleContext=da.getContext(new q(d)),g.save();var i=(new u).scale(e/b.width,f/b.height).translate(-b.x,-b.y);i.applyToContext(g),c&&c.draw(g,new h({clip:!0,matrices:[i]})),this._matrix.applyToContext(g);var j=this.getElement(),k=this._size;j&&g.drawImage(j,-k.width/2,-k.height/2),g.restore();for(var l=g.getImageData(.5,.5,Math.ceil(e),Math.ceil(f)).data,m=[0,0,0],n=0,o=0,p=l.length;o<p;o+=4){var r=l[o+3];n+=r,r/=255,m[0]+=l[o]*r,m[1]+=l[o+1]*r,m[2]+=l[o+2]*r}for(var o=0;o<3;o++)m[o]/=n;return n?Q.read(m):null},getPixel:function(){var a=o.read(arguments),b=this.getContext().getImageData(a.x,a.y,1,1).data;return new Q("rgb",[b[0]/255,b[1]/255,b[2]/255],b[3]/255)},setPixel:function(){var a=o.read(arguments),b=Q.read(arguments),c=b._convert("rgb"),d=b._alpha,e=this.getContext(!0),f=e.createImageData(1,1),g=f.data;g[0]=255*c[0],g[1]=255*c[1],g[2]=255*c[2],g[3]=null!=d?255*d:255,e.putImageData(f,a.x,a.y)},createImageData:function(){var a=q.read(arguments);return this.getContext().createImageData(a.width,a.height)},getImageData:function(){var a=s.read(arguments);return a.isEmpty()&&(a=new s(this._size)),this.getContext().getImageData(a.x,a.y,a.width,a.height)},setImageData:function(a){var b=o.read(arguments,1);this.getContext(!0).putImageData(a,b.x,b.y)},_getBounds:function(a,b){var c=new s(this._size).setCenter(0,0);return a?a._transformBounds(c):c},_hitTestSelf:function(a){if(this._contains(a)){var b=this;return new E("pixel",b,{offset:a.add(b._size.divide(2)).round(),color:{get:function(){return b.getPixel(this.offset)}}})}},_draw:function(a){var b=this.getElement();b&&(a.globalAlpha=this._opacity,a.drawImage(b,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),C=x.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(a,b){this._initialize(a,b!==e&&o.read(arguments,1))||this.setDefinition(a instanceof D?a:new D(a))},_equals:function(a){return this._definition===a._definition},copyContent:function(a){this.setDefinition(a._definition)},getDefinition:function(){return this._definition},setDefinition:function(a){this._definition=a,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(a,b){var c=this._definition._item;return c._getCachedBounds(c._matrix.prepended(a),b)},_hitTestSelf:function(a,b,c,d){var e=this._definition._item._hitTest(a,b,c);return e&&(e.item=this),e},_draw:function(a,b){this._definition._item.draw(a,b)}}),D=h.extend({_class:"SymbolDefinition",initialize:function(a,b){this._id=n.get(),this.project=d.project,a&&this.setItem(a,b)},_serialize:function(a,b){return b.add(this,function(){return h.serialize([this._class,this._item],a,!1,b)})},_changed:function(a){8&a&&x._clearBoundsCache(this),1&a&&this.project._changed(a)},getItem:function(){return this._item},setItem:function(a,b){a._symbol&&(a=a.clone()),this._item&&(this._item._symbol=null),this._item=a,a.remove(),a.setSelected(!1),b||a.setPosition(new o),a._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(a){return new C(this,a)},clone:function(){return new D(this._item.clone(!1))},equals:function(a){return a===this||a&&this._item.equals(a._item)||!1}}),E=h.extend({_class:"HitResult",initialize:function(a,b,c){this.type=a,this.item=b,c&&(c.enumerable=!0,this.inject(c))},statics:{getOptions:function(a){var b=a&&h.read(a);return h.set({type:null,tolerance:d.settings.hitTolerance,fill:!b,stroke:!b,segments:!b,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},b)}}}),F=h.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(a,b,c,d,f,g){var h,i,j,k,l=arguments.length;0===l||(1===l?a&&"point"in a?(h=a.point,i=a.handleIn,j=a.handleOut,k=a.selection):h=a:null==a||"object"==typeof a?(h=a,i=b,j=c,k=d):(h=a!==e?[a,b]:null,i=c!==e?[c,d]:null,j=f!==e?[f,g]:null)),new G(h,this,"_point"),new G(i,this,"_handleIn"),new G(j,this,"_handleOut"),k&&this.setSelection(k)},_serialize:function(a,b){var c=this._point,d=this._selection,e=d||this.hasHandles()?[c,this._handleIn,this._handleOut]:c;return d&&e.push(d),h.serialize(e,a,!0,b)},_changed:function(a){var b=this._path;if(b){var c,d=b._curves,e=this._index;d&&(a&&a!==this._point&&a!==this._handleIn||!(c=e>0?d[e-1]:b._closed?d[d.length-1]:null)||c._changed(),a&&a!==this._point&&a!==this._handleOut||!(c=d[e])||c._changed()),b._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var a=o.read(arguments);this._point.set(a.x,a.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var a=o.read(arguments);this._handleIn.set(a.x,a.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var a=o.read(arguments);this._handleOut.set(a.x,a.y)},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},getSelection:function(){return this._selection},setSelection:function(a){var b=this._selection,c=this._path;this._selection=a=a||0,c&&a!==b&&(c._updateSelection(this,b,a),c._changed(129))},changeSelection:function(a,b){var c=this._selection;this.setSelection(b?c|a:c&~a)},isSelected:function(){return!!(7&this._selection)},setSelected:function(a){this.changeSelection(7,a)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var a=this._path,b=this._index;return a?(b>0&&!a._closed&&b===a._segments.length-1&&b--,a.getCurves()[b]||null):null},getLocation:function(){var a=this.getCurve();return a?new I(a,this===a._segment1?0:1):null},getNext:function(){var a=this._path&&this._path._segments;return a&&(a[this._index+1]||this._path._closed&&a[0])||null},smooth:function(a,b,c){var d=a||{},f=d.type,g=d.factor,h=this.getPrevious(),i=this.getNext(),j=(h||this)._point,k=this._point,l=(i||this)._point,m=j.getDistance(k),n=k.getDistance(l);if(f&&"catmull-rom"!==f){if("geometric"!==f)throw new Error("Smoothing method '"+f+"' not supported.");if(h&&i){var p=j.subtract(l),q=g===e?.4:g,r=q*m/(m+n);b||this.setHandleIn(p.multiply(r)),c||this.setHandleOut(p.multiply(r-q))}}else{var s=g===e?.5:g,t=Math.pow(m,s),u=t*t,v=Math.pow(n,s),w=v*v;if(!b&&h){var x=2*w+3*v*t+u,y=3*v*(v+t);this.setHandleIn(0!==y?new o((w*j._x+x*k._x-u*l._x)/y-k._x,(w*j._y+x*k._y-u*l._y)/y-k._y):new o)}if(!c&&i){var x=2*u+3*t*v+w,y=3*t*(t+v);this.setHandleOut(0!==y?new o((u*l._x+x*k._x-w*j._x)/y-k._x,(u*l._y+x*k._y-w*j._y)/y-k._y):new o)}}},getPrevious:function(){var a=this._path&&this._path._segments;return a&&(a[this._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return 0===this._index},isLast:function(){var a=this._path;return a&&this._index===a._segments.length-1||!1},reverse:function(){var a=this._handleIn,b=this._handleOut,c=a._x,d=a._y;a.set(b._x,b._y),b.set(c,d)},reversed:function(){return new F(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new F(this._point,this._handleIn,this._handleOut)},equals:function(a){return a===this||a&&this._class===a._class&&this._point.equals(a._point)&&this._handleIn.equals(a._handleIn)&&this._handleOut.equals(a._handleOut)||!1},toString:function(){var a=["point: "+this._point];return this._handleIn.isZero()||a.push("handleIn: "+this._handleIn),this._handleOut.isZero()||a.push("handleOut: "+this._handleOut),"{ "+a.join(", ")+" }"},transform:function(a){this._transformCoordinates(a,new Array(6),!0),this._changed()},interpolate:function(a,b,c){var d=1-c,e=c,f=a._point,g=b._point,h=a._handleIn,i=b._handleIn,j=b._handleOut,k=a._handleOut;this._point.set(d*f._x+e*g._x,d*f._y+e*g._y,!0),this._handleIn.set(d*h._x+e*i._x,d*h._y+e*i._y,!0),this._handleOut.set(d*k._x+e*j._x,d*k._y+e*j._y,!0),this._changed()},_transformCoordinates:function(a,b,c){var d=this._point,e=c&&this._handleIn.isZero()?null:this._handleIn,f=c&&this._handleOut.isZero()?null:this._handleOut,g=d._x,h=d._y,i=2;return b[0]=g,b[1]=h,e&&(b[i++]=e._x+g,b[i++]=e._y+h),f&&(b[i++]=f._x+g,b[i++]=f._y+h),a&&(a._transformCoordinates(b,b,i/2),g=b[0],h=b[1],c?(d._x=g,d._y=h,i=2,e&&(e._x=b[i++]-g,e._y=b[i++]-h),f&&(f._x=b[i++]-g,f._y=b[i++]-h)):(e||(b[i++]=g,b[i++]=h),f||(b[i++]=g,b[i++]=h))),b}}),G=o.extend({initialize:function(a,b,c){var d,f,g;if(a)if((d=a[0])!==e)f=a[1];else{var h=a;(d=h.x)===e&&(h=o.read(arguments),d=h.x),f=h.y,g=h.selected}else d=f=0;this._x=d,this._y=f,this._owner=b,b[c]=this,g&&this.setSelected(!0)},set:function(a,b){return this._x=a,this._y=b,this._owner._changed(this),this},getX:function(){return this._x},setX:function(a){this._x=a,this._owner._changed(this)},getY:function(){return this._y},setY:function(a){this._y=a,this._owner._changed(this)},isZero:function(){return m.isZero(this._x)&&m.isZero(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(a){this._owner.changeSelection(this._getSelection(),a)},_getSelection:function(){var a=this._owner;return this===a._point?1:this===a._handleIn?2:this===a._handleOut?4:0}}),H=h.extend({_class:"Curve",initialize:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o=arguments.length;3===o?(this._path=a,i=b,j=c):0===o?(i=new F,j=new F):1===o?"segment1"in a?(i=new F(a.segment1),j=new F(a.segment2)):"point1"in a?(k=a.point1,m=a.handle1,n=a.handle2,l=a.point2):Array.isArray(a)&&(k=[a[0],a[1]],l=[a[6],a[7]],m=[a[2]-a[0],a[3]-a[1]],n=[a[4]-a[6],a[5]-a[7]]):2===o?(i=new F(a),j=new F(b)):4===o?(k=a,m=b,n=c,l=d):8===o&&(k=[a,b],l=[g,h],m=[c-a,d-b],n=[e-g,f-h]),this._segment1=i||new F(k,null,m),this._segment2=j||new F(l,n,null)},_serialize:function(a,b){return h.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],a,!0,b)},_changed:function(){this._length=this._bounds=e},clone:function(){return new H(this._segment1,this._segment2)},toString:function(){var a=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||a.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||a.push("handle2: "+this._segment2._handleIn),a.push("point2: "+this._segment2._point),"{ "+a.join(", ")+" }"},remove:function(){var a=!1;if(this._path){var b=this._segment2,c=b._handleOut;a=b.remove(),a&&this._segment1._handleOut.set(c.x,c.y)}return a},getPoint1:function(){return this._segment1._point},setPoint1:function(){var a=o.read(arguments);this._segment1._point.set(a.x,a.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var a=o.read(arguments);this._segment2._point.set(a.x,a.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var a=o.read(arguments);this._segment1._handleOut.set(a.x,a.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var a=o.read(arguments);this._segment2._handleIn.set(a.x,a.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index+1]||this._path._closed&&a[0])||null},getPrevious:function(){var a=this._path&&this._path._curves;return a&&(a[this._segment1._index-1]||this._path._closed&&a[a.length-1])||null},isFirst:function(){return 0===this._segment1._index},isLast:function(){var a=this._path;return a&&this._segment1._index===a._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(a){this.getPoint1().setSelected(a),this.getHandle1().setSelected(a),this.getHandle2().setSelected(a),this.getPoint2().setSelected(a)},getValues:function(a){return H.getValues(this._segment1,this._segment2,a)},getPoints:function(){for(var a=this.getValues(),b=[],c=0;c<8;c+=2)b.push(new o(a[c],a[c+1]));return b},getLength:function(){return null==this._length&&(this._length=H.getLength(this.getValues(),0,1)),this._length},getArea:function(){return H.getArea(this.getValues())},getLine:function(){return new v(this._segment1._point,this._segment2._point)},getPart:function(a,b){return new H(H.getPart(this.getValues(),a,b))},getPartLength:function(a,b){return H.getLength(this.getValues(),a,b)},getIntersections:function(a){return H._getIntersections(this.getValues(),a&&a!==this?a.getValues():null,this,a,[],{})},divideAt:function(a){return this.divideAtTime(a&&a.curve===this?a.time:a)},divideAtTime:function(a,b){var c=4e-7,d=1-c,e=null;if(a>=c&&a<=d){var f=H.subdivide(this.getValues(),a),g=f[0],h=f[1],i=b||this.hasHandles(),j=this._segment1,k=this._segment2,l=this._path;i&&(j._handleOut.set(g[2]-g[0],g[3]-g[1]),k._handleIn.set(h[4]-h[6],h[5]-h[7]));var m=g[6],n=g[7],p=new F(new o(m,n),i&&new o(g[4]-m,g[5]-n),i&&new o(h[2]-m,h[3]-n));l?(l.insert(j._index+1,p),e=this.getNext()):(this._segment2=p,this._changed(),e=new H(p,k))}return e},splitAt:function(a){return this._path?this._path.splitAt(a):null},splitAtTime:function(a){return this.splitAt(this.getLocationAtTime(a))},divide:function(a,b){return this.divideAtTime(a===e?.5:b?a:this.getTimeAt(a))},split:function(a,b){return this.splitAtTime(a===e?.5:b?a:this.getTimeAt(a))},reversed:function(){return new H(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},statics:{getValues:function(a,b,c){var d=a._point,e=a._handleOut,f=b._handleIn,g=b._point,h=[d._x,d._y,d._x+e._x,d._y+e._y,g._x+f._x,g._y+f._y,g._x,g._y];return c&&c._transformCoordinates(h,h,4),h},subdivide:function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7];b===e&&(b=.5);var l=1-b,m=l*c+b*f,n=l*d+b*g,o=l*f+b*h,p=l*g+b*i,q=l*h+b*j,r=l*i+b*k,s=l*m+b*o,t=l*n+b*p,u=l*o+b*q,v=l*p+b*r,w=l*s+b*u,x=l*t+b*v;return[[c,d,m,n,s,t,w,x],[w,x,u,v,q,r,j,k]]},solveCubic:function(a,b,c,d,e,f){var g=a[b],h=a[b+2],i=a[b+4],j=a[b+6],k=0;if(!(g<c&&j<c&&h<c&&i<c||g>c&&j>c&&h>c&&i>c)){var l=3*(h-g),n=3*(i-h)-l,o=j-g-l-n;k=m.solveCubic(o,n,l,g-c,d,e,f)}return k},getTimeOf:function(a,b){var c=new o(a[0],a[1]),d=new o(a[6],a[7]),e=1e-12,f=b.isClose(c,e)?0:b.isClose(d,e)?1:null;if(null!==f)return f;for(var g=[b.x,b.y],h=[],i=2e-7,j=0;j<2;j++)for(var k=H.solveCubic(a,j,g[j],h,0,1),l=0;l<k;l++)if(f=h[l],b.isClose(H.getPoint(a,f),i))return f;return b.isClose(c,i)?0:b.isClose(d,i)?1:null},getNearestTime:function(a,b){function c(c){if(c>=0&&c<=1){var d=b.getDistance(H.getPoint(a,c),!0);if(d<m)return m=d,n=c,!0}}if(H.isStraight(a)){var d=a[0],e=a[1],f=a[6],g=a[7],h=f-d,i=g-e,j=h*h+i*i;if(0===j)return 0;var k=((b.x-d)*h+(b.y-e)*i)/j;return k<1e-12?0:k>.999999999999?1:H.getTimeOf(a,new o(d+k*h,e+k*i))}for(var l=100,m=1/0,n=0,p=0;p<=l;p++)c(p/l);for(var q=1/(2*l);q>4e-7;)c(n-q)||c(n+q)||(q/=2);return n},getPart:function(a,b,c){var d=b>c;if(d){var e=b;b=c,c=e}return b>0&&(a=H.subdivide(a,b)[1]),c<1&&(a=H.subdivide(a,(c-b)/(1-b))[0]),d?[a[6],a[7],a[4],a[5],a[2],a[3],a[0],a[1]]:a},isFlatEnough:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=3*e-2*c-i,l=3*f-2*d-j,m=3*g-2*i-c,n=3*h-2*j-d;return Math.max(k*k,m*m)+Math.max(l*l,n*n)<=16*b*b},getArea:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7];return 3*((i-c)*(d+f)-(h-b)*(e+g)+e*(b-f)-d*(c-g)+i*(f+b/3)-h*(g+c/3))/20},getBounds:function(a){for(var b=a.slice(0,2),c=b.slice(),d=[0,0],e=0;e<2;e++)H._addBounds(a[e],a[e+2],a[e+4],a[e+6],e,0,b,c,d);return new s(b[0],b[1],c[0]-b[0],c[1]-b[1])},_addBounds:function(a,b,c,d,e,f,g,h,i){function j(a,b){var c=a-b,d=a+b;c<g[e]&&(g[e]=c),d>h[e]&&(h[e]=d)}f/=2;var k=g[e]-f,l=h[e]+f;if(a<k||b<k||c<k||d<k||a>l||b>l||c>l||d>l)if(b<a!=b<d&&c<a!=c<d)j(a,f),j(d,f);else{var n=3*(b-c)-a+d,o=2*(a+c)-4*b,p=b-a,q=m.solveQuadratic(n,o,p,i),r=4e-7,s=1-r;j(d,0);for(var t=0;t<q;t++){var u=i[t],v=1-u;r<u&&u<s&&j(v*v*v*a+3*v*v*u*b+3*v*u*u*c+u*u*u*d,f)}}}}},h.each(["getBounds","getStrokeBounds","getHandleBounds"],function(a){this[a]=function(){this._bounds||(this._bounds={});var b=this._bounds[a];return b||(b=this._bounds[a]=K[a]([this._segment1,this._segment2],!1,this._path)),b.clone()}},{}),h.each({isStraight:function(a,b,c){if(b.isZero()&&c.isZero())return!0;var d=a.getVector(),e=2e-7;if(d.isZero())return!1;if(a.getDistance(b)<e&&a.getDistance(c)<e){var f=d.dot(d),g=d.dot(b)/f,h=d.dot(c)/f;return g>=0&&g<=1&&h<=0&&h>=-1}return!1},isLinear:function(a,b,c){var d=a.getVector().divide(3);return b.equals(d)&&c.negate().equals(d)}},function(a,b){this[b]=function(){var b=this._segment1,c=this._segment2;return a(new v(b._point,c._point),b._handleOut,c._handleIn)},this.statics[b]=function(b){var c=b[0],d=b[1],e=b[6],f=b[7];return a(new v(c,d,e,f),new o(b[2]-c,b[3]-d),new o(b[4]-e,b[5]-f))}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},isCollinear:function(a){return a&&this.isStraight()&&a.isStraight()&&this.getLine().isCollinear(a.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-7},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-7}}),{beans:!1,getLocationAt:function(a,b){return this.getLocationAtTime(b?a:this.getTimeAt(a))},getLocationAtTime:function(a){return null!=a&&a>=0&&a<=1?new I(this,a):null},getTimeAt:function(a,b){return H.getTimeAt(this.getValues(),a,b)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(a){return this.getPartLength(0,a)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(o.read(arguments)))},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getTimeOf:function(){return H.getTimeOf(this.getValues(),o.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var a=o.read(arguments),b=this.getValues(),c=H.getNearestTime(b,a),d=H.getPoint(b,c);return new I(this,c,d,null,a.getDistance(d))},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a?a.getPoint():a}},new function(){var a=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return h.each(a,function(a){this[a+"At"]=function(b,c){var d=this.getValues();return H[a](d,c?b:H.getTimeAt(d,b))},this[a+"AtTime"]=function(b){return H[a](this.getValues(),b)}},{statics:{_evaluateMethods:a}})},new function(){function a(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=9*(d-f)+3*(h-b),k=6*(b+f)-12*d,l=3*(d-b),m=9*(e-g)+3*(i-c),n=6*(c+g)-12*e,o=3*(e-c);return function(a){var b=(j*a+k)*a+l,c=(m*a+n)*a+o;return Math.sqrt(b*b+c*c)}}function b(a,b){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(b-a))))}function c(a,b,c,d){if(null==b||b<0||b>1)return null;var e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l=a[7],n=m.isZero;n(g-e)&&n(h-f)&&(g=e,h=f),n(i-k)&&n(j-l)&&(i=k,j=l);var p,q,r=3*(g-e),s=3*(i-g)-r,t=k-e-r-s,u=3*(h-f),v=3*(j-h)-u,w=l-f-u-v;if(0===c)p=0===b?e:1===b?k:((t*b+s)*b+r)*b+e,q=0===b?f:1===b?l:((w*b+v)*b+u)*b+f;else{var x=4e-7,y=1-x;if(b<x?(p=r,q=u):b>y?(p=3*(k-i),q=3*(l-j)):(p=(3*t*b+2*s)*b+r,q=(3*w*b+2*v)*b+u),d){0===p&&0===q&&(b<x||b>y)&&(p=i-g,q=j-h);var z=Math.sqrt(p*p+q*q);z&&(p/=z,q/=z)}if(3===c){var A=6*t*b+2*s,B=6*w*b+2*v,C=Math.pow(p*p+q*q,1.5);p=0!==C?(p*B-q*A)/C:0,q=0}}return 2===c?new o(q,(-p)):new o(p,q)}return{statics:{getLength:function(c,d,f,g){if(d===e&&(d=0),f===e&&(f=1),H.isStraight(c)){var h=c;f<1&&(h=H.subdivide(h,f)[0],d/=f),d>0&&(h=H.subdivide(h,d)[1]);var i=h[6]-h[0],j=h[7]-h[1];return Math.sqrt(i*i+j*j)}return m.integrate(g||a(c),d,f,b(d,f))},getTimeAt:function(c,d,f){function g(a){return r+=m.integrate(n,f,a,b(f,a)),f=a,r-d}if(f===e&&(f=d<0?1:0),0===d)return f;var h=Math.abs,i=1e-12,j=d>0,k=j?f:0,l=j?1:f,n=a(c),o=H.getLength(c,k,l,n),p=h(d)-o;if(h(p)<i)return j?l:k;if(p>i)return null;var q=d/o,r=0;return m.findRoot(g,n,f+q,k,l,32,1e-12)},getPoint:function(a,b){return c(a,b,0,!1)},getTangent:function(a,b){
return c(a,b,1,!0)},getWeightedTangent:function(a,b){return c(a,b,1,!1)},getNormal:function(a,b){return c(a,b,2,!0)},getWeightedNormal:function(a,b){return c(a,b,2,!1)},getCurvature:function(a,b){return c(a,b,3,!1).x}}}},new function(){function a(a,b,c,d,e,f,g,h,i,j,k){var l=!k&&b.excludeStart,m=!k&&b.excludeEnd,n=4e-7,o=1-n;if(null==e&&(e=H.getTimeOf(c,f)),null!==e&&e>=(l?n:0)&&e<=(m?o:1)&&(null==i&&(i=H.getTimeOf(g,j)),null!==i&&i>=(m?n:0)&&i<=(l?o:1))){var p=b.renormalize;if(p){var q=p(e,i);e=q[0],i=q[1]}var r=new I(d,e,f||H.getPoint(c,e),k),s=new I(h,i,j||H.getPoint(g,i),k),t=r.getPath()===s.getPath()&&r.getIndex()>s.getIndex(),u=t?s:r,v=b.include;r._intersection=s,s._intersection=r,v&&!v(u)||I.insert(a,u,!0)}}function b(e,f,g,h,i,j,k,l,m,n,o,p,q){if(++p>=48||++q>4096)return q;var r,s,t=f[0],u=f[1],w=f[6],x=f[7],y=v.getSignedDistance,z=y(t,u,w,x,f[2],f[3]),A=y(t,u,w,x,f[4],f[5]),B=z*A>0?.75:4/9,C=B*Math.min(0,z,A),D=B*Math.max(0,z,A),E=y(t,u,w,x,e[0],e[1]),F=y(t,u,w,x,e[2],e[3]),G=y(t,u,w,x,e[4],e[5]),I=y(t,u,w,x,e[6],e[7]),J=c(E,F,G,I),K=J[0],L=J[1];if(0===z&&0===A&&0===E&&0===F&&0===G&&0===I||null==(r=d(K,L,C,D))||null==(s=d(K.reverse(),L.reverse(),C,D)))return q;var M=k+(l-k)*r,N=k+(l-k)*s;if(Math.max(n-m,N-M)<1e-9){var O=(M+N)/2,P=(m+n)/2;e=g.getValues(),f=h.getValues(),a(i,j,o?f:e,o?h:g,o?P:O,null,o?e:f,o?g:h,o?O:P,null)}else if(e=H.getPart(e,r,s),s-r>.8)if(N-M>n-m){var Q=H.subdivide(e,.5),O=(M+N)/2;q=b(f,Q[0],h,g,i,j,m,n,M,O,!o,p,q),q=b(f,Q[1],h,g,i,j,m,n,O,N,!o,p,q)}else{var Q=H.subdivide(f,.5),P=(m+n)/2;q=b(Q[0],e,h,g,i,j,m,P,M,N,!o,p,q),q=b(Q[1],e,h,g,i,j,P,n,M,N,!o,p,q)}else q=b(f,e,h,g,i,j,m,n,M,N,!o,p,q);return q}function c(a,b,c,d){var e,f=[0,a],g=[1/3,b],h=[2/3,c],i=[1,d],j=b-(2*a+d)/3,k=c-(a+2*d)/3;if(j*k<0)e=[[f,g,i],[f,h,i]];else{var l=j/k;e=[l>=2?[f,g,i]:l<=.5?[f,h,i]:[f,g,h,i],[f,i]]}return(j||k)<0?e.reverse():e}function d(a,b,c,d){return a[0][1]<c?e(a,!0,c):b[0][1]>d?e(b,!1,d):a[0][0]}function e(a,b,c){for(var d=a[0][0],e=a[0][1],f=1,g=a.length;f<g;f++){var h=a[f][0],i=a[f][1];if(b?i>=c:i<=c)return i===c?h:d+(c-e)*(h-d)/(i-e);d=h,e=i}return null}function f(b,c,d,e,f,g){for(var h=H.isStraight(b),i=h?c:b,j=h?b:c,k=j[0],l=j[1],n=j[6],o=j[7],p=n-k,q=o-l,r=Math.atan2(-q,p),s=Math.sin(r),t=Math.cos(r),u=[],v=0;v<8;v+=2){var w=i[v]-k,x=i[v+1]-l;u.push(w*t-x*s,w*s+x*t)}for(var y=[],z=H.solveCubic(u,1,0,y,0,1),v=0;v<z;v++){var A=y[v],B=H.getPoint(i,A),C=H.getTimeOf(j,B);if(null!==C){var D=H.getPoint(j,C),E=h?C:A,F=h?A:C;(!g.excludeEnd||F>m.CURVETIME_EPSILON)&&a(f,g,b,d,E,h?D:B,c,e,F,h?B:D)}}}function g(b,c,d,e,f,g){var h=v.intersect(b[0],b[1],b[6],b[7],c[0],c[1],c[6],c[7]);h&&a(f,g,b,d,null,h,c,e,null,h)}return{statics:{_getIntersections:function(c,d,e,h,i,j){if(!d)return H._getSelfIntersection(c,e,i,j);var k=2e-7,l=c[0],m=c[1],n=c[6],p=c[7],q=d[0],r=d[1],s=d[6],t=d[7],u=(3*c[2]+l)/4,v=(3*c[3]+m)/4,w=(3*c[4]+n)/4,x=(3*c[5]+p)/4,y=(3*d[2]+q)/4,z=(3*d[3]+r)/4,A=(3*d[4]+s)/4,B=(3*d[5]+t)/4,C=Math.min,D=Math.max;if(!(D(l,u,w,n)+k>C(q,y,A,s)&&C(l,u,w,n)-k<D(q,y,A,s)&&D(m,v,x,p)+k>C(r,z,B,t)&&C(m,v,x,p)-k<D(r,z,B,t)))return i;var E=H.getOverlaps(c,d);if(E){for(var F=0;F<2;F++){var G=E[F];a(i,j,c,e,G[0],null,d,h,G[1],null,!0)}return i}var I=H.isStraight(c),J=H.isStraight(d),K=I&&J,L=i.length;if((K?g:I||J?f:b)(c,d,e,h,i,j,0,1,0,1,0,0,0),K&&i.length>L)return i;var M=new o(l,m),N=new o(n,p),O=new o(q,r),P=new o(s,t);return M.isClose(O,k)&&a(i,j,c,e,0,M,d,h,0,O),!j.excludeStart&&M.isClose(P,k)&&a(i,j,c,e,0,M,d,h,1,P),!j.excludeEnd&&N.isClose(O,k)&&a(i,j,c,e,1,N,d,h,0,O),N.isClose(P,k)&&a(i,j,c,e,1,N,d,h,1,P),i},_getSelfIntersection:function(a,b,c,d){var e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l=a[7],n=new v(e,f,k,l,(!1)),p=n.getSide(new o(g,h),!0),q=n.getSide(new o(i,j),!0);if(p===q){var r=(e-i)*(h-l)+(g-k)*(j-f);if(r*p>0)return c}var s=k-3*i+3*g-e,t=i-2*g+e,u=g-e,w=l-3*j+3*h-f,x=j-2*h+f,y=h-f,z=w*u-s*y,A=w*t-s*x,B=x*u-t*y;if(z*z-4*A*B<0){var C,D=[],E=m.solveCubic(s*s+w*w,3*(s*t+w*x),2*(t*t+x*x)+s*u+w*y,t*u+x*y,D,0,1);if(E>0){for(var F=0,G=0;F<E;F++){var I=Math.abs(b.getCurvatureAtTime(D[F]));I>G&&(G=I,C=D[F])}var J=H.subdivide(a,C);d.excludeEnd=!0,d.renormalize=function(a,b){return[a*C,b*(1-C)+C]},H._getIntersections(J[0],J[1],b,b,c,d)}}return c},getOverlaps:function(a,b){function c(a){var b=a[6]-a[0],c=a[7]-a[1];return b*b+c*c}var d=Math.abs,e=4e-7,f=2e-7,g=H.isStraight(a),h=H.isStraight(b),i=g&&h,j=c(a)<c(b),k=j?b:a,l=j?a:b,m=new v(k[0],k[1],k[6],k[7]);if(m.getDistance(new o(l[0],l[1]))<f&&m.getDistance(new o(l[6],l[7]))<f)!i&&m.getDistance(new o(k[2],k[3]))<f&&m.getDistance(new o(k[4],k[5]))<f&&m.getDistance(new o(l[2],l[3]))<f&&m.getDistance(new o(l[4],l[5]))<f&&(g=h=i=!0);else if(i)return null;if(g^h)return null;for(var n=[a,b],p=[],q=0,r=0;q<2&&p.length<2;q+=0===r?0:1,r=1^r){var s=H.getTimeOf(n[1^q],new o(n[q][0===r?0:6],n[q][0===r?1:7]));if(null!=s){var t=0===q?[r,s]:[s,r];(0===p.length||d(t[0]-p[0][0])>e&&d(t[1]-p[0][1])>e)&&p.push(t)}if(1===q&&0===p.length)break}if(2!==p.length)p=null;else if(!i){var u=H.getPart(a,p[0][0],p[1][0]),w=H.getPart(b,p[0][1],p[1][1]);(d(w[2]-u[2])>f||d(w[3]-u[3])>f||d(w[4]-u[4])>f||d(w[5]-u[5])>f)&&(p=null)}return p}}}}),I=h.extend({_class:"CurveLocation",beans:!0,initialize:function(a,b,c,d,e){if(b>.9999996){var f=a.getNext();f&&(b=0,a=f)}this._setCurve(a),this._time=b,this._point=c||a.getPointAtTime(b),this._overlap=d,this._distance=e,this._intersection=this._next=this._previous=null},_setCurve:function(a){var b=a._path;this._path=b,this._version=b?b._version:0,this._curve=a,this._segment=null,this._segment1=a._segment1,this._segment2=a._segment2},_setSegment:function(a){this._setCurve(a.getCurve()),this._segment=a,this._time=a===this._segment1?0:1,this._point=a._point.clone()},getSegment:function(){var a=this.getCurve(),b=this._segment;if(!b){var c=this.getTime();0===c?b=a._segment1:1===c?b=a._segment2:null!=c&&(b=a.getPartLength(0,c)<a.getPartLength(c,1)?a._segment1:a._segment2),this._segment=b}return b},getCurve:function(){function a(a){var b=a&&a.getCurve();if(b&&null!=(c._time=b.getTimeOf(c._point)))return c._setCurve(b),c._segment=a,b}var b=this._path,c=this;return b&&b._version!==this._version&&(this._time=this._curve=this._offset=null),this._curve||a(this._segment)||a(this._segment1)||a(this._segment2.getPrevious())},getPath:function(){var a=this.getCurve();return a&&a._path},getIndex:function(){var a=this.getCurve();return a&&a.getIndex()},getTime:function(){var a=this.getCurve(),b=this._time;return a&&null==b?this._time=a.getTimeOf(this._point):b},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var a=this._offset;if(null==a){a=0;var b=this.getPath(),c=this.getIndex();if(b&&null!=c)for(var d=b.getCurves(),e=0;e<c;e++)a+=d[e].getLength();this._offset=a+=this.getCurveOffset()}return a},getCurveOffset:function(){var a=this.getCurve(),b=this.getTime();return null!=b&&a&&a.getPartLength(0,b)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var a=this.getCurve(),b=null;return a&&(b=a.divideAtTime(this.getTime()),b&&this._setSegment(b._segment1)),b},split:function(){var a=this.getCurve();return a?a.splitAtTime(this.getTime()):null},equals:function(a,b){var c=this===a,d=2e-7;if(!c&&a instanceof I&&this.getPath()===a.getPath()&&this.getPoint().isClose(a.getPoint(),d)){var e=this.getCurve(),f=a.getCurve(),g=Math.abs,h=g((e.isLast()&&f.isFirst()?-1:e.getIndex())+this.getTime()-((f.isLast()&&e.isFirst()?-1:f.getIndex())+a.getTime()));c=(h<4e-7||(h=g(this.getOffset()-a.getOffset()))<d||g(this.getPath().getLength()-h)<d)&&(b||!this._intersection&&!a._intersection||this._intersection&&this._intersection.equals(a._intersection,!0))}return c},toString:function(){var a=[],b=this.getPoint(),c=l.instance;b&&a.push("point: "+b);var d=this.getIndex();null!=d&&a.push("index: "+d);var e=this.getTime();return null!=e&&a.push("time: "+c.number(e)),null!=this._distance&&a.push("distance: "+c.number(this._distance)),"{ "+a.join(", ")+" }"},isTouching:function(){var a=this._intersection;if(a&&this.getTangent().isCollinear(a.getTangent())){var b=this.getCurve(),c=a.getCurve();return!(b.isStraight()&&c.isStraight()&&b.getLine().intersect(c.getLine()))}return!1},isCrossing:function(){function a(a,b,c){return b<c?a>b&&a<c:a>b||a<c}var b=this._intersection;if(!b)return!1;var c=this.getTime(),d=b.getTime(),e=4e-7,f=1-e,g=c>e&&c<f,h=d>e&&d<f;if(g&&h)return!this.isTouching();var i=this.getCurve(),j=c<=e?i.getPrevious():i,k=b.getCurve(),l=d<=e?k.getPrevious():k;if(c>=f&&(i=i.getNext()),d>=f&&(k=k.getNext()),!(j&&i&&l&&k))return!1;var m=[];g||m.push(j.getLength(),i.getLength()),h||m.push(l.getLength(),k.getLength());var n=this.getPoint(),o=Math.min.apply(Math,m)/64,p=g?i.getTangentAtTime(c):i.getPointAt(o).subtract(n),q=g?p.negate():j.getPointAt(-o).subtract(n),r=h?k.getTangentAtTime(d):k.getPointAt(o).subtract(n),s=h?r.negate():l.getPointAt(-o).subtract(n),t=q.getAngle(),u=p.getAngle(),v=s.getAngle(),w=r.getAngle();return!!(g?a(t,v,w)^a(u,v,w)&&a(t,w,v)^a(u,w,v):a(v,t,u)^a(w,t,u)&&a(v,u,t)^a(w,u,t))},hasOverlap:function(){return!!this._overlap}},h.each(H._evaluateMethods,function(a){var b=a+"At";this[a]=function(){var a=this.getCurve(),c=this.getTime();return null!=c&&a&&a[b](c,!0)}},{preserve:!0}),new function(){function a(a,b,c){function d(c,d){for(var f=c+d;f>=-1&&f<=e;f+=d){var g=a[(f%e+e)%e];if(!b.getPoint().isClose(g.getPoint(),2e-7))break;if(b.equals(g))return g}return null}for(var e=a.length,f=0,g=e-1;f<=g;){var h,i=f+g>>>1,j=a[i];if(c&&(h=b.equals(j)?j:d(i,-1)||d(i,1)))return b._overlap&&(h._overlap=h._intersection._overlap=!0),h;var k=b.getPath(),l=j.getPath(),m=k===l?b.getIndex()+b.getTime()-(j.getIndex()+j.getTime()):k._id-l._id;m<0?g=i-1:f=i+1}return a.splice(f,0,b),b}return{statics:{insert:a,expand:function(b){for(var c=b.slice(),d=b.length-1;d>=0;d--)a(c,b[d]._intersection,!1);return c}}}}),J=x.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,initialize:function(){},statics:{create:function(a){var b=(a&&a.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(a)?L:K;return new b(a)}},_asPathItem:function(){return this},setPathData:function(a){function b(a,b){var c=+d[a];return h&&(c+=i[b]),c}function c(a){return new o(b(a,"x"),b(a+1,"y"))}var d,e,f,g=a&&a.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),h=!1,i=new o,j=new o;this.clear();for(var k=0,l=g&&g.length;k<l;k++){var m=g[k],n=m[0],p=n.toLowerCase();d=m.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var r=d&&d.length;switch(h=n===p,"z"!==e||/[mz]/.test(p)||this.moveTo(i=j),p){case"m":case"l":for(var s="m"===p,t=0;t<r;t+=2)this[0===t&&s?"moveTo":"lineTo"](i=c(t));f=i,s&&(j=i);break;case"h":case"v":for(var u="h"===p?"x":"y",t=0;t<r;t++)i[u]=b(t,u),this.lineTo(i);f=i;break;case"c":for(var t=0;t<r;t+=6)this.cubicCurveTo(c(t),f=c(t+2),i=c(t+4));break;case"s":for(var t=0;t<r;t+=4)this.cubicCurveTo(/[cs]/.test(e)?i.multiply(2).subtract(f):i,f=c(t),i=c(t+2)),e=p;break;case"q":for(var t=0;t<r;t+=4)this.quadraticCurveTo(f=c(t),i=c(t+2));break;case"t":for(var t=0;t<r;t+=2)this.quadraticCurveTo(f=/[qt]/.test(e)?i.multiply(2).subtract(f):i,i=c(t)),e=p;break;case"a":for(var t=0;t<r;t+=7)this.arcTo(i=c(t+5),new q((+d[t]),(+d[t+1])),+d[t+2],+d[t+4],+d[t+3]);break;case"z":this.closePath(1e-12)}e=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(a){var b=a.isInside(this.getBounds({internal:!0,handle:!0}))&&this._getWinding(a);return!!("evenodd"===this.getFillRule()?1&b:b)},getIntersections:function(a,b,c,d){var e=this===a||!a,f=this._matrix._orNullIfIdentity(),g=e?f:(c||a._matrix)._orNullIfIdentity();if(!e&&!this.getBounds(f).touches(a.getBounds(g)))return[];for(var h,a,i=this.getCurves(),j=e?i:a.getCurves(),k=i.length,l=e?k:j.length,m=[],n=[],o=0;o<l;o++)m[o]=j[o].getValues(g);for(var o=0;o<k;o++){var p=i[o],q=e?m[o]:p.getValues(f),r=p.getPath();r!==a&&(a=r,h=[],n.push(h)),e&&H._getSelfIntersection(q,p,h,{include:b,excludeStart:1===k&&p.getPoint1().equals(p.getPoint2())});for(var s=e?o+1:0;s<l;s++){if(d&&h.length)return h;var t=j[s];H._getIntersections(q,m[s],p,t,h,{include:b,excludeStart:e&&p.getPrevious()===t,excludeEnd:e&&p.getNext()===t})}}h=[];for(var o=0,u=n.length;o<u;o++)h.push.apply(h,n[o]);return h},getCrossings:function(a){return this.getIntersections(a,function(a){return a._overlap||a.isCrossing()})},getNearestLocation:function(){for(var a=o.read(arguments),b=this.getCurves(),c=1/0,d=null,e=0,f=b.length;e<f;e++){var g=b[e].getNearestLocation(a);g._distance<c&&(c=g._distance,d=g)}return d},getNearestPoint:function(){var a=this.getNearestLocation.apply(this,arguments);return a?a.getPoint():a},interpolate:function(a,b,c){var d=!this._children,e=d?"_segments":"_children",f=a[e],g=b[e],h=this[e];if(!f||!g||f.length!==g.length)throw new Error("Invalid operands in interpolate() call: "+a+", "+b);var i=h.length,j=g.length;if(i<j)for(var k=d?F:K,l=i;l<j;l++)this.add(new k);else i>j&&this[d?"removeSegments":"removeChildren"](j,i);for(var l=0;l<j;l++)h[l].interpolate(f[l],g[l],c);d&&(this.setClosed(a._closed),this._changed(9))}}),K=J.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(a){this._closed=!1,this._segments=[],this._version=0;var b=Array.isArray(a)?"object"==typeof a[0]?a:arguments:!a||a.size!==e||a.x===e&&a.point===e?null:arguments;b&&b.length>0?this.setSegments(b):(this._curves=e,this._segmentSelection=0,b||"string"!=typeof a||(this.setPathData(a),a=null)),this._initialize(!b&&a)},_equals:function(a){return this._closed===a._closed&&h.equals(this._segments,a._segments)},copyContent:function(a){this.setSegments(a._segments),this._closed=a._closed;var b=a._clockwise;b!==e&&(this._clockwise=b)},_changed:function ta(a){if(ta.base.call(this,a),8&a){if(this._length=this._area=this._clockwise=this._monoCurves=e,16&a)this._version++;else if(this._curves)for(var b=0,c=this._curves.length;b<c;b++)this._curves[b]._changed()}else 32&a&&(this._bounds=e)},getStyle:function(){var a=this._parent;return(a instanceof L?a:this)._style},getSegments:function(){return this._segments},setSegments:function(a){var b=this.isFullySelected();this._segments.length=0,this._segmentSelection=0,this._curves=e,a&&a.length>0&&this._add(F.readAll(a)),b&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var a=this._curves,b=this._segments;if(!a){var c=this._countCurves();a=this._curves=new Array(c);for(var d=0;d<c;d++)a[d]=new H(this,b[d],b[d+1]||b[0])}return a},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var a=this.getCurves();return a[a.length-1]},isClosed:function(){return this._closed},setClosed:function(a){if(this._closed!=(a=!!a)){if(this._closed=a,this._curves){var b=this._curves.length=this._countCurves();a&&(this._curves[b-1]=new H(this,this._segments[b-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(a,b){function c(b,c){b._transformCoordinates(a,p),d=p[0],e=p[1],q?(r.push("M"+o.pair(d,e)),q=!1):(h=p[2],i=p[3],h===d&&i===e&&j===f&&k===g?c||r.push("l"+o.pair(d-f,e-g)):r.push("c"+o.pair(j-f,k-g)+" "+o.pair(h-f,i-g)+" "+o.pair(d-f,e-g))),f=d,g=e,j=p[4],k=p[5]}var d,e,f,g,h,i,j,k,m=this._segments,n=m.length,o=new l(b),p=new Array(6),q=!0,r=[];if(0===n)return"";for(var s=0;s<n;s++)c(m[s]);return this._closed&&n>0&&(c(m[0],!0),r.push("z")),r.join("")},isEmpty:function(){return 0===this._segments.length},_transformContent:function(a){for(var b=this._segments,c=new Array(6),d=0,e=b.length;d<e;d++)b[d]._transformCoordinates(a,c,!0);return!0},_add:function(a,b){for(var c=this._segments,d=this._curves,e=a.length,f=null==b,b=f?c.length:b,g=0;g<e;g++){var h=a[g];h._path&&(h=a[g]=h.clone()),h._path=this,h._index=b+g,h._selection&&this._updateSelection(h,0,h._selection)}if(f)c.push.apply(c,a);else{c.splice.apply(c,[b,0].concat(a));for(var g=b+e,i=c.length;g<i;g++)c[g]._index=g}if(d){var j=this._countCurves(),k=b>0&&b+e-1===j?b-1:b,l=k,m=Math.min(k+e,j);a._curves&&(d.splice.apply(d,[k,0].concat(a._curves)),l+=a._curves.length);for(var g=l;g<m;g++)d.splice(g,0,new H(this,null,null));this._adjustCurves(k,m)}return this._changed(25),a},_adjustCurves:function(a,b){for(var c,d=this._segments,e=this._curves,f=a;f<b;f++)c=e[f],c._path=this,c._segment1=d[f],c._segment2=d[f+1]||d[0],c._changed();(c=e[this._closed&&0===a?d.length-1:a-1])&&(c._segment2=d[a]||d[0],c._changed()),(c=e[b])&&(c._segment1=d[b],c._changed())},_countCurves:function(){var a=this._segments.length;return!this._closed&&a>0?a-1:a},add:function(a){return arguments.length>1&&"number"!=typeof a?this._add(F.readAll(arguments)):this._add([F.read(arguments)])[0]},insert:function(a,b){return arguments.length>2&&"number"!=typeof b?this._add(F.readAll(arguments,1),a):this._add([F.read(arguments,1)],a)[0]},addSegment:function(){return this._add([F.read(arguments)])[0]},insertSegment:function(a){return this._add([F.read(arguments,1)],a)[0]},addSegments:function(a){return this._add(F.readAll(a))},insertSegments:function(a,b){return this._add(F.readAll(b),a)},removeSegment:function(a){return this.removeSegments(a,a+1)[0]||null},removeSegments:function(a,b,c){a=a||0,b=h.pick(b,this._segments.length);var d=this._segments,e=this._curves,f=d.length,g=d.splice(a,b-a),i=g.length;if(!i)return g;for(var j=0;j<i;j++){var k=g[j];k._selection&&this._updateSelection(k,k._selection,0),k._index=k._path=null}for(var j=a,l=d.length;j<l;j++)d[j]._index=j;if(e){for(var m=a>0&&b===f+(this._closed?1:0)?a-1:a,e=e.splice(m,i),j=e.length-1;j>=0;j--)e[j]._path=null;c&&(g._curves=e.slice(1)),this._adjustCurves(m,m)}return this._changed(25),g},clear:"#removeSegments",hasHandles:function(){for(var a=this._segments,b=0,c=a.length;b<c;b++)if(a[b].hasHandles())return!0;return!1},clearHandles:function(){for(var a=this._segments,b=0,c=a.length;b<c;b++)a[b].clearHandles()},getLength:function(){if(null==this._length){for(var a=this.getCurves(),b=0,c=0,d=a.length;c<d;c++)b+=a[c].getLength();this._length=b}return this._length},getArea:function(a){var b=a===e,c=this._area;if(!b||null==c){var d=this._segments,f=d.length,g=b?this._closed:a,h=f-1;c=0;for(var i=0,j=g?f:h;i<j;i++)c+=H.getArea(H.getValues(d[i],d[i<h?i+1:0]));b&&(this._area=c)}return c},isClockwise:function(){return this._clockwise!==e?this._clockwise:this.getArea()>=0},setClockwise:function(a){this.isClockwise()!=(a=!!a)&&this.reverse(),this._clockwise=a},isFullySelected:function(){var a=this._segments.length;return this.isSelected()&&a>0&&this._segmentSelection===7*a},setFullySelected:function(a){a&&this._selectSegments(!0),this.setSelected(a)},setSelection:function ua(a){1&a||this._selectSegments(!1),ua.base.call(this,a)},_selectSegments:function(a){var b=this._segments,c=b.length,d=a?7:0;this._segmentSelection=d*c;for(var e=0;e<c;e++)b[e]._selection=d},_updateSelection:function(a,b,c){a._selection=c;var d=this._segmentSelection+=c-b;d>0&&this.setSelected(!0)},splitAt:function(a){var b="number"==typeof a?this.getLocationAt(a):a,c=b&&b.index,d=b&&b.time,e=4e-7,f=1-e;d>=f&&(c++,d=0);var g=this.getCurves();if(c>=0&&c<g.length){d>=e&&g[c++].divideAtTime(d);var h,i=this.removeSegments(c,this._segments.length,!0);return this._closed?(this.setClosed(!1),h=this):(h=new K(x.NO_INSERT),h.insertAbove(this,!0),h.copyAttributes(this)),h._add(i,0),this.addSegment(i[0]),h}return null},split:function(a,b){var c,d=b===e?a:(c=this.getCurves()[a])&&c.getLocationAtTime(b);return null!=d?this.splitAt(d):null},join:function(a,b){var c=b||0;if(a&&a!==this){var d=a._segments,e=this.getLastSegment(),f=a.getLastSegment();if(!f)return this;e&&e._point.isClose(f._point,c)&&a.reverse();var g=a.getFirstSegment();if(e&&e._point.isClose(g._point,c))e.setHandleOut(g._handleOut),this._add(d.slice(1));else{var h=this.getFirstSegment();h&&h._point.isClose(g._point,c)&&a.reverse(),f=a.getLastSegment(),h&&h._point.isClose(f._point,c)?(h.setHandleIn(f._handleIn),this._add(d.slice(0,d.length-1),0)):this._add(d.slice())}a._closed&&this._add([d[0]]),a.remove()}var i=this.getFirstSegment(),j=this.getLastSegment();return i!==j&&i._point.isClose(j._point,c)&&(i.setHandleIn(j._handleIn),j.remove(),this.setClosed(!0)),this},reduce:function(a){for(var b=this.getCurves(),c=a&&a.simplify,d=c?2e-7:0,e=b.length-1;e>=0;e--){var f=b[e];!f.hasHandles()&&(f.getLength()<d||c&&f.isCollinear(f.getNext()))&&f.remove()}return this},reverse:function(){this._segments.reverse();for(var a=0,b=this._segments.length;a<b;a++){var c=this._segments[a],d=c._handleIn;c._handleIn=c._handleOut,c._handleOut=d,c._index=a}this._curves=null,this._clockwise!==e&&(this._clockwise=!this._clockwise),this._changed(9)},flatten:function(a){for(var b=new M(this,a||.25,256,(!0)),c=b.parts,d=c.length,e=[],f=0;f<d;f++)e.push(new F(c[f].curve.slice(0,2)));!this._closed&&d>0&&e.push(new F(c[d-1].curve.slice(6))),this.setSegments(e)},simplify:function(a){var b=new N(this).fit(a||2.5);return b&&this.setSegments(b),!!b},smooth:function(a){function b(a,b){var d=a&&a.index;if(null!=d){var e=a.path;if(e&&e!==c)throw new Error(a._class+" "+d+" of "+e+" is not part of "+c);b&&a instanceof H&&d++}else d="number"==typeof a?a:b;return Math.min(d<0&&i?d%h:d<0?d+h:d,h-1)}var c=this,d=a||{},f=d.type||"asymmetric",g=this._segments,h=g.length,i=this._closed,j=i&&d.from===e&&d.to===e,k=b(d.from,0),l=b(d.to,h-1);if(k>l)if(i)k-=h;else{var m=k;k=l,l=m}if(/^(?:asymmetric|continuous)$/.test(f)){var n="asymmetric"===f,o=Math.min,p=l-k+1,q=p-1,r=j?o(p,4):1,s=r,t=r,u=[];if(i||(s=o(1,k),t=o(1,h-l-1)),q+=s+t,q<=1)return;for(var v=0,w=k-s;v<=q;v++,w++)u[v]=g[(w<0?w+h:w)%h]._point;for(var x=u[0]._x+2*u[1]._x,y=u[0]._y+2*u[1]._y,z=2,A=q-1,B=[x],C=[y],D=[z],E=[],F=[],v=1;v<q;v++){var G=v<A,I=G?1:n?1:2,J=G?4:n?2:7,K=G?4:n?3:8,L=G?2:n?0:1,M=I/z;z=D[v]=J-M,x=B[v]=K*u[v]._x+L*u[v+1]._x-M*x,y=C[v]=K*u[v]._y+L*u[v+1]._y-M*y}E[A]=B[A]/D[A],F[A]=C[A]/D[A];for(var v=q-2;v>=0;v--)E[v]=(B[v]-E[v+1])/D[v],F[v]=(C[v]-F[v+1])/D[v];E[q]=(3*u[q]._x-E[A])/2,F[q]=(3*u[q]._y-F[A])/2;for(var v=s,N=q-t,w=k;v<=N;v++,w++){var O=g[w<0?w+h:w],P=O._point,Q=E[v]-P._x,R=F[v]-P._y;(j||v<N)&&O.setHandleOut(Q,R),(j||v>s)&&O.setHandleIn(-Q,-R)}}else for(var v=k;v<=l;v++)g[v<0?v+h:v].smooth(d,!j&&v===k,!j&&v===l)},toShape:function(a){function b(a,b){var c=k[a],d=c.getNext(),e=k[b],f=e.getNext();return c._handleOut.isZero()&&d._handleIn.isZero()&&e._handleOut.isZero()&&f._handleIn.isZero()&&d._point.subtract(c._point).isCollinear(f._point.subtract(e._point))}function c(a){var b=k[a],c=b.getPrevious(),d=b.getNext();return c._handleOut.isZero()&&b._handleIn.isZero()&&b._handleOut.isZero()&&d._handleIn.isZero()&&b._point.subtract(c._point).isOrthogonal(d._point.subtract(b._point))}function d(a){var b=k[a],c=b.getNext(),d=b._handleOut,e=c._handleIn,f=.5522847498307936;if(d.isOrthogonal(e)){var g=b._point,h=c._point,i=new v(g,d,(!0)).intersect(new v(h,e,(!0)),!0);return i&&m.isZero(d.getLength()/i.subtract(g).getLength()-f)&&m.isZero(e.getLength()/i.subtract(h).getLength()-f)}return!1}function f(a,b){return k[a]._point.getDistance(k[b]._point)}if(!this._closed)return null;var g,h,i,j,k=this._segments;if(!this.hasHandles()&&4===k.length&&b(0,2)&&b(1,3)&&c(1)?(g=A.Rectangle,h=new q(f(0,3),f(0,1)),j=k[1]._point.add(k[2]._point).divide(2)):8===k.length&&d(0)&&d(2)&&d(4)&&d(6)&&b(1,5)&&b(3,7)?(g=A.Rectangle,h=new q(f(1,6),f(0,3)),i=h.subtract(new q(f(0,7),f(1,2))).divide(2),j=k[3]._point.add(k[4]._point).divide(2)):4===k.length&&d(0)&&d(1)&&d(2)&&d(3)&&(m.isZero(f(0,2)-f(1,3))?(g=A.Circle,i=f(0,2)/2):(g=A.Ellipse,i=new q(f(2,0)/2,f(3,1)/2)),j=k[1]._point),g){var l=this.getPosition(!0),n=new g({center:l,size:h,radius:i,insert:!1});return n.copyAttributes(this,!0),n._matrix.prepend(this._matrix),n.rotate(j.subtract(l).getAngle()+90),(a===e||a)&&n.insertAbove(this),n}return null},toPath:"#clone",_hitTestSelf:function(a,b,c,d){function e(b,c){return a.subtract(b).divide(c).length<=1}function f(a,c,d){if(!b.selected||c.isSelected()){var f=a._point;if(c!==f&&(c=c.add(f)),e(c,v))return new E(d,p,{segment:a,point:c})}}function g(a,c){return(c||b.segments)&&f(a,a._point,"segment")||!c&&b.handles&&(f(a,a._handleIn,"handle-in")||f(a,a._handleOut,"handle-out"))}function h(a){m.add(a)}function i(b){if(("round"!==j||"round"!==k)&&(m=new K({internal:!0,closed:!0}),t||b._index>0&&b._index<s-1?"round"!==j&&(b._handleIn.isZero()||b._handleOut.isZero())&&K._addBevelJoin(b,j,z,l,null,d,h,!0):"round"!==k&&K._addSquareCap(b,k,z,null,d,h,!0),!m.isEmpty())){var c;return m.contains(a)||(c=m.getNearestLocation(a))&&e(c.getPoint(),u)}return e(b._point,v)}var j,k,l,m,n,o,p=this,q=this.getStyle(),r=this._segments,s=r.length,t=this._closed,u=b._tolerancePadding,v=u,w=b.stroke&&q.hasStroke(),x=b.fill&&q.hasFill(),y=b.curves,z=w?q.getStrokeWidth()/2:x&&b.tolerance>0||y?0:null;if(null!==z&&(z>0?(j=q.getStrokeJoin(),k=q.getStrokeCap(),l=z*q.getMiterLimit(),v=v.add(K._getStrokePadding(z,d))):j=k="round"),!b.ends||b.segments||t){if(b.segments||b.handles)for(var A=0;A<s;A++)if(o=g(r[A]))return o}else if(o=g(r[0],!0)||g(r[s-1],!0))return o;if(null!==z){if(n=this.getNearestLocation(a)){var B=n.getTime();0===B||1===B&&s>1?i(n.getSegment())||(n=null):e(n.getPoint(),v)||(n=null)}if(!n&&"miter"===j&&s>1)for(var A=0;A<s;A++){var C=r[A];if(a.getDistance(C._point)<=l&&i(C)){n=C.getLocation();break}}}return!n&&x&&this._contains(a)||n&&!w&&!y?new E("fill",this):n?new E(w?"stroke":"curve",this,{location:n,point:n.getPoint()}):null}},h.each(H._evaluateMethods,function(a){this[a+"At"]=function(b){var c=this.getLocationAt(b);return c&&c[a]()}},{beans:!1,getLocationOf:function(){for(var a=o.read(arguments),b=this.getCurves(),c=0,d=b.length;c<d;c++){var e=b[c].getLocationOf(a);if(e)return e}return null},getOffsetOf:function(){var a=this.getLocationOf.apply(this,arguments);return a?a.getOffset():null},getLocationAt:function(a){for(var b=this.getCurves(),c=0,d=0,e=b.length;d<e;d++){var f=c,g=b[d];if(c+=g.getLength(),c>a)return g.getLocationAt(a-f)}return b.length>0&&a<=this.getLength()?new I(b[b.length-1],1):null}}),new function(){function a(a,b,c,d){function e(b){var c=i[b],d=i[b+1];f==c&&g==d||(a.beginPath(),a.moveTo(f,g),a.lineTo(c,d),a.stroke(),a.beginPath(),a.arc(c,d,h,0,2*Math.PI,!0),a.fill())}for(var f,g,h=d/2,i=new Array(6),j=0,k=b.length;j<k;j++){var l=b[j],m=l._selection;if(l._transformCoordinates(c,i),f=i[0],g=i[1],2&m&&e(2),4&m&&e(4),a.fillRect(f-h,g-h,d,d),!(1&m)){var n=a.fillStyle;a.fillStyle="#ffffff",a.fillRect(f-h+1,g-h+1,d-2,d-2),a.fillStyle=n}}}function b(a,b,c){function d(b){if(c)b._transformCoordinates(c,o),e=o[0],f=o[1];else{var d=b._point;e=d._x,f=d._y}if(p)a.moveTo(e,f),p=!1;else{if(c)i=o[2],j=o[3];else{var m=b._handleIn;i=e+m._x,j=f+m._y}i===e&&j===f&&k===g&&l===h?a.lineTo(e,f):a.bezierCurveTo(k,l,i,j,e,f)}if(g=e,h=f,c)k=o[4],l=o[5];else{var m=b._handleOut;k=g+m._x,l=h+m._y}}for(var e,f,g,h,i,j,k,l,m=b._segments,n=m.length,o=new Array(6),p=!0,q=0;q<n;q++)d(m[q]);b._closed&&n>0&&d(m[0])}return{_draw:function(a,c,e,f){function g(a){return m[(a%n+n)%n]}var h=c.dontStart,i=c.dontFinish||c.clip,j=this.getStyle(),k=j.hasFill(),l=j.hasStroke(),m=j.getDashArray(),n=!d.support.nativeDash&&l&&m&&m.length;if(h||a.beginPath(),(k||l&&!n||i)&&(b(a,this,f),this._closed&&a.closePath()),!i&&(k||l)&&(this._setStyles(a,c,e),k&&(a.fill(j.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),l)){if(n){h||a.beginPath();var o,p=new M(this,.25,32,(!1),f),q=p.length,r=-j.getDashOffset(),s=0;for(r%=q;r>0;)r-=g(s--)+g(s--);for(;r<q;)o=r+g(s++),(r>0||o>0)&&p.drawPart(a,Math.max(r,0),Math.max(o,0)),r=o+g(s++)}a.stroke()}},_drawSelected:function(c,e){c.beginPath(),b(c,this,e),c.stroke(),a(c,this._segments,e,d.settings.handleSize)}}},new function(){function a(a){var b=a._segments;if(0===b.length)throw new Error("Use a moveTo() command first");return b[b.length-1]}return{moveTo:function(){var a=this._segments;1===a.length&&this.removeSegment(0),a.length||this._add([new F(o.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new F(o.read(arguments))])},cubicCurveTo:function(){var b=o.read(arguments),c=o.read(arguments),d=o.read(arguments),e=a(this);e.setHandleOut(b.subtract(e._point)),this._add([new F(d,c.subtract(d))])},quadraticCurveTo:function(){var b=o.read(arguments),c=o.read(arguments),d=a(this)._point;this.cubicCurveTo(b.add(d.subtract(b).multiply(1/3)),b.add(c.subtract(b).multiply(1/3)),c)},curveTo:function(){var b=o.read(arguments),c=o.read(arguments),d=h.pick(h.read(arguments),.5),e=1-d,f=a(this)._point,g=b.subtract(f.multiply(e*e)).subtract(c.multiply(d*d)).divide(2*d*e);if(g.isNaN())throw new Error("Cannot put a curve through points with parameter = "+d);this.quadraticCurveTo(g,c)},arcTo:function(){var b,c,d,e,f,g=a(this),i=g._point,j=o.read(arguments),k=h.peek(arguments),l=h.pick(k,!0);if("boolean"==typeof l)var n=i.add(j).divide(2),b=n.add(n.subtract(i).rotate(l?-90:90));else if(h.remain(arguments)<=2)b=j,j=o.read(arguments);else{var p=q.read(arguments),r=m.isZero;if(r(p.width)||r(p.height))return this.lineTo(j);var s=h.read(arguments),l=!!h.read(arguments),t=!!h.read(arguments),n=i.add(j).divide(2),w=i.subtract(n).rotate(-s),x=w.x,y=w.y,z=Math.abs,A=z(p.width),B=z(p.height),C=A*A,D=B*B,E=x*x,G=y*y,H=Math.sqrt(E/C+G/D);if(H>1&&(A*=H,B*=H,C=A*A,D=B*B),H=(C*D-C*G-D*E)/(C*G+D*E),z(H)<1e-12&&(H=0),H<0)throw new Error("Cannot create an arc with the given arguments");c=new o(A*y/B,-B*x/A).multiply((t===l?-1:1)*Math.sqrt(H)).rotate(s).add(n),f=(new u).translate(c).rotate(s).scale(A,B),e=f._inverseTransform(i),d=e.getDirectedAngle(f._inverseTransform(j)),!l&&d>0?d-=360:l&&d<0&&(d+=360)}if(b){var I=new v(i.add(b).divide(2),b.subtract(i).rotate(90),(!0)),J=new v(b.add(j).divide(2),j.subtract(b).rotate(90),(!0)),K=new v(i,j),L=K.getSide(b);if(c=I.intersect(J,!0),!c){if(!L)return this.lineTo(j);throw new Error("Cannot create an arc with the given arguments")}e=i.subtract(c),d=e.getDirectedAngle(j.subtract(c));var M=K.getSide(c);0===M?d=L*Math.abs(d):L===M&&(d+=d<0?360:-360)}for(var N=Math.abs(d),O=N>=360?4:Math.ceil(N/90),P=d/O,Q=P*Math.PI/360,R=4/3*Math.sin(Q)/(1+Math.cos(Q)),S=[],T=0;T<=O;T++){var w=j,U=null;if(T<O&&(U=e.rotate(90).multiply(R),f?(w=f._transformPoint(e),U=f._transformPoint(e.add(U)).subtract(w)):w=c.add(e)),0===T)g.setHandleOut(U);else{var V=e.rotate(-90).multiply(R);f&&(V=f._transformPoint(e.add(V)).subtract(w)),S.push(new F(w,V,U))}e=e.rotate(P)}this._add(S)},lineBy:function(){var b=o.read(arguments),c=a(this)._point;this.lineTo(c.add(b))},curveBy:function(){var b=o.read(arguments),c=o.read(arguments),d=h.read(arguments),e=a(this)._point;this.curveTo(e.add(b),e.add(c),d)},cubicCurveBy:function(){var b=o.read(arguments),c=o.read(arguments),d=o.read(arguments),e=a(this)._point;this.cubicCurveTo(e.add(b),e.add(c),e.add(d))},quadraticCurveBy:function(){var b=o.read(arguments),c=o.read(arguments),d=a(this)._point;this.quadraticCurveTo(d.add(b),d.add(c))},arcBy:function(){var b=a(this)._point,c=b.add(o.read(arguments)),d=h.pick(h.peek(arguments),!0);"boolean"==typeof d?this.arcTo(c,d):this.arcTo(c,b.add(o.read(arguments)))},closePath:function(a){this.setClosed(!0),this.join(this,a)}}},{_getBounds:function(a,b){var c=b.handle?"getHandleBounds":b.stroke?"getStrokeBounds":"getBounds";return K[c](this._segments,this._closed,this,a,b)},statics:{getBounds:function(a,b,c,d,e,f){function g(a){a._transformCoordinates(d,i);for(var b=0;b<2;b++)H._addBounds(j[b],j[b+4],i[b+2],i[b],b,f?f[b]:0,k,l,m);var c=j;j=i,i=c}var h=a[0];if(!h)return new s;for(var i=new Array(6),j=h._transformCoordinates(d,new Array(6)),k=j.slice(0,2),l=k.slice(),m=new Array(2),n=1,o=a.length;n<o;n++)g(a[n]);return b&&g(h),new s(k[0],k[1],l[0]-k[0],l[1]-k[1])},getStrokeBounds:function(a,b,c,d,e){function f(a){o=o.include(a)}function g(a){o=o.unite(v.setCenter(a._point.transform(d)))}function h(a,b){var c=a._handleIn,e=a._handleOut;"round"===b||!c.isZero()&&!e.isZero()&&c.isCollinear(e)?g(a):K._addBevelJoin(a,b,p,u,d,m,f);
}function i(a,b){"round"===b?g(a):K._addSquareCap(a,b,p,d,m,f)}var j=c.getStyle(),k=j.hasStroke(),l=j.getStrokeWidth(),m=k&&c._getStrokeMatrix(d,e),n=k&&K._getStrokePadding(l,m),o=K.getBounds(a,b,c,d,e,n);if(!k)return o;for(var p=l/2,r=j.getStrokeJoin(),t=j.getStrokeCap(),u=p*j.getMiterLimit(),v=new s(new q(n)),w=a.length-(b?0:1),x=1;x<w;x++)h(a[x],r);return b?h(a[0],r):w>0&&(i(a[0],t),i(a[a.length-1],t)),o},_getStrokePadding:function(a,b){if(!b)return[a,a];var c=new o(a,0).transform(b),d=new o(0,a).transform(b),e=c.getAngleInRadians(),f=c.getLength(),g=d.getLength(),h=Math.sin(e),i=Math.cos(e),j=Math.tan(e),k=Math.atan2(g*j,f),l=Math.atan2(g,j*f);return[Math.abs(f*Math.cos(k)*i+g*Math.sin(k)*h),Math.abs(g*Math.sin(l)*i+f*Math.cos(l)*h)]},_addBevelJoin:function(a,b,c,d,e,f,g,h){var i=a.getCurve(),j=i.getPrevious(),k=i.getPointAtTime(0),l=j.getNormalAtTime(1),m=i.getNormalAtTime(0),n=l.getDirectedAngle(m)<0?-c:c;if(l.setLength(n),m.setLength(n),e&&e._transformPoint(k,k),f&&(f._transformPoint(l,l),f._transformPoint(m,m)),h&&(g(k),g(k.add(l))),"miter"===b){var p=new v(k.add(l),new o((-l.y),l.x),(!0)).intersect(new v(k.add(m),new o((-m.y),m.x),(!0)),!0);if(p&&k.getDistance(p)<=d&&(g(p),!h))return}h||g(k.add(l)),g(k.add(m))},_addSquareCap:function(a,b,c,d,e,f,g){var h=a._point,i=a.getLocation(),j=i.getNormal().multiply(c);d&&d._transformPoint(h,h),e&&e._transformPoint(j,j),g&&(f(h.subtract(j)),f(h.add(j))),"square"===b&&(h=h.add(j.rotate(0===i.getTime()?-90:90))),f(h.add(j)),f(h.subtract(j))},getHandleBounds:function(a,b,c,d,e){var f,g,h=c.getStyle(),i=e.stroke&&h.hasStroke();if(i){var j=c._getStrokeMatrix(d,e),k=h.getStrokeWidth()/2,l=k;"miter"===h.getStrokeJoin()&&(l=k*h.getMiterLimit()),"square"===h.getStrokeCap()&&(l=Math.max(l,k*Math.sqrt(2))),f=K._getStrokePadding(k,j),g=K._getStrokePadding(l,j)}for(var m=new Array(6),n=1/0,o=-n,p=n,q=o,r=0,t=a.length;r<t;r++){var u=a[r];u._transformCoordinates(d,m);for(var v=0;v<6;v+=2){var w=0===v?g:f,x=w?w[0]:0,y=w?w[1]:0,z=m[v],A=m[v+1],B=z-x,C=z+x,D=A-y,E=A+y;B<n&&(n=B),C>o&&(o=C),D<p&&(p=D),E>q&&(q=E)}}return new s(n,p,o-n,q-p)}}});K.inject({statics:new function(){function a(a,b,c){var d=h.getNamed(c),e=new K(d&&d.insert===!1&&x.NO_INSERT);return e._add(a),e._closed=b,e.set(d)}function b(b,c,e){for(var f=new Array(4),g=0;g<4;g++){var h=d[g];f[g]=new F(h._point.multiply(c).add(b),h._handleIn.multiply(c),h._handleOut.multiply(c))}return a(f,!0,e)}var c=.5522847498307936,d=[new F([-1,0],[0,c],[0,-c]),new F([0,-1],[-c,0],[c,0]),new F([1,0],[0,-c],[0,c]),new F([0,1],[c,0],[-c,0])];return{Line:function(){return a([new F(o.readNamed(arguments,"from")),new F(o.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var a=o.readNamed(arguments,"center"),c=h.readNamed(arguments,"radius");return b(a,new q(c),arguments)},Rectangle:function(){var b,d=s.readNamed(arguments,"rectangle"),e=q.readNamed(arguments,"radius",0,{readNull:!0}),f=d.getBottomLeft(!0),g=d.getTopLeft(!0),h=d.getTopRight(!0),i=d.getBottomRight(!0);if(!e||e.isZero())b=[new F(f),new F(g),new F(h),new F(i)];else{e=q.min(e,d.getSize(!0).divide(2));var j=e.width,k=e.height,l=j*c,m=k*c;b=[new F(f.add(j,0),null,[-l,0]),new F(f.subtract(0,k),[0,m]),new F(g.add(0,k),null,[0,-m]),new F(g.add(j,0),[-l,0],null),new F(h.subtract(j,0),null,[l,0]),new F(h.add(0,k),[0,-m],null),new F(i.subtract(0,k),null,[0,m]),new F(i.subtract(j,0),[l,0])]}return a(b,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var a=A._readEllipse(arguments);return b(a.center,a.radius,arguments)},Oval:"#Ellipse",Arc:function(){var a=o.readNamed(arguments,"from"),b=o.readNamed(arguments,"through"),c=o.readNamed(arguments,"to"),d=h.getNamed(arguments),e=new K(d&&d.insert===!1&&x.NO_INSERT);return e.moveTo(a),e.arcTo(b,c),e.set(d)},RegularPolygon:function(){for(var b=o.readNamed(arguments,"center"),c=h.readNamed(arguments,"sides"),d=h.readNamed(arguments,"radius"),e=360/c,f=c%3===0,g=new o(0,f?-d:d),i=f?-1:.5,j=new Array(c),k=0;k<c;k++)j[k]=new F(b.add(g.rotate((k+i)*e)));return a(j,!0,arguments)},Star:function(){for(var b=o.readNamed(arguments,"center"),c=2*h.readNamed(arguments,"points"),d=h.readNamed(arguments,"radius1"),e=h.readNamed(arguments,"radius2"),f=360/c,g=new o(0,(-1)),i=new Array(c),j=0;j<c;j++)i[j]=new F(b.add(g.rotate(f*j).multiply(j%2?e:d)));return a(i,!0,arguments)}}}});var L=J.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(a){this._children=[],this._namedChildren={},this._initialize(a)||("string"==typeof a?this.setPathData(a):this.addChildren(Array.isArray(a)?a:arguments))},insertChildren:function va(a,b,c){for(var d=b.length-1;d>=0;d--){var f=b[d];f instanceof L&&(b=b.slice(),b.splice.apply(b,[d,1].concat(f.removeChildren())),f.remove())}b=va.base.call(this,a,b,c,K);for(var d=0,g=!c&&b&&b.length;d<g;d++){var f=b[d];f._clockwise===e&&f.setClockwise(0===f._index)}return b},reduce:function wa(a){for(var b=this._children,c=b.length-1;c>=0;c--){var d=b[c].reduce(a);d.isEmpty()&&d.remove()}if(0===b.length){var d=new K(x.NO_INSERT);return d.copyAttributes(this),d.insertAbove(this),this.remove(),d}return wa.base.call(this)},isClockwise:function(){var a=this.getFirstChild();return a&&a.isClockwise()},setClockwise:function(a){this.isClockwise()^!!a&&this.reverse()},getFirstSegment:function(){var a=this.getFirstChild();return a&&a.getFirstSegment()},getLastSegment:function(){var a=this.getLastChild();return a&&a.getLastSegment()},getCurves:function(){for(var a=this._children,b=[],c=0,d=a.length;c<d;c++)b.push.apply(b,a[c].getCurves());return b},getFirstCurve:function(){var a=this.getFirstChild();return a&&a.getFirstCurve()},getLastCurve:function(){var a=this.getLastChild();return a&&a.getFirstCurve()},getArea:function(){for(var a=this._children,b=0,c=0,d=a.length;c<d;c++)b+=a[c].getArea();return b}},{beans:!0,getPathData:function(a,b){for(var c=this._children,d=[],e=0,f=c.length;e<f;e++){var g=c[e],h=g._matrix;d.push(g.getPathData(a&&!h.isIdentity()?a.appended(h):a,b))}return d.join(" ")}},{_hitTestChildren:function xa(a,b,c){return xa.base.call(this,a,b["class"]===K||"path"===b.type?b:h.set({},b,{fill:!1}),c)},_draw:function(a,b,c,d){var e=this._children;if(0!==e.length){b=b.extend({dontStart:!0,dontFinish:!0}),a.beginPath();for(var f=0,g=e.length;f<g;f++)e[f].draw(a,b,d);if(!b.clip){this._setStyles(a,b,c);var h=this._style;h.hasFill()&&(a.fill(h.getFillRule()),a.shadowColor="rgba(0,0,0,0)"),h.hasStroke()&&a.stroke()}}},_drawSelected:function(a,b,c){for(var d=this._children,e=0,f=d.length;e<f;e++){var g=d[e],h=g._matrix;c[g._id]||g._drawSelected(a,h.isIdentity()?b:b.appended(h))}}},new function(){function a(a,b){var c=a._children;if(b&&0===c.length)throw new Error("Use a moveTo() command first");return c[c.length-1]}return h.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(b){this[b]=function(){var c=a(this,!0);c[b].apply(c,arguments)}},{moveTo:function(){var b=a(this),c=b&&b.isEmpty()?b:new K(x.NO_INSERT);c!==b&&this.addChild(c),c.moveTo.apply(c,arguments)},moveBy:function(){var b=a(this,!0),c=b&&b.getLastSegment(),d=o.read(arguments);this.moveTo(c?d.add(c._point):d)},closePath:function(b){a(this,!0).closePath(b)}})},h.each(["reverse","flatten","simplify","smooth"],function(a){this[a]=function(b){for(var c,d=this._children,e=0,f=d.length;e<f;e++)c=d[e][a](b)||c;return c}},{}));J.inject(new function(){function a(a,b){var c=a.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return b?c.resolveCrossings():c}function b(a,b,c,d,e){var f=new a(x.NO_INSERT);return f.addChildren(b,!0),c&&(f=f.reduce({simplify:!0})),f.insertAbove(e&&d.isSibling(e)&&d.getIndex()<e.getIndex()?e:d),f.copyAttributes(d,!0),f}function c(c,e,g){function h(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];p.push.apply(p,d._segments),q.push.apply(q,d._getMonoCurves()),d._overlapsOnly=d._validOverlapsOnly=!0}}var l=k[g];if(l[g]=!0,!c._children&&!c._closed)return d(c,e,l);var m=a(c,!0),n=e&&c!==e&&a(e,!0);n&&(l.subtract||l.exclude)^(n.isClockwise()^m.isClockwise())&&n.reverse();var o=f(I.expand(m.getCrossings(n))),p=[],q=[];h(m._children||[m]),n&&h(n._children||[n]);for(var r=0,s=o.length;r<s;r++)i(o[r]._segment,m,n,q,l);for(var r=0,s=p.length;r<s;r++){var t=p[r],u=t._intersection;if(null==t._winding&&i(t,m,n,q,l),!u||!u._overlap){var v=t._path;v._overlapsOnly=!1,l[t._winding]&&(v._validOverlapsOnly=!1)}}return b(L,j(p,l),!0,c,e)}function d(c,d,e){function f(a){if(h.contains(a.getPointAt(a.getLength()/2))^j)return k.unshift(a),!0}if(!d||!d._children&&!d._closed||!e.subtract&&!e.intersect)return null;for(var g=a(c,!1),h=a(d,!1),i=g.getCrossings(h),j=e.subtract,k=[],l=i.length-1;l>=0;l--){var m=i[l].split();m&&(f(m)&&m.getFirstSegment().setHandleIn(0,0),g.getLastSegment().setHandleOut(0,0))}return f(g),b(y,k,!1,c,d)}function e(a,b){for(var c=a;c;){if(c===b)return;c=c._previous}for(;a._next&&a._next!==b;)a=a._next;if(!a._next){for(;b._previous;)b=b._previous;a._next=b,b._previous=a}}function f(a,b){for(var c,d,f=b&&[],g=4e-7,h=1-g,i=!1,j=[],k=a.length-1;k>=0;k--){var l=a[k];if(b){if(!b(l))continue;f.unshift(l)}var m,n=l._curve,o=l._time,p=o;if(n!==c?i=!n.hasHandles():d>=g&&d<=h&&(o/=d),o<g)m=n._segment1;else if(o>h)m=n._segment2;else{var q=n.divideAtTime(o,!0);i&&j.push(n,q),m=q._segment1}l._setSegment(m);var r=m._intersection,s=l._intersection;if(r){e(r,s);for(var t=r;t;)e(t._intersection,r),t=t._next}else m._intersection=s;c=n,d=p}for(var k=0,u=j.length;k<u;k++)j[k].clearHandles();return f||a}function g(a,b,c){var d=2e-7,e=a.x,f=a.y,h=0,i=0,j=b.length,k=[],l=Math.abs;if(c){for(var m=-(1/0),n=1/0,p=f-d,q=f+d,r=0;r<j;r++)for(var s=b[r].values,t=H.solveCubic(s,0,e,k,0,1),u=t-1;u>=0;u--){var v=H.getPoint(s,k[u]).y;v<p&&v>m?m=v:v>q&&v<n&&(n=v)}m=(m+f)/2,n=(n+f)/2,m>-(1/0)&&(h=g(new o(e,m),b).winding),n<1/0&&(i=g(new o(e,n),b).winding)}else{for(var w,x,y=e-d,z=e+d,A=0,B=0,C=!1,r=0;r<j;r++){var D=b[r],E=D.winding,s=D.values,F=s[1],G=s[7];if(D.last&&(w=D.last.winding,x=D.last.values[6],C=!1),f>=F&&f<=G||f>=G&&f<=F)if(E){var I=f===F?s[0]:f===G?s[6]:1===H.solveCubic(s,1,f,k,0,1)?H.getPoint(s,k[0]).x:null;null!=I&&(I>=y&&I<=z?C=!0:f===F&&E===w||f===F&&(e-I)*(e-x)<0||(I<y?h+=E:I>z&&(i+=E))),w=E,x=s[6]}else(e-s[0])*(e-s[6])<=0&&(C=!0);C&&(r>=j-1||b[r+1].last)&&(A+=1,B-=1)}0===h&&0===i&&(h=A,i=B)}return{winding:Math.max(l(h),l(i)),contour:!h^!i}}function i(a,b,c,d,e){var f,h=[],i=a,j=0;do{var k=a.getCurve(),l=k.getLength();h.push({segment:a,curve:k,length:l}),j+=l,a=a.getNext()}while(a&&!a._intersection&&a!==i);for(var l=j/2,m=0,n=h.length;m<n;m++){var o=h[m],p=o.length;if(l<=p){var k=o.curve,q=k._path,r=q._parent,s=k.getTimeAt(l),t=k.getPointAtTime(s),u=Math.abs(k.getTangentAtTime(s).y)<1e-7;r instanceof L&&(q=r),f=e.subtract&&c&&(q===b&&c._getWinding(t,u)||q===c&&!b._getWinding(t,u))?{winding:0}:g(t,d,u);break}l-=p}for(var m=h.length-1;m>=0;m--){var v=h[m].segment;v._winding=f.winding,v._contour=f.contour}}function j(a,b){function c(a,c){return!(!a||a._visited||!(!b||b[a._winding]||!c&&b.unite&&a._contour))}function d(a){return a===f||a===g}function e(a,e){if(!a._next)return a;for(;a;){var f=a._segment,g=f.getNext(),h=g&&g._intersection;if(f!==e&&(d(f)||d(g)||!f._visited&&!g._visited&&(!b||c(f)&&(c(g)||h&&c(h._segment)))))return a;a=a._next}return null}for(var f,g,i=[],j=0,k=a.length;j<k;j++){var l,n=null,o=!1,p=a[j],q=p._intersection;if(!p._visited&&p._path._overlapsOnly){var r=p._path,s=q._segment._path,t=r._segments,u=s._segments;if(h.equals(t,u)){(b.unite||b.intersect)&&r.getArea()&&i.push(r.clone(!1));for(var v=0,w=t.length;v<w;v++)t[v]._visited=u[v]._visited=!0}}if(c(p,!0)&&(p._path._validOverlapsOnly||!q||!q._overlap)){for(f=g=null;;){q=q&&e(q,p)||q;var y=q&&q._segment;if(d(p)?o=!0:y&&(d(y)?(o=!0,p=y):c(y,c(p,!0))&&(b&&(b.intersect||b.subtract)&&(p._visited=!0),p=y)),o||p._visited){p._visited=!0;break}if(p._path._validOverlapsOnly&&!c(p))break;n||(n=new K(x.NO_INSERT),f=p,g=y);var z=p.getNext();n.add(new F(p._point,l,z&&p._handleOut)),p._visited=!0,p=z||p._path.getFirstSegment(),l=z&&z._handleIn,q=p._intersection}if(o)n.firstSegment.setHandleIn(l),n.setClosed(!0);else if(n){var A=n.getArea(!0);Math.abs(A)>=2e-7&&console.error("Boolean operation resulted in open path","segments =",n._segments.length,"length =",n.getLength(),"area=",A),n=null}n&&(n._segments.length>8||!m.isZero(n.getArea()))&&(i.push(n),n=null)}}return i}var k={unite:{1:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0}};return{_getWinding:function(a,b){return g(a,this._getMonoCurves(),b).winding},unite:function(a){return c(this,a,"unite")},intersect:function(a){return c(this,a,"intersect")},subtract:function(a){return c(this,a,"subtract")},exclude:function(a){return c(this,a,"exclude")},divide:function(a){return b(y,[this.subtract(a),this.intersect(a)],!0,this,a)},resolveCrossings:function(){function a(a){var b=a&&a._intersection;return b&&b._overlap}var b=this._children,c=b||[this],d=!1,e=!1,g=this.getIntersections(null,function(a){return a._overlap&&(d=!0)||a.isCrossing()&&(e=!0)});if(g=I.expand(g),d)for(var i=f(g,function(a){return a._overlap}),k=i.length-1;k>=0;k--){var l=i[k]._segment,m=l.getPrevious(),n=l.getNext();if(l._path&&a(m)&&a(n)){l.remove(),m._handleOut.set(0,0),n._handleIn.set(0,0);var o=m.getCurve();o.isStraight()&&0===o.getLength()&&m.remove()}}e&&(f(g,d&&function(a){var b=a.getCurve(),c=a._intersection._curve,d=a._segment;return!!(b&&c&&b._path&&c._path)||void(d&&(d._intersection=null))}),c=j(h.each(c,function(a){this.push.apply(this,a._segments)},[])));var p,q=c.length;if(q>1){c=c.slice().sort(function(a,b){return b.getBounds().getArea()-a.getBounds().getArea()});for(var r=c[0],s=[r],t={},u="nonzero"===this.getFillRule(),v=u&&h.each(c,function(a){this.push(a.isClockwise()?1:-1)},[]),k=1;k<q;k++){for(var w=c[k],y=w.getInteriorPoint(),z=!1,A=null,B=!1,C=k-1;C>=0&&!A;C--)if(c[C].contains(y)){if(u&&!z&&(v[k]+=v[C],v[k]&&v[C])){B=t[k]=!0;break}z=!0,A=!t[C]&&c[C]}B||(w.setClockwise(A?!A.isClockwise():r.isClockwise()),s.push(w))}c=s,q=s.length}return q>1&&b?(c!==b&&this.setChildren(c,!0),p=this):1!==q||b||(c[0]!==this&&this.setSegments(c[0].removeSegments()),p=this),p||(p=new L(x.NO_INSERT),p.addChildren(c,!0),p=p.reduce(),p.copyAttributes(this),this.replaceWith(p)),p}}}),K.inject({_getMonoCurves:function(){function a(a){var b=a[1],e=a[7],f=Math.abs((b-e)/(a[0]-a[6]))<2e-7?0:b>e?-1:1,g={values:a,winding:f};d.push(g),f&&(c=g)}function b(b){if(0!==H.getLength(b)){var c=b[1],d=b[3],e=b[5],f=b[7];if(H.isStraight(b)||c>=d==d>=e&&d>=e==e>=f)a(b);else{var g=3*(d-e)-c+f,h=2*(c+e)-4*d,i=d-c,j=4e-7,k=1-j,l=[],n=m.solveQuadratic(g,h,i,l,j,k);if(n<1)a(b);else{l.sort();var o=l[0],p=H.subdivide(b,o);a(p[0]),n>1&&(o=(l[1]-o)/(1-o),p=H.subdivide(p[1],o),a(p[0])),a(p[1])}}}}var c,d=this._monoCurves;if(!d){d=this._monoCurves=[];for(var e=this.getCurves(),f=this._segments,g=0,h=e.length;g<h;g++)b(e[g].getValues());if(!this._closed&&f.length>1){var i=f[f.length-1]._point,j=f[0]._point,k=i._x,l=i._y,n=j._x,o=j._y;b([k,l,k,l,n,o,n,o])}d.length>0&&(d[0].last=c)}return d},getInteriorPoint:function(){var a=this.getBounds(),b=a.getCenter(!0);if(!this.contains(b)){for(var c=this._getMonoCurves(),d=[],e=b.y,f=[],g=0,h=c.length;g<h;g++){var i=c[g].values;if(1===c[g].winding&&e>i[1]&&e<=i[7]||e>=i[7]&&e<i[1])for(var j=H.solveCubic(i,1,e,d,0,1),k=j-1;k>=0;k--)f.push(H.getPoint(i,d[k]).x)}f.sort(function(a,b){return a-b}),b.x=(f[0]+f[1])/2}return b}}),L.inject({_getMonoCurves:function(){for(var a=this._children,b=[],c=0,d=a.length;c<d;c++)b.push.apply(b,a[c]._getMonoCurves());return b}});var M=h.extend({_class:"PathIterator",initialize:function(a,b,c,d,e){function f(a,b){var c=H.getValues(a,b,e);i.push(c),g(c,a._index,0,1)}function g(a,c,e,f){if(!(f-e>l)||d&&H.isStraight(a)||H.isFlatEnough(a,b||.25)){var h=a[6]-a[0],i=a[7]-a[1],m=Math.sqrt(h*h+i*i);m>0&&(k+=m,j.push({offset:k,curve:a,index:c,time:f}))}else{var n=H.subdivide(a,.5),o=(e+f)/2;g(n[0],c,e,o),g(n[1],c,o,f)}}for(var h,i=[],j=[],k=0,l=1/(c||32),m=a._segments,n=m[0],o=1,p=m.length;o<p;o++)h=m[o],f(n,h),n=h;a._closed&&f(h,m[0]),this.curves=i,this.parts=j,this.length=k,this.index=0},_get:function(a){for(var b,c=this.index;b=c,!(0===c||this.parts[--c].offset<a););for(var d=this.parts.length;b<d;b++){var e=this.parts[b];if(e.offset>=a){this.index=b;var f=this.parts[b-1],g=f&&f.index===e.index?f.time:0,h=f?f.offset:0;return{index:e.index,time:g+(e.time-g)*(a-h)/(e.offset-h)}}}var e=this.parts[this.parts.length-1];return{index:e.index,time:1}},drawPart:function(a,b,c){for(var d=this._get(b),e=this._get(c),f=d.index,g=e.index;f<=g;f++){var h=H.getPart(this.curves[f],f===d.index?d.time:0,f===e.index?e.time:1);f===d.index&&a.moveTo(h[0],h[1]),a.bezierCurveTo.apply(a,h.slice(2))}}},h.each(H._evaluateMethods,function(a){this[a+"At"]=function(b){var c=this._get(b);return H[a](this.curves[c.index],c.time)}},{})),N=h.extend({initialize:function(a){for(var b,c=this.points=[],d=a._segments,e=a._closed,f=0,g=d.length;f<g;f++){var h=d[f].point;b&&b.equals(h)||c.push(b=h.clone())}e&&(c.unshift(c[c.length-1]),c.push(c[1])),this.closed=e},fit:function(a){var b=this.points,c=b.length,d=null;return c>0&&(d=[new F(b[0])],c>1&&(this.fitCubic(d,a,0,c-1,b[1].subtract(b[0]),b[c-2].subtract(b[c-1])),this.closed&&(d.shift(),d.pop()))),d},fitCubic:function(a,b,c,d,e,f){var g=this.points;if(d-c===1){var h=g[c],i=g[d],j=h.getDistance(i)/3;return void this.addCurve(a,[h,h.add(e.normalize(j)),i.add(f.normalize(j)),i])}for(var k,l=this.chordLengthParameterize(c,d),m=Math.max(b,b*b),n=!0,o=0;o<=4;o++){var p=this.generateBezier(c,d,l,e,f),q=this.findMaxError(c,d,p,l);if(q.error<b&&n)return void this.addCurve(a,p);if(k=q.index,q.error>=m)break;n=this.reparameterize(c,d,l,p),m=q.error}var r=g[k-1].subtract(g[k+1]);this.fitCubic(a,b,c,k,e,r),this.fitCubic(a,b,k,d,r.negate(),f)},addCurve:function(a,b){var c=a[a.length-1];c.setHandleOut(b[1].subtract(b[0])),a.push(new F(b[3],b[2].subtract(b[3])))},generateBezier:function(a,b,c,d,e){for(var f=1e-12,g=Math.abs,h=this.points,i=h[a],j=h[b],k=[[0,0],[0,0]],l=[0,0],m=0,n=b-a+1;m<n;m++){var o=c[m],p=1-o,q=3*o*p,r=p*p*p,s=q*p,t=q*o,u=o*o*o,v=d.normalize(s),w=e.normalize(t),x=h[a+m].subtract(i.multiply(r+s)).subtract(j.multiply(t+u));k[0][0]+=v.dot(v),k[0][1]+=v.dot(w),k[1][0]=k[0][1],k[1][1]+=w.dot(w),l[0]+=v.dot(x),l[1]+=w.dot(x)}var y,z,A=k[0][0]*k[1][1]-k[1][0]*k[0][1];if(g(A)>f){var B=k[0][0]*l[1]-k[1][0]*l[0],C=l[0]*k[1][1]-l[1]*k[0][1];y=C/A,z=B/A}else{var D=k[0][0]+k[0][1],E=k[1][0]+k[1][1];y=z=g(D)>f?l[0]/D:g(E)>f?l[1]/E:0}var F,G,H=j.getDistance(i),I=f*H;if(y<I||z<I)y=z=H/3;else{var J=j.subtract(i);F=d.normalize(y),G=e.normalize(z),F.dot(J)-G.dot(J)>H*H&&(y=z=H/3,F=G=null)}return[i,i.add(F||d.normalize(y)),j.add(G||e.normalize(z)),j]},reparameterize:function(a,b,c,d){for(var e=a;e<=b;e++)c[e-a]=this.findRoot(d,this.points[e],c[e-a]);for(var e=1,f=c.length;e<f;e++)if(c[e]<=c[e-1])return!1;return!0},findRoot:function(a,b,c){for(var d=[],e=[],f=0;f<=2;f++)d[f]=a[f+1].subtract(a[f]).multiply(3);for(var f=0;f<=1;f++)e[f]=d[f+1].subtract(d[f]).multiply(2);var g=this.evaluate(3,a,c),h=this.evaluate(2,d,c),i=this.evaluate(1,e,c),j=g.subtract(b),k=h.dot(h)+j.dot(i);return Math.abs(k)<1e-6?c:c-j.dot(h)/k},evaluate:function(a,b,c){for(var d=b.slice(),e=1;e<=a;e++)for(var f=0;f<=a-e;f++)d[f]=d[f].multiply(1-c).add(d[f+1].multiply(c));return d[0]},chordLengthParameterize:function(a,b){for(var c=[0],d=a+1;d<=b;d++)c[d-a]=c[d-a-1]+this.points[d].getDistance(this.points[d-1]);for(var d=1,e=b-a;d<=e;d++)c[d]/=c[e];return c},findMaxError:function(a,b,c,d){for(var e=Math.floor((b-a+1)/2),f=0,g=a+1;g<b;g++){var h=this.evaluate(3,c,d[g-a]),i=h.subtract(this.points[g]),j=i.x*i.x+i.y*i.y;j>=f&&(f=j,e=g)}return{error:f,index:e}}}),O=x.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(a){this._content="",this._lines=[];var b=a&&h.isPlainObject(a)&&a.x===e&&a.y===e;this._initialize(b&&a,!b&&o.read(arguments))},_equals:function(a){return this._content===a._content},copyContent:function(a){this.setContent(a._content)},getContent:function(){return this._content},setContent:function(a){this._content=""+a,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),P=O.extend({_class:"PointText",initialize:function(){O.apply(this,arguments)},getPoint:function(){var a=this._matrix.getTranslation();return new p(a.x,a.y,this,"setPoint")},setPoint:function(){var a=o.read(arguments);this.translate(a.subtract(this._matrix.getTranslation()))},_draw:function(a,b,c){if(this._content){this._setStyles(a,b,c);var d=this._lines,e=this._style,f=e.hasFill(),g=e.hasStroke(),h=e.getLeading(),i=a.shadowColor;a.font=e.getFontStyle(),a.textAlign=e.getJustification();for(var j=0,k=d.length;j<k;j++){a.shadowColor=i;var l=d[j];f&&(a.fillText(l,0,0),a.shadowColor="rgba(0,0,0,0)"),g&&a.strokeText(l,0,0),a.translate(0,h)}}},_getBounds:function(a,b){var c=this._style,d=this._lines,e=d.length,f=c.getJustification(),g=c.getLeading(),h=this.getView().getTextWidth(c.getFontStyle(),d),i=0;"left"!==f&&(i-=h/("center"===f?2:1));var j=new s(i,e?-.75*g:0,h,e*g);return a?a._transformBounds(j,j):j}}),Q=h.extend(new function(){function a(a){var c,d=a.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(d){c=[0,0,0];for(var g=0;g<3;g++){var h=d[g+1];c[g]=parseInt(1==h.length?h+h:h,16)/255}}else if(d=a.match(/^rgba?\((.*)\)$/)){c=d[1].split(",");for(var g=0,i=c.length;g<i;g++){var h=+c[g];c[g]=g<3?h/255:h}}else if(f){var j=e[a];if(!j){b||(b=da.getContext(1,1),b.globalCompositeOperation="copy"),b.fillStyle="rgba(0,0,0,0)",b.fillStyle=a,b.fillRect(0,0,1,1);var k=b.getImageData(0,0,1,1).data;j=e[a]=[k[0]/255,k[1]/255,k[2]/255]}c=j.slice()}else c=[0,0,0];return c}var b,c={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},d={},e={},g=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],i={"rgb-hsb":function(a,b,c){var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=0===f?0:60*(d==a?(b-c)/f+(b<c?6:0):d==b?(c-a)/f+2:(a-b)/f+4);return[g,0===d?0:f/d,d]},"hsb-rgb":function(a,b,c){a=(a/60%6+6)%6;var d=Math.floor(a),e=a-d,d=g[d],f=[c,c*(1-b),c*(1-b*e),c*(1-b*(1-e))];return[f[d[0]],f[d[1]],f[d[2]]]},"rgb-hsl":function(a,b,c){var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=0===f,h=g?0:60*(d==a?(b-c)/f+(b<c?6:0):d==b?(c-a)/f+2:(a-b)/f+4),i=(d+e)/2,j=g?0:i<.5?f/(d+e):f/(2-d-e);return[h,j,i]},"hsl-rgb":function(a,b,c){if(a=(a/360%1+1)%1,0===b)return[c,c,c];for(var d=[a+1/3,a,a-1/3],e=c<.5?c*(1+b):c+b-c*b,f=2*c-e,g=[],h=0;h<3;h++){var i=d[h];i<0&&(i+=1),i>1&&(i-=1),g[h]=6*i<1?f+6*(e-f)*i:2*i<1?e:3*i<2?f+(e-f)*(2/3-i)*6:f}return g},"rgb-gray":function(a,b,c){return[.2989*a+.587*b+.114*c]},"gray-rgb":function(a){return[a,a,a]},"gray-hsb":function(a){return[0,0,a]},"gray-hsl":function(a){return[0,0,a]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return h.each(c,function(a,b){d[b]=[],h.each(a,function(a,e){var f=h.capitalize(a),g=/^(hue|saturation)$/.test(a),i=d[b][e]="gradient"===a?function(a){var b=this._components[0];return a=R.read(Array.isArray(a)?a:arguments,0,{readNull:!0}),b!==a&&(b&&b._removeOwner(this),a&&a._addOwner(this)),a}:"gradient"===b?function(){return o.read(arguments,0,{readNull:"highlight"===a,clone:!0})}:function(a){return null==a||isNaN(a)?0:a};this["get"+f]=function(){return this._type===b||g&&/^hs[bl]$/.test(this._type)?this._components[e]:this._convert(b)[e]},this["set"+f]=function(a){this._type===b||g&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(b),this._properties=c[b],this._type=b),this._components[e]=i.call(this,a),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function j(b){var e,f,g,h,i=Array.prototype.slice,k=arguments,l=this.__read,m=0;Array.isArray(b)&&(k=b,b=k[0]);var n=null!=b&&typeof b;if("string"===n&&b in c&&(e=b,b=k[1],Array.isArray(b)?(f=b,g=k[2]):(l&&(m=1),k=i.call(k,1),n=typeof b)),!f){if(h="number"===n?k:"object"===n&&null!=b.length?b:null){e||(e=h.length>=3?"rgb":"gray");var o=c[e].length;g=h[o],l&&(m+=h===arguments?o+(null!=g?1:0):1),h.length>o&&(h=i.call(h,0,o))}else if("string"===n)e="rgb",f=a(b),4===f.length&&(g=f[3],f.length--);else if("object"===n)if(b.constructor===j){if(e=b._type,f=b._components.slice(),g=b._alpha,"gradient"===e)for(var p=1,q=f.length;p<q;p++){var r=f[p];r&&(f[p]=r.clone())}}else if(b.constructor===R)e="gradient",h=k;else{e="hue"in b?"lightness"in b?"hsl":"hsb":"gradient"in b||"stops"in b||"radial"in b?"gradient":"gray"in b?"gray":"rgb";var s=c[e],t=d[e];this._components=f=[];for(var p=0,q=s.length;p<q;p++){var u=b[s[p]];null==u&&0===p&&"gradient"===e&&"stops"in b&&(u={stops:b.stops,radial:b.radial}),u=t[p].call(this,u),null!=u&&(f[p]=u)}g=b.alpha}l&&e&&(m=1)}if(this._type=e||"rgb",!f){this._components=f=[];for(var t=d[this._type],p=0,q=t.length;p<q;p++){var u=t[p].call(this,h&&h[p]);null!=u&&(f[p]=u)}}this._components=f,this._properties=c[this._type],this._alpha=g,l&&(this.__read=m)},_set:"#initialize",_serialize:function(a,b){var c=this.getComponents();return h.serialize(/^(gray|rgb)$/.test(this._type)?c:[this._type].concat(c),a,!0,b)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(a){var b;return this._type===a?this._components.slice():(b=i[this._type+"-"+a])?b.apply(this,this._components):i["rgb-"+a].apply(this,i[this._type+"-rgb"].apply(this,this._components))},convert:function(a){return new Q(a,this._convert(a),this._alpha)},getType:function(){return this._type},setType:function(a){this._components=this._convert(a),this._properties=c[a],this._type=a},getComponents:function(){var a=this._components.slice();return null!=this._alpha&&a.push(this._alpha),a},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(a){this._alpha=null==a?null:Math.min(Math.max(a,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(a){var b=h.isPlainValue(a,!0)?Q.read(arguments):a;return b===this||b&&this._class===b._class&&this._type===b._type&&this._alpha===b._alpha&&h.equals(this._components,b._components)||!1},toString:function(){for(var a=this._properties,b=[],c="gradient"===this._type,d=l.instance,e=0,f=a.length;e<f;e++){var g=this._components[e];null!=g&&b.push(a[e]+": "+(c?g:d.number(g)))}return null!=this._alpha&&b.push("alpha: "+d.number(this._alpha)),"{ "+b.join(", ")+" }"},toCSS:function(a){function b(a){return Math.round(255*(a<0?0:a>1?1:a))}var c=this._convert("rgb"),d=a||null==this._alpha?1:this._alpha;return c=[b(c[0]),b(c[1]),b(c[2])],d<1&&c.push(d<0?0:d),a?"#"+((1<<24)+(c[0]<<16)+(c[1]<<8)+c[2]).toString(16).slice(1):(4==c.length?"rgba(":"rgb(")+c.join(",")+")"},toCanvasStyle:function(a){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var b,c=this._components,d=c[0],e=d._stops,f=c[1],g=c[2];if(d._radial){var h=g.getDistance(f),i=c[3];if(i){var j=i.subtract(f);j.getLength()>h&&(i=f.add(j.normalize(h-.1)))}var k=i||f;b=a.createRadialGradient(k.x,k.y,0,f.x,f.y,h)}else b=a.createLinearGradient(f.x,f.y,g.x,g.y);for(var l=0,m=e.length;l<m;l++){var n=e[l];b.addColorStop(n._offset||l/(m-1),n._color.toCanvasStyle())}return this._canvasStyle=b},transform:function(a){if("gradient"===this._type){for(var b=this._components,c=1,d=b.length;c<d;c++){var e=b[c];a._transformPoint(e,e,!0)}this._changed()}},statics:{_types:c,random:function(){var a=Math.random;return new Q(a(),a(),a())}}})},new function(){var a={add:function(a,b){return a+b},subtract:function(a,b){return a-b},multiply:function(a,b){return a*b},divide:function(a,b){return a/b}};return h.each(a,function(a,b){this[b]=function(b){b=Q.read(arguments);for(var c=this._type,d=this._components,e=b._convert(c),f=0,g=d.length;f<g;f++)e[f]=a(d[f],e[f]);return new Q(c,e,null!=this._alpha?a(this._alpha,b.getAlpha()):null)}},{})}),R=h.extend({_class:"Gradient",initialize:function(a,b){this._id=n.get(),a&&this._set(a)&&(a=b=null),this._stops||this.setStops(a||["white","black"]),null==this._radial&&this.setRadial("string"==typeof b&&"radial"===b||b||!1)},_serialize:function(a,b){return b.add(this,function(){return h.serialize([this._stops,this._radial],a,!0,b)})},_changed:function(){for(var a=0,b=this._owners&&this._owners.length;a<b;a++)this._owners[a]._changed()},_addOwner:function(a){this._owners||(this._owners=[]),this._owners.push(a)},_removeOwner:function(a){var b=this._owners?this._owners.indexOf(a):-1;b!=-1&&(this._owners.splice(b,1),0===this._owners.length&&(this._owners=e))},clone:function(){for(var a=[],b=0,c=this._stops.length;b<c;b++)a[b]=this._stops[b].clone();return new R(a,this._radial)},getStops:function(){return this._stops},setStops:function(a){if(a.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var b=this._stops;if(b)for(var c=0,d=b.length;c<d;c++)b[c]._owner=e;b=this._stops=S.readAll(a,0,{clone:!0});for(var c=0,d=b.length;c<d;c++)b[c]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(a){this._radial=a,this._changed()},equals:function(a){if(a===this)return!0;if(a&&this._class===a._class){var b=this._stops,c=a._stops,d=b.length;if(d===c.length){for(var e=0;e<d;e++)if(!b[e].equals(c[e]))return!1;return!0}}return!1}}),S=h.extend({_class:"GradientStop",initialize:function(a,b){var c=a,d=b;"object"==typeof a&&b===e&&(Array.isArray(a)&&"number"!=typeof a[0]?(c=a[0],d=a[1]):("color"in a||"offset"in a||"rampPoint"in a)&&(c=a.color,d=a.offset||a.rampPoint||0)),this.setColor(c),this.setOffset(d)},clone:function(){return new S(this._color.clone(),this._offset)},_serialize:function(a,b){var c=this._color,d=this._offset;return h.serialize(null==d?[c]:[c,d],a,!0,b)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(a){this._offset=a,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var a=Q.read(arguments,0,{clone:!0});a&&(a._owner=this),this._color=a,this._changed()},equals:function(a){return a===this||a&&this._class===a._class&&this._color.equals(a._color)&&this._offset==a._offset||!1}}),T=h.extend(new function(){var a={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new o,selectedColor:null},b=h.set({},a,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),c=h.set({},b,{fillColor:new Q}),f={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},g={beans:!0},i={_class:"Style",beans:!0,initialize:function(e,f,g){this._values={},this._owner=f,this._project=f&&f._project||g||d.project,this._defaults=!f||f instanceof y?b:f instanceof O?c:a,e&&this.set(e)}};return h.each(b,function(a,b){var c=/Color$/.test(b),d="shadowOffset"===b,j=h.capitalize(b),k=f[b],l="set"+j,m="get"+j;i[l]=function(a){var d=this._owner,f=d&&d._children;if(f&&f.length>0&&!(d instanceof L))for(var g=0,h=f.length;g<h;g++)f[g]._style[l](a);else if(b in this._defaults){var i=this._values[b];i!==a&&(c&&(i&&i._owner!==e&&(i._owner=e),a&&a.constructor===Q&&(a._owner&&(a=a.clone()),a._owner=d)),this._values[b]=a,d&&d._changed(k||65))}},i[m]=function(a){var f,g=this._owner,i=g&&g._children;if(b in this._defaults&&(!i||0===i.length||a||g instanceof L)){var f=this._values[b];if(f===e)f=this._defaults[b],f&&f.clone&&(f=f.clone());else{var j=c?Q:d?o:null;!j||f&&f.constructor===j||(this._values[b]=f=j.read([f],0,{readNull:!0,clone:!0}),f&&c&&(f._owner=g));
}}else if(i)for(var k=0,l=i.length;k<l;k++){var n=i[k]._style[m]();if(0===k)f=n;else if(!h.equals(f,n))return e}return f},g[m]=function(a){return this._style[m](a)},g[l]=function(a){this._style[l](a)}}),h.each({Font:"FontFamily",WindingRule:"FillRule"},function(a,b){var c="get"+b,d="set"+b;i[c]=g[c]="#get"+a,i[d]=g[d]="#set"+a}),x.inject(g),i},{set:function(a){var b=a instanceof T,c=b?a._values:a;if(c)for(var d in c)if(d in this._defaults){var e=c[d];this[d]=e&&b&&e.clone?e.clone():e}},equals:function(a){return a===this||a&&this._class===a._class&&h.equals(this._values,a._values)||!1},hasFill:function(){var a=this.getFillColor();return!!a&&a.alpha>0},hasStroke:function(){var a=this.getStrokeColor();return!!a&&a.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var a=this.getShadowColor();return!!a&&a.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var a=this.getFontSize();return this.getFontWeight()+" "+a+(/[a-z]/i.test(a+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function ya(){var a=ya.base.call(this),b=this.getFontSize();return/pt|em|%|px/.test(b)&&(b=this.getView().getPixelSize(b)),null!=a?a:1.2*b}}),U=new function(){function a(a,b,c,d){for(var e=["","webkit","moz","Moz","ms","o"],f=b[0].toUpperCase()+b.substring(1),g=0;g<6;g++){var h=e[g],i=h?h+f:b;if(i in a){if(!c)return a[i];a[i]=d;break}}}return{getStyles:function(a){var b=a&&9!==a.nodeType?a.ownerDocument:a,c=b&&b.defaultView;return c&&c.getComputedStyle(a,"")},getBounds:function(a,b){var c,d=a.ownerDocument,e=d.body,f=d.documentElement;try{c=a.getBoundingClientRect()}catch(g){c={left:0,top:0,width:0,height:0}}var h=c.left-(f.clientLeft||e.clientLeft||0),i=c.top-(f.clientTop||e.clientTop||0);if(!b){var j=d.defaultView;h+=j.pageXOffset||f.scrollLeft||e.scrollLeft,i+=j.pageYOffset||f.scrollTop||e.scrollTop}return new s(h,i,c.width,c.height)},getViewportBounds:function(a){var b=a.ownerDocument,c=b.defaultView,d=b.documentElement;return new s(0,0,c.innerWidth||d.clientWidth,c.innerHeight||d.clientHeight)},getOffset:function(a,b){return U.getBounds(a,b).getPoint()},getSize:function(a){return U.getBounds(a,!0).getSize()},isInvisible:function(a){return U.getSize(a).equals(new q(0,0))},isInView:function(a){return!U.isInvisible(a)&&U.getViewportBounds(a).intersects(U.getBounds(a,!0))},isInserted:function(a){return g.body.contains(a)},getPrefixed:function(b,c){return b&&a(b,c)},setPrefixed:function(b,c,d){if("object"==typeof c)for(var e in c)a(b,e,!0,c[e]);else a(b,c,!0,d)}}},V={add:function(a,b){if(a)for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;f<g;f++)a.addEventListener(e[f],d,!1)},remove:function(a,b){if(a)for(var c in b)for(var d=b[c],e=c.split(/[\s,]+/g),f=0,g=e.length;f<g;f++)a.removeEventListener(e[f],d,!1)},getPoint:function(a){var b=a.targetTouches?a.targetTouches.length?a.targetTouches[0]:a.changedTouches[0]:a;return new o(b.pageX||b.clientX+g.documentElement.scrollLeft,b.pageY||b.clientY+g.documentElement.scrollTop)},getTarget:function(a){return a.target||a.srcElement},getRelatedTarget:function(a){return a.relatedTarget||a.toElement},getOffset:function(a,b){return V.getPoint(a).subtract(U.getOffset(b||V.getTarget(a)))}};V.requestAnimationFrame=new function(){function a(){var b=e;e=[];for(var f=0,g=b.length;f<g;f++)b[f]();d=c&&e.length,d&&c(a)}var b,c=U.getPrefixed(f,"requestAnimationFrame"),d=!1,e=[];return function(f){e.push(f),c?d||(c(a),d=!0):b||(b=setInterval(a,1e3/60))}};var W=h.extend(i,{_class:"View",initialize:function za(a,b){function c(a){return b[a]||parseInt(b.getAttribute(a),10)}function e(){var a=U.getSize(b);return a.isNaN()||a.isZero()?new q(c("width"),c("height")):a}var h;if(f&&b){this._id=b.getAttribute("id"),null==this._id&&b.setAttribute("id",this._id="view-"+za._id++),V.add(b,this._viewEvents);var i="none";if(U.setPrefixed(b.style,{userDrag:i,userSelect:i,touchCallout:i,contentZooming:i,tapHighlightColor:"rgba(0,0,0,0)"}),j.hasAttribute(b,"resize")){var k=this;V.add(f,this._windowEvents={resize:function(){k.setViewSize(e())}})}if(h=e(),j.hasAttribute(b,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,m=l.style,n=U.getOffset(b);m.position="absolute",m.left=n.x+"px",m.top=n.y+"px",g.body.appendChild(l)}}else h=new q(b),b=null;this._project=a,this._scope=a._scope,this._element=b,this._pixelRatio||(this._pixelRatio=f&&f.devicePixelRatio||1),this._setElementSize(h.width,h.height),this._viewSize=h,za._views.push(this),za._viewsById[this._id]=this,(this._matrix=new u)._owner=this,this._zoom=1,za._focused||(za._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={"native":{},virtual:{}},this._autoUpdate=!d.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;W._focused===this&&(W._focused=null),W._views.splice(W._views.indexOf(this),1),delete W._viewsById[this._id];var a=this._project;return a._view===this&&(a._view=null),V.remove(this._element,this._viewEvents),V.remove(f,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:h.each(x._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(a){this[a]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(a){this._autoUpdate=a,a&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var a=this;V.requestAnimationFrame(function(){if(a._requested=!1,a._animate){a.requestUpdate();var b=a._element;U.getPrefixed(g,"hidden")&&"true"!==j.getAttribute(b,"keepalive")||!U.isInView(b)||a._handleFrame()}a._autoUpdate&&a.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){d=this._scope;var a=Date.now()/1e3,b=this._last?a-this._last:0;this._last=a,this.emit("frame",new h({delta:b,time:this._time+=b,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(a,b){var c=this._frameItems;b?(c[a._id]={item:a,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete c[a._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(a){for(var b in this._frameItems){var c=this._frameItems[b];c.item.emit("frame",new h(a,{time:c.time+=a.delta,count:c.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=null},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var a=this._viewSize;return new r(a.width,a.height,this,"setViewSize")},setViewSize:function(){var a=q.read(arguments),b=a.width,c=a.height,d=a.subtract(this._viewSize);d.isZero()||(this._setElementSize(b,c),this._viewSize.set(b,c),this.emit("resize",{size:a,delta:d}),this._changed(),this._autoUpdate&&this.requestUpdate())},_setElementSize:function(a,b){var c=this._element;c&&(c.width!==a&&(c.width=a),c.height!==b&&(c.height=b))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new s(new o,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var a=o.read(arguments);this.translate(this.getCenter().subtract(a))},getZoom:function(){return this._zoom},setZoom:function(a){this.transform((new u).scale(a/this._zoom,this.getCenter())),this._zoom=a},getMatrix:function(){return this._matrix},setMatrix:function(){var a=this._matrix;a.initialize.apply(a,arguments)},isVisible:function(){return U.isInView(this._element)},isInserted:function(){return U.isInserted(this._element)},getPixelSize:function(a){var b,c=this._element;if(c){var d=c.parentNode,e=g.createElement("div");e.style.fontSize=a,d.appendChild(e),b=parseFloat(U.getStyles(e).fontSize),d.removeChild(e)}else b=parseFloat(b);return b},getTextWidth:function(a,b){return 0}},h.each(["rotate","scale","shear","skew"],function(a){var b="rotate"===a;this[a]=function(){var c=(b?h:o).read(arguments),d=o.read(arguments,0,{readNull:!0});return this.transform((new u)[a](c,d||this.getCenter(!0)))}},{translate:function(){var a=new u;return this.transform(a.translate.apply(a,arguments))},transform:function(a){this._matrix.append(a)},scrollBy:function(){this.translate(o.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(o.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(o.read(arguments))},getEventPoint:function(a){return this.viewToProject(V.getOffset(a,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(a,b){g&&"string"==typeof b&&(b=g.getElementById(b));var c=f?X:W;return new c(a,b)}}},new function(){function a(a){var b=V.getTarget(a);return b.getAttribute&&W._viewsById[b.getAttribute("id")]}function b(){var a=W._focused;if(!a||!a.isVisible())for(var b=0,c=W._views.length;b<c;b++)if((a=W._views[b]).isVisible()){W._focused=j=a;break}}function c(a,b,c){a._handleMouseEvent("mousemove",b,c)}function e(a,b,c,d,e,f,g){function h(a,c){if(a.responds(c)){if(i||(i=new _(c,d,e,b||a,f?e.subtract(f):null)),a.emit(c,i)&&(B=!0,i.prevented&&(C=!0),i.stopped))return j=!0}else{var g=D[c];if(g)return h(a,g)}}for(var i,j=!1;a&&a!==g&&!h(a,c);)a=a._parent;return j}function h(a,b,c,d,f,g){return a._project.removeOn(c),C=B=!1,x&&e(x,null,c,d,f,g)||b&&b!==x&&!b.isDescendant(x)&&e(b,null,D[c]||c,d,f,g,x)||e(a,x||b||a,c,d,f,g)}if(f){var i,j,k,l,m,n=!1,o=!1,p=f.navigator;p.pointerEnabled||p.msPointerEnabled?(k="pointerdown MSPointerDown",l="pointermove MSPointerMove",m="pointerup pointercancel MSPointerUp MSPointerCancel"):(k="touchstart",l="touchmove",m="touchend touchcancel","ontouchstart"in f&&p.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(k+=" mousedown",l+=" mousemove",m+=" mouseup"));var q={},r={mouseout:function(a){var b=W._focused,d=V.getRelatedTarget(a);if(b&&(!d||"HTML"===d.nodeName)){var e=V.getOffset(a,b._element),f=e.x,g=Math.abs,h=g(f),i=1<<25,j=h-i;e.x=g(j)<h?j*(f<0?-1:1):f,c(b,a,b.viewToProject(e))}},scroll:b};q[k]=function(b){var c=W._focused=a(b);n||(n=!0,c._handleMouseEvent("mousedown",b))},r[l]=function(d){var e=W._focused;if(!o){var f=a(d);f?e!==f&&(e&&c(e,d),i||(i=e),e=W._focused=j=f):j&&j===e&&(i&&!i.isInserted()&&(i=null),e=W._focused=i,i=null,b())}e&&c(e,d)},r[k]=function(){o=!0},r[m]=function(a){var b=W._focused;b&&n&&b._handleMouseEvent("mouseup",a),o=n=!1},V.add(g,r),V.add(f,{load:b});var s,t,u,v,w,x,y,z,A,B=!1,C=!1,D={doubleclick:"click",mousedrag:"mousemove"},E=!1,F={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:q,_handleMouseEvent:function(a,b,c){function d(a){return f.virtual[a]||k.responds(a)||j&&j.responds(a)}var f=this._itemEvents,g=f["native"][a],i="mousemove"===a,j=this._scope.tool,k=this;i&&n&&d("mousedrag")&&(a="mousedrag"),c||(c=this.getEventPoint(b));var l=this.getBounds().contains(c),m=g&&l&&k._project.hitTest(c,{tolerance:0,fill:!0,stroke:!0}),o=m&&m.item||null,p=!1,q={};q[a.substr(5)]=!0,g&&o!==w&&(w&&e(w,null,"mouseleave",b,c),o&&e(o,null,"mouseenter",b,c),w=o),E^l&&(e(this,null,l?"mouseenter":"mouseleave",b,c),s=l?this:null,p=!0),!l&&!q.drag||c.equals(u)||(h(this,o,i?a:"mousemove",b,c,u),p=!0),E=l,(q.down&&l||q.up&&t)&&(h(this,o,a,b,c,t),q.down?(A=o===y&&Date.now()-z<300,v=y=o,x=!C&&o,t=c):q.up&&(C||o!==v||(z=Date.now(),h(this,o,A?"doubleclick":"click",b,c,t),A=!1),v=x=null),E=!1,p=!0),u=c,p&&j&&(B=j._handleMouseEvent(a,b,c,q)||B),(B&&!q.move||q.down&&d("mouseup"))&&b.preventDefault()},_handleKeyEvent:function(a,b,c,e){function f(f){f.responds(a)&&(d=h,f.emit(a,g=g||new Z(a,b,c,e)))}var g,h=this._scope,i=h.tool;this.isVisible()&&(f(this),i&&i.responds(a)&&f(i))},_countItemEvent:function(a,b){var c=this._itemEvents,d=c["native"],e=c.virtual;for(var f in F)d[f]=(d[f]||0)+(F[f][a]||0)*b;e[a]=(e[a]||0)+b},statics:{updateFocus:b}}}}),X=W.extend({_class:"CanvasView",initialize:function(a,b){if(!(b instanceof f.HTMLCanvasElement)){var c=q.read(arguments,1);if(c.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));b=da.getCanvas(c)}var d=this._context=b.getContext("2d");if(d.save(),this._pixelRatio=1,!/^off|false$/.test(j.getAttribute(b,"hidpi"))){var e=f.devicePixelRatio||1,g=U.getPrefixed(d,"backingStorePixelRatio")||1;this._pixelRatio=e/g}W.call(this,a,b),this._needsUpdate=!0},remove:function Aa(){return this._context.restore(),Aa.base.call(this)},_setElementSize:function Ba(a,b){var c=this._pixelRatio;if(Ba.base.call(this,a*c,b*c),1!==c){var d=this._element,e=this._context;if(!j.hasAttribute(d,"resize")){var f=d.style;f.width=a+"px",f.height=b+"px"}e.restore(),e.save(),e.scale(c,c)}},getPixelSize:function Ca(a){var b,c=d.agent;if(c&&c.firefox)b=Ca.base.call(this,a);else{var e=this._context,f=e.font;e.font=a+" serif",b=parseFloat(e.font),e.font=f}return b},getTextWidth:function(a,b){var c=this._context,d=c.font,e=0;c.font=a;for(var f=0,g=b.length;f<g;f++)e=Math.max(e,c.measureText(b[f]).width);return c.font=d,e},update:function(){if(!this._needsUpdate)return!1;var a=this._project,b=this._context,c=this._viewSize;return b.clearRect(0,0,c.width+1,c.height+1),a&&a.draw(b,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Y=h.extend({_class:"Event",initialize:function(a){this.event=a,this.type=a&&a.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return $.modifiers}}),Z=Y.extend({_class:"KeyEvent",initialize:function(a,b,c,d){this.type=a,this.event=b,this.key=c,this.character=d},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),$=new function(){function a(a){var b=a.key||a.keyIdentifier;return b=/^U\+/.test(b)?String.fromCharCode(parseInt(b.substr(2),16)):/^Arrow[A-Z]/.test(b)?b.substr(5):"Unidentified"===b?String.fromCharCode(a.keyCode):b,i[b]||(b.length>1?h.hyphenate(b):b.toLowerCase())}function b(a,e,f,g){var i,j=W._focused;if(k[e]=a,a?l[e]=f:delete l[e],e.length>1&&(i=h.camelize(e))in m){m[i]=a;var n=d&&d.agent;if("meta"===i&&n&&n.mac)if(a)c={};else{for(var o in c)o in l&&b(!1,o,c[o],g);c=null}}else a&&c&&(c[e]=f);j&&j._handleKeyEvent(a?"keydown":"keyup",g,e,f)}var c,e,i={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},j={tab:"\t",space:" ",enter:"\r"},k={},l={},m=new h({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var a=d&&d.agent;return a&&a.mac?this.meta:this.control}}});return V.add(g,{keydown:function(c){var f=a(c),g=d&&d.agent;f.length>1||g&&g.chrome&&(c.altKey||g.mac&&c.metaKey||!g.mac&&c.ctrlKey)?b(!0,f,j[f]||(f.length>1?"":f),c):e=f},keypress:function(c){if(e){var d=a(c),f=c.charCode,g=f>=32?String.fromCharCode(f):d.length>1?"":d;d!==e&&(d=g.toLowerCase()),b(!0,d,g,c),e=null}},keyup:function(c){var d=a(c);d in l&&b(!1,d,l[d],c)}}),V.add(f,{blur:function(a){for(var c in l)b(!1,c,l[c],a)}}),{modifiers:m,isDown:function(a){return!!k[a]}}},_=Y.extend({_class:"MouseEvent",initialize:function(a,b,c,d,e){this.type=a,this.event=b,this.point=c,this.target=d,this.delta=e},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),aa=Y.extend({_class:"ToolEvent",_item:null,initialize:function(a,b,c){this.tool=a,this.type=b,this.event=c},_choosePoint:function(a,b){return a?a:b?b.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(a){this._point=a},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(a){this._lastPoint=a},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(a){this._downPoint=a},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(a){this._middlePoint=a},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(a){this._delta=a},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(a){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=a},getItem:function(){if(!this._item){var a=this.tool._scope.project.hitTest(this.getPoint());if(a){for(var b=a.item,c=b._parent;/^(Group|CompoundPath)$/.test(c._class);)b=c,c=c._parent;this._item=b}}return this._item},setItem:function(a){this._item=a},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),ba=k.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(a){k.call(this),this._moveCount=-1,this._downCount=-1,this._set(a)},getMinDistance:function(){return this._minDistance},setMinDistance:function(a){this._minDistance=a,null!=a&&null!=this._maxDistance&&a>this._maxDistance&&(this._maxDistance=a)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(a){this._maxDistance=a,null!=this._minDistance&&null!=a&&a<this._minDistance&&(this._minDistance=a)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(a){this._minDistance=this._maxDistance=a},_handleMouseEvent:function(a,b,c,e){function f(a,b){var d=c,f=h?m._point:m._downPoint||d;if(h){if(m._moveCount&&d.equals(f))return!1;if(f&&(null!=a||null!=b)){var g=d.subtract(f),i=g.getLength();if(i<(a||0))return!1;b&&(d=f.add(g.normalize(Math.min(i,b))))}m._moveCount++}return m._point=d,m._lastPoint=f||d,e.down&&(m._moveCount=-1,m._downPoint=d,m._downCount++),!0}function g(){i&&(l=m.emit(a,new aa(m,a,b))||l)}d=this._scope,e.drag&&!this.responds(a)&&(a="mousemove");var h=e.move||e.drag,i=this.responds(a),j=this.minDistance,k=this.maxDistance,l=!1,m=this;if(e.down)f(),g();else if(e.up)f(null,k),g();else if(i)for(;f(j,k);)g();return l}}),ca={request:function(a){var b=new f.XMLHttpRequest;return b.open((a.method||"get").toUpperCase(),a.url,h.pick(a.async,!0)),a.mimeType&&b.overrideMimeType(a.mimeType),b.onload=function(){var c=b.status;0===c||200===c?a.onLoad&&a.onLoad.call(b,b.responseText):b.onerror()},b.onerror=function(){var c=b.status,d='Could not load "'+a.url+'" (Status: '+c+")";if(!a.onError)throw new Error(d);a.onError(d,c)},b.send(null)}},da={canvases:[],getCanvas:function(a,b){if(!f)return null;var c,d=!0;"object"==typeof a&&(b=a.height,a=a.width),this.canvases.length?c=this.canvases.pop():(c=g.createElement("canvas"),d=!1);var e=c.getContext("2d");if(!e)throw new Error("Canvas "+c+" is unable toprovide a 2D context.");return c.width===a&&c.height===b?d&&e.clearRect(0,0,a+1,b+1):(c.width=a,c.height=b),e.save(),c},getContext:function(a,b){var c=this.getCanvas(a,b);return c?c.getContext("2d"):null},release:function(a){var b=a&&a.canvas?a.canvas:a;b&&b.getContext&&(b.getContext("2d").restore(),this.canvases.push(b))}},ea=new function(){function a(a,b,c){return.2989*a+.587*b+.114*c}function b(b,c,d,e){var f=e-a(b,c,d);n=b+f,o=c+f,p=d+f;var e=a(n,o,p),g=q(n,o,p),h=r(n,o,p);if(g<0){var i=e-g;n=e+(n-e)*e/i,o=e+(o-e)*e/i,p=e+(p-e)*e/i}if(h>255){var j=255-e,k=h-e;n=e+(n-e)*j/k,o=e+(o-e)*j/k,p=e+(p-e)*j/k}}function c(a,b,c){return r(a,b,c)-q(a,b,c)}function d(a,b,c,d){var e,f=[a,b,c],g=r(a,b,c),h=q(a,b,c);h=h===a?0:h===b?1:2,g=g===a?0:g===b?1:2,e=0===q(h,g)?1===r(h,g)?2:1:0,f[g]>f[h]?(f[e]=(f[e]-f[h])*d/(f[g]-f[h]),f[g]=d):f[e]=f[g]=0,f[h]=0,n=f[0],o=f[1],p=f[2]}var e,f,g,i,j,k,l,m,n,o,p,q=Math.min,r=Math.max,s=Math.abs,t={multiply:function(){n=j*e/255,o=k*f/255,p=l*g/255},screen:function(){n=j+e-j*e/255,o=k+f-k*f/255,p=l+g-l*g/255},overlay:function(){n=j<128?2*j*e/255:255-2*(255-j)*(255-e)/255,o=k<128?2*k*f/255:255-2*(255-k)*(255-f)/255,p=l<128?2*l*g/255:255-2*(255-l)*(255-g)/255},"soft-light":function(){var a=e*j/255;n=a+j*(255-(255-j)*(255-e)/255-a)/255,a=f*k/255,o=a+k*(255-(255-k)*(255-f)/255-a)/255,a=g*l/255,p=a+l*(255-(255-l)*(255-g)/255-a)/255},"hard-light":function(){n=e<128?2*e*j/255:255-2*(255-e)*(255-j)/255,o=f<128?2*f*k/255:255-2*(255-f)*(255-k)/255,p=g<128?2*g*l/255:255-2*(255-g)*(255-l)/255},"color-dodge":function(){n=0===j?0:255===e?255:q(255,255*j/(255-e)),o=0===k?0:255===f?255:q(255,255*k/(255-f)),p=0===l?0:255===g?255:q(255,255*l/(255-g))},"color-burn":function(){n=255===j?255:0===e?0:r(0,255-255*(255-j)/e),o=255===k?255:0===f?0:r(0,255-255*(255-k)/f),p=255===l?255:0===g?0:r(0,255-255*(255-l)/g)},darken:function(){n=j<e?j:e,o=k<f?k:f,p=l<g?l:g},lighten:function(){n=j>e?j:e,o=k>f?k:f,p=l>g?l:g},difference:function(){n=j-e,n<0&&(n=-n),o=k-f,o<0&&(o=-o),p=l-g,p<0&&(p=-p)},exclusion:function(){n=j+e*(255-j-j)/255,o=k+f*(255-k-k)/255,p=l+g*(255-l-l)/255},hue:function(){d(e,f,g,c(j,k,l)),b(n,o,p,a(j,k,l))},saturation:function(){d(j,k,l,c(e,f,g)),b(n,o,p,a(j,k,l))},luminosity:function(){b(j,k,l,a(e,f,g))},color:function(){b(e,f,g,a(j,k,l))},add:function(){n=q(j+e,255),o=q(k+f,255),p=q(l+g,255)},subtract:function(){n=r(j-e,0),o=r(k-f,0),p=r(l-g,0)},average:function(){n=(j+e)/2,o=(k+f)/2,p=(l+g)/2},negation:function(){n=255-s(255-e-j),o=255-s(255-f-k),p=255-s(255-g-l)}},u=this.nativeModes=h.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(a){this[a]=!0},{}),v=da.getContext(1,1);v&&(h.each(t,function(a,b){var c="darken"===b,d=!1;v.save();try{v.fillStyle=c?"#300":"#a00",v.fillRect(0,0,1,1),v.globalCompositeOperation=b,v.globalCompositeOperation===b&&(v.fillStyle=c?"#a00":"#300",v.fillRect(0,0,1,1),d=v.getImageData(0,0,1,1).data[0]!==c?170:51)}catch(e){}v.restore(),u[b]=d}),da.release(v)),this.process=function(a,b,c,d,h){var q=b.canvas,r="normal"===a;if(r||u[a])c.save(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=d,r||(c.globalCompositeOperation=a),c.drawImage(q,h.x,h.y),c.restore();else{var s=t[a];if(!s)return;for(var v=c.getImageData(h.x,h.y,q.width,q.height),w=v.data,x=b.getImageData(0,0,q.width,q.height).data,y=0,z=w.length;y<z;y+=4){e=x[y],j=w[y],f=x[y+1],k=w[y+1],g=x[y+2],l=w[y+2],i=x[y+3],m=w[y+3],s();var A=i*d/255,B=1-A;w[y]=A*n+B*j,w[y+1]=A*o+B*k,w[y+2]=A*p+B*l,w[y+3]=i*d+B*m}c.putImageData(v,h.x,h.y)}}},fa=new function(){function a(a,b,e){return c(g.createElementNS(d,a),b,e)}function b(a,b){var c=h[b],d=c?a.getAttributeNS(c,b):a.getAttribute(b);return"null"===d?null:d}function c(a,b,c){for(var d in b){var e=b[d],f=h[d];"number"==typeof e&&c&&(e=c.number(e)),f?a.setAttributeNS(f,d,e):a.setAttribute(d,e)}return a}var d="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",f="http://www.w3.org/1999/xlink",h={href:f,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};return{svg:d,xmlns:e,xlink:f,create:a,get:b,set:c}},ga=h.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{"true":"none","false":"non-scaling-stroke"},function(a,b){return!b&&(a instanceof J||a instanceof A||a instanceof O)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(a,b){var c=h.capitalize(b),d=a[2];this[b]={type:a[1],property:b,attribute:a[0],toSVG:d,fromSVG:d&&h.each(d,function(a,b){this[a]=b},{}),exportFilter:a[3],get:"get"+c,set:"set"+c}},{});return new function(){function a(a,b,c){var d=new h,e=a.getTranslation();if(b){a=a._shiftless();var f=a._inverseTransform(e);d[c?"cx":"x"]=f.x,d[c?"cy":"y"]=f.y,e=null}if(!a.isIdentity()){var g=a.decompose();if(g){var i=[],j=g.rotation,k=g.scaling,l=g.skewing;e&&!e.isZero()&&i.push("translate("+y.point(e)+")"),j&&i.push("rotate("+y.number(j)+")"),m.isZero(k.x-1)&&m.isZero(k.y-1)||i.push("scale("+y.point(k)+")"),l&&l.x&&i.push("skewX("+y.number(l.x)+")"),l&&l.y&&i.push("skewY("+y.number(l.y)+")"),d.transform=i.join(" ")}else d.transform="matrix("+a.getValues().join(",")+")"}return d}function b(b,c){for(var d=a(b._matrix),e=b._children,f=fa.create("g",d,y),g=0,h=e.length;g<h;g++){var i=e[g],j=t(i,c);if(j)if(i.isClipMask()){var k=fa.create("clipPath");k.appendChild(j),q(i,k,"clip"),fa.set(f,{"clip-path":"url(#"+k.id+")"})}else f.appendChild(j)}return f}function c(b,c){var d=a(b._matrix,!0),e=b.getSize(),f=b.getImage();return d.x-=e.width/2,d.y-=e.height/2,d.width=e.width,d.height=e.height,d.href=c.embedImages===!1&&f&&f.src||b.toDataURL(),fa.create("image",d,y)}function d(b,c){var d=c.matchShapes;if(d){var f=b.toShape(!1);if(f)return e(f,c)}var g,h=b._segments,i=h.length,j=a(b._matrix);if(d&&i>=2&&!b.hasHandles())if(i>2){g=b._closed?"polygon":"polyline";for(var k=[],l=0;l<i;l++)k.push(y.point(h[l]._point));j.points=k.join(" ")}else{g="line";var m=h[0]._point,n=h[1]._point;j.set({x1:m.x,y1:m.y,x2:n.x,y2:n.y})}else g="path",j.d=b.getPathData(null,c.precision);return fa.create(g,j,y)}function e(b){var c=b._type,d=b._radius,e=a(b._matrix,!0,"rectangle"!==c);if("rectangle"===c){c="rect";var f=b._size,g=f.width,h=f.height;e.x-=g/2,e.y-=h/2,e.width=g,e.height=h,d.isZero()&&(d=null)}return d&&("circle"===c?e.r=d:(e.rx=d.width,e.ry=d.height)),fa.create(c,e,y)}function g(b,c){var d=a(b._matrix),e=b.getPathData(null,c.precision);return e&&(d.d=e),fa.create("path",d,y)}function i(b,c){var d=a(b._matrix,!0),e=b._definition,f=p(e,"symbol"),g=e._item,h=g.getBounds();return f||(f=fa.create("symbol",{viewBox:y.rectangle(h)}),f.appendChild(t(g,c)),q(e,f,"symbol")),d.href="#"+f.id,d.x+=h.x,d.y+=h.y,d.width=h.width,d.height=h.height,d.overflow="visible",fa.create("use",d,y)}function j(a){var b=p(a,"color");if(!b){var c,d=a.getGradient(),e=d._radial,f=a.getOrigin(),g=a.getDestination();if(e){c={cx:f.x,cy:f.y,r:f.getDistance(g)};var h=a.getHighlight();h&&(c.fx=h.x,c.fy=h.y)}else c={x1:f.x,y1:f.y,x2:g.x,y2:g.y};c.gradientUnits="userSpaceOnUse",b=fa.create((e?"radial":"linear")+"Gradient",c,y);for(var i=d._stops,j=0,k=i.length;j<k;j++){var l=i[j],m=l._color,n=m.getAlpha();c={offset:l._offset||j/(k-1)},m&&(c["stop-color"]=m.toCSS(!0)),n<1&&(c["stop-opacity"]=n),b.appendChild(fa.create("stop",c,y))}q(a,b,"color")}return"url(#"+b.id+")"}function k(b){var c=fa.create("text",a(b._matrix,!0),y);return c.textContent=b._content,c}function o(a,b,c){var d={},e=!c&&a.getParent(),f=[];return null!=a._name&&(d.id=a._name),h.each(ga,function(b){var c=b.get,g=b.type,i=a[c]();if(b.exportFilter?b.exportFilter(a,i):!e||!h.equals(e[c](),i)){if("color"===g&&null!=i){var k=i.getAlpha();k<1&&(d[b.attribute+"-opacity"]=k)}"style"===g?f.push(b.attribute+": "+i):d[b.attribute]=null==i?"none":"color"===g?i.gradient?j(i,a):i.toCSS(!0):"array"===g?i.join(","):"lookup"===g?b.toSVG[i]:i}}),f.length&&(d.style=f.join(";")),1===d.opacity&&delete d.opacity,a._visible||(d.visibility="hidden"),fa.set(b,d,y)}function p(a,b){z||(z={ids:{},svgs:{}});var c=a._id||a.__id||(a.__id=n.get("svg"));return a&&z.svgs[b+"-"+c]}function q(a,b,c){z||p();var d=z.ids[c]=(z.ids[c]||0)+1;b.id=c+"-"+d,z.svgs[c+"-"+(a._id||a.__id)]=b}function r(a,b){var c=a,d=null;if(z){c="svg"===a.nodeName.toLowerCase()&&a;for(var e in z.svgs)d||(c||(c=fa.create("svg"),c.appendChild(a)),d=c.insertBefore(fa.create("defs"),c.firstChild)),d.appendChild(z.svgs[e]);z=null}return b.asString?(new f.XMLSerializer).serializeToString(c):c}function t(a,b,c){var d=A[a._class],e=d&&d(a,b);if(e){var f=b.onExport;f&&(e=f(a,e,b)||e);var g=JSON.stringify(a._data);g&&"{}"!==g&&"null"!==g&&e.setAttribute("data-paper-data",g)}return e&&o(a,e,c)}function v(a){return a||(a={}),y=new l(a.precision),a}var y,z,A={Group:b,Layer:b,Raster:c,Path:d,Shape:e,CompoundPath:g,SymbolItem:i,PointText:k};x.inject({exportSVG:function(a){return a=v(a),r(t(this,a,!0),a)}}),w.inject({exportSVG:function(b){b=v(b);var c=this._children,d=this.getView(),e=h.pick(b.bounds,"view"),f=b.matrix||"view"===e&&d._matrix,g=f&&u.read([f]),i="view"===e?new s([0,0],d.getViewSize()):"content"===e?x._getBounds(c,g,{stroke:!0}):s.read([e],0,{readNull:!0}),j={version:"1.1",xmlns:fa.svg,"xmlns:xlink":fa.xlink};i&&(j.width=i.width,j.height=i.height,(i.x||i.y)&&(j.viewBox=y.rectangle(i)));var k=fa.create("svg",j,y),l=k;g&&!g.isIdentity()&&(l=k.appendChild(fa.create("g",a(g),y)));for(var m=0,n=c.length;m<n;m++)l.appendChild(t(c[m],b,!0));return r(k,b)}})},new function(){function a(a,b,c,d,e){var f=fa.get(a,b),g=null==f?d?null:c?"":0:c?f:parseFloat(f);return/%\s*$/.test(f)?g/100*(e?1:E[/x|^width/.test(b)?"width":"height"]):g}function b(b,c,d,e,f){return c=a(b,c||"x",!1,e,f),d=a(b,d||"y",!1,e,f),!e||null!=c&&null!=d?new o(c,d):null}function c(b,c,d,e,f){return c=a(b,c||"width",!1,e,f),d=a(b,d||"height",!1,e,f),!e||null!=c&&null!=d?new q(c,d):null}function i(a,b,c){return"none"===a?null:"number"===b?parseFloat(a):"array"===b?a?a.split(/[\s,]+/g).map(parseFloat):[]:"color"===b?v(a)||a:"lookup"===b?c[a]:a}function j(a,b,c,d){var e=a.childNodes,f="clippath"===b,g="defs"===b,h=new y,i=h._project,j=i._currentStyle,k=[];if(f||g||(h=t(h,a,d),i._currentStyle=h._style.clone()),d)for(var l=a.querySelectorAll("defs"),m=0,n=l.length;m<n;m++)z(l[m],c,!1);for(var m=0,n=e.length;m<n;m++){var o,p=e[m];1!==p.nodeType||/^defs$/i.test(p.nodeName)||!(o=z(p,c,!1))||o instanceof D||k.push(o)}return h.addChildren(k),f&&(h=t(h.reduce(),a,d)),i._currentStyle=j,(f||g)&&(h.remove(),h=null),h}function k(a,b){for(var c=a.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),d=[],e=0,f=c.length;e<f;e+=2)d.push(new o(parseFloat(c[e]),parseFloat(c[e+1])));var g=new K(d);return"polygon"===b&&g.closePath(),g}function l(a){return J.create(a.getAttribute("d"))}function m(c,d){var e,f=(a(c,"href",!0)||"").substring(1),g="radialgradient"===d;if(f)e=F[f].getGradient(),e._radial^g&&(e=e.clone(),e._radial=g);else{for(var h=c.childNodes,i=[],j=0,k=h.length;j<k;j++){var l=h[j];1===l.nodeType&&i.push(t(new S,l))}e=new R(i,g)}var m,n,o,p="userSpaceOnUse"!==a(c,"gradientUnits",!0);g?(m=b(c,"cx","cy",!1,p),n=m.add(a(c,"r",!1,!1,p),0),o=b(c,"fx","fy",!0,p)):(m=b(c,"x1","y1",!1,p),n=b(c,"x2","y2",!1,p));var q=t(new Q(e,m,n,o),c);return q._scaleToBounds=p,null}function n(a,b,c,d){if(a.transform){for(var e=(d.getAttribute(c)||"").split(/\)\s*/g),f=new u,g=0,h=e.length;g<h;g++){var i=e[g];if(!i)break;for(var j=i.split(/\(\s*/),k=j[0],l=j[1].split(/[\s,]+/g),m=0,n=l.length;m<n;m++)l[m]=parseFloat(l[m]);switch(k){case"matrix":f.append(new u(l[0],l[1],l[2],l[3],l[4],l[5]));break;case"rotate":f.rotate(l[0],l[1],l[2]);break;case"translate":f.translate(l[0],l[1]);break;case"scale":f.scale(l);break;case"skewX":f.skew(l[0],0);break;case"skewY":f.skew(0,l[0])}}a.transform(f)}}function p(a,b,c){var d="fill-opacity"===c?"getFillColor":"getStrokeColor",e=a[d]&&a[d]();
e&&e.setAlpha(parseFloat(b))}function r(a,b,c){var d=a.attributes[b],f=d&&d.value;if(!f){var g=h.camelize(b);f=a.style[g],f||c.node[g]===c.parent[g]||(f=c.node[g])}return f?"none"===f?null:f:e}function t(a,b,c){var d=b.parentNode,f={node:U.getStyles(b)||{},parent:!c&&!/^defs$/i.test(d.tagName)&&U.getStyles(d)||{}};return h.each(H,function(c,d){var g=r(b,d,f);a=g!==e&&c(a,g,d,b,f)||a}),a}function v(a){var b=a&&a.match(/\((?:["'#]*)([^"')]+)/),c=b&&F[b[1].replace(f.location.href.split("#")[0]+"#","")];return c&&c._scaleToBounds&&(c=c.clone(),c._scaleToBounds=!0),c}function z(a,b,e){var f,i,j,k=a.nodeName.toLowerCase(),l="#document"!==k,m=g.body;e&&l&&(E=c(a,null,null,!0)||d.getView().getSize(),f=fa.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),i=a.parentNode,j=a.nextSibling,f.appendChild(a),m.appendChild(f));var n=d.settings,o=n.applyMatrix,p=n.insertItems;n.applyMatrix=!1,n.insertItems=!1;var q=G[k],r=q&&q(a,k,b,e)||null;if(n.insertItems=p,n.applyMatrix=o,r){!l||r instanceof y||(r=t(r,a,e));var s=b.onImport,u=l&&a.getAttribute("data-paper-data");s&&(r=s(a,r,b)||r),b.expandShapes&&r instanceof A&&(r.remove(),r=r.toPath()),u&&(r._data=JSON.parse(u))}return f&&(m.removeChild(f),i&&(j?i.insertBefore(a,j):i.appendChild(a))),e&&(F={},r&&h.pick(b.applyMatrix,o)&&r.matrix.apply(!0,!0)),r}function C(a,b,c){function h(g){try{var h="object"==typeof g?g:(new f.DOMParser).parseFromString(g,"image/svg+xml");if(!h.nodeName)throw h=null,new Error("Unsupported SVG source: "+a);d=j,k=z(h,b,!0),b&&b.insert===!1||c._insertItem(e,k);var l=b.onLoad;l&&l(k,g)}catch(m){i(m)}}function i(a,c){var d=b.onError;if(!d)throw new Error(a);d(a,c)}if(!a)return null;b="function"==typeof b?{onLoad:b}:b||{};var j=d,k=null;if("string"!=typeof a||/^.*</.test(a)){if("undefined"!=typeof File&&a instanceof File){var l=new FileReader;return l.onload=function(){h(l.result)},l.onerror=function(){i(l.error)},l.readAsText(a)}h(a)}else{var m=g.getElementById(a);m?h(m):ca.request({url:a,async:!0,onLoad:h,onError:i})}return k}var E,F={},G={"#document":function(a,b,c,d){for(var e=a.childNodes,f=0,g=e.length;f<g;f++){var h=e[f];if(1===h.nodeType)return z(h,c,d)}},g:j,svg:j,clippath:j,polygon:k,polyline:k,path:l,lineargradient:m,radialgradient:m,image:function(d){var e=new B(a(d,"href",!0));return e.on("load",function(){var a=c(d);this.setSize(a);var e=this._matrix._transformPoint(b(d).add(a.divide(2)));this.translate(e)}),e},symbol:function(a,b,c,d){return new D(j(a,b,c,d),(!0))},defs:j,use:function(c){var d=(a(c,"href",!0)||"").substring(1),e=F[d],f=b(c);return e?e instanceof D?e.place(f):e.clone().translate(f):null},circle:function(c){return new A.Circle(b(c,"cx","cy"),a(c,"r"))},ellipse:function(a){return new A.Ellipse({center:b(a,"cx","cy"),radius:c(a,"rx","ry")})},rect:function(a){return new A.Rectangle(new s(b(a),c(a)),c(a,"rx","ry"))},line:function(a){return new K.Line(b(a,"x1","y1"),b(a,"x2","y2"))},text:function(a){var c=new P(b(a).add(b(a,"dx","dy")));return c.setContent(a.textContent.trim()||""),c}},H=h.set(h.each(ga,function(a){this[a.attribute]=function(b,c){if(b[a.set]&&(b[a.set](i(c,a.type,a.fromSVG)),"color"===a.type)){var d=b[a.get]();if(d){if(d._scaleToBounds){var e=b.getBounds();d.transform((new u).translate(e.getPoint()).scale(e.getSize()))}b instanceof A&&d.transform((new u).translate(b.getPosition(!0).negate()))}}}},{}),{id:function(a,b){F[b]=a,a.setName&&a.setName(b)},"clip-path":function(a,b){var c=v(b);if(c){if(c=c.clone(),c.setClipMask(!0),!(a instanceof y))return new y(c,a);a.insertChild(0,c)}},gradientTransform:n,transform:n,"fill-opacity":p,"stroke-opacity":p,visibility:function(a,b){a.setVisible&&a.setVisible("visible"===b)},display:function(a,b){a.setVisible&&a.setVisible(null!==b)},"stop-color":function(a,b){a.setColor&&a.setColor(b)},"stop-opacity":function(a,b){a._color&&a._color.setAlpha(parseFloat(b))},offset:function(a,b){if(a.setOffset){var c=b.match(/(.*)%$/);a.setOffset(c?c[1]/100:parseFloat(b))}},viewBox:function(a,b,d,e,f){var g,h,j=new s(i(b,"array")),k=c(e,null,null,!0);if(a instanceof y){var l=k?k.divide(j.getSize()):1,h=(new u).scale(l).translate(j.getPoint().negate());g=a}else a instanceof D&&(k&&j.setSize(k),g=a._item);if(g){if("visible"!==r(e,"overflow",f)){var m=new A.Rectangle(j);m.setClipMask(!0),g.addChild(m)}h&&g.transform(h)}}});x.inject({importSVG:function(a,b){return C(a,b,this)}}),w.inject({importSVG:function(a,b){return this.activate(),C(a,b,this)}})},h.exports.PaperScript=function(){function a(a,b,c){var d=t[b];if(a&&a[d]){var e=a[d](c);return"!="===b?!e:e}switch(b){case"+":return a+c;case"-":return a-c;case"*":return a*c;case"/":return a/c;case"%":return a%c;case"==":return a==c;case"!=":return a!=c}}function c(a,b){var c=u[a];if(c&&b&&b[c])return b[c]();switch(a){case"+":return+b;case"-":return-b}}function e(a,b){return s.acorn.parse(a,b)}function i(a,b){function c(a){for(var b=0,c=n.length;b<c;b++){var d=n[b];if(d[0]>=a)break;a+=d[1]}return a}function h(b){return a.substring(c(b.range[0]),c(b.range[1]))}function i(b,d){return a.substring(c(b.range[1]),c(d.range[0]))}function j(b,d){for(var e=c(b.range[0]),f=c(b.range[1]),g=0,h=n.length-1;h>=0;h--)if(e>n[h][0]){g=h+1;break}n.splice(g,0,[e,d.length-f+e]),a=a.substring(0,e)+d+a.substring(f)}function k(a,b){if(a){for(var c in a)if("range"!==c&&"loc"!==c){var d=a[c];if(Array.isArray(d))for(var e=0,f=d.length;e<f;e++)k(d[e],a);else d&&"object"==typeof d&&k(d,a)}switch(a.type){case"UnaryExpression":if(a.operator in u&&"Literal"!==a.argument.type){var g=h(a.argument);j(a,'$__("'+a.operator+'", '+g+")")}break;case"BinaryExpression":if(a.operator in t&&"Literal"!==a.left.type){var l=h(a.left),m=h(a.right),n=i(a.left,a.right),o=a.operator;j(a,"__$__("+l+","+n.replace(new RegExp("\\"+o),'"'+o+'"')+", "+m+")")}break;case"UpdateExpression":case"AssignmentExpression":var p=b&&b.type;if(!("ForStatement"===p||"BinaryExpression"===p&&/^[=!<>]/.test(b.operator)||"MemberExpression"===p&&b.computed))if("UpdateExpression"===a.type){var g=h(a.argument),q="__$__("+g+', "'+a.operator[0]+'", 1)',r=g+" = "+q;a.prefix||"AssignmentExpression"!==p&&"VariableDeclarator"!==p||(h(b.left||b.id)===g&&(r=q),r=g+"; "+r),j(a,r)}else if(/^.=$/.test(a.operator)&&"Literal"!==a.left.type){var l=h(a.left),m=h(a.right);j(a,l+" = __$__("+l+', "'+a.operator[0]+'", '+m+")")}}}}function l(a){var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(a=(Math.abs(a)<<1)+(a<0?1:0);a||!b;){var d=31&a;a>>=5,a&&(d|=32),b+=c[d]}return b}if(!a)return"";b=b||{};var m,n=[],o=b.url||"",p=d.agent,q=p.versionNumber,r=!1,s=b.sourceMaps,v=b.source||a,w=/\r\n|\n|\r/gm,x=b.offset||0;if(s&&(p.chrome&&q>=30||p.webkit&&q>=537.76||p.firefox&&q>=23||p.node)){if(p.node)x-=2;else if(f&&o&&!f.location.href.indexOf(o)){var y=g.getElementsByTagName("html")[0].innerHTML;x=y.substr(0,y.indexOf(a)+1).match(w).length+1}r=x>0&&!(p.chrome&&q>=36||p.safari&&q>=600||p.firefox&&q>=40||p.node);var z=["AA"+l(r?0:x)+"A"];z.length=(a.match(w)||[]).length+1+(r?x:0),m={version:3,file:o,names:[],mappings:z.join(";AACA"),sourceRoot:"",sources:[o],sourcesContent:[v]}}return k(e(a,{ranges:!0})),m&&(r&&(a=new Array(x+1).join("\n")+a),/^(inline|both)$/.test(s)&&(a+="\n//# sourceMappingURL=data:application/json;base64,"+f.btoa(unescape(encodeURIComponent(JSON.stringify(m))))),a+="\n//# sourceURL="+(o||"paperscript")),{url:o,source:v,code:a,map:m}}function k(b,e,f){function j(a,c){for(var d in a)!c&&/^_/.test(d)||!new RegExp("([\\b\\s\\W]|^)"+d.replace(/\$/g,"\\$")+"\\b").test(b)||(q.push(d),r.push(a[d]))}d=e;var k,l=e.getView(),m=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(b)&&!/\bnew\s+Tool\b/.test(b)?new ba:null,n=m?m._events:[],p=["onFrame","onResize"].concat(n),q=[],r=[],s="object"==typeof b?b:i(b,f);b=s.code,j({__$__:a,$__:c,paper:e,view:l,tool:m},!0),j(e),p=h.each(p,function(a){new RegExp("\\s+"+a+"\\b").test(b)&&(q.push(a),this.push(a+": "+a))},[]).join(", "),p&&(b+="\nreturn { "+p+" };");var t=d.agent;if(g&&(t.chrome||t.firefox&&t.versionNumber<40)){var u=g.createElement("script"),v=g.head||g.getElementsByTagName("head")[0];t.firefox&&(b="\n"+b),u.appendChild(g.createTextNode("paper._execute = function("+q+") {"+b+"\n}")),v.appendChild(u),k=d._execute,delete d._execute,v.removeChild(u)}else k=Function(q,b);var w=k.apply(e,r)||{};return h.each(n,function(a){var b=w[a];b&&(m[a]=b)}),l&&(w.onResize&&l.setOnResize(w.onResize),l.emit("resize",{size:l.size,delta:new o}),w.onFrame&&l.setOnFrame(w.onFrame),l.requestUpdate()),s}function l(a){if(/^text\/(?:x-|)paperscript$/.test(a.type)&&"true"!==j.getAttribute(a,"ignore")){var b=j.getAttribute(a,"canvas"),c=g.getElementById(b),d=a.src||a.getAttribute("data-src"),e=j.hasAttribute(a,"async"),f="data-paper-scope";if(!c)throw new Error('Unable to find canvas with id "'+b+'"');var h=j.get(c.getAttribute(f))||(new j).setup(c);return c.setAttribute(f,h._id),d?ca.request({url:d,async:e,mimeType:"text/plain",onLoad:function(a){k(a,h,d)}}):k(a.innerHTML,h,a.baseURI),a.setAttribute("data-paper-ignore","true"),h}}function m(){h.each(g&&g.getElementsByTagName("script"),l)}function n(a){return a?l(a):m()}var p,r,s=this;!function(a,c){return"object"==typeof p&&"object"==typeof b?c(p):"function"==typeof r&&r.amd?r(["exports"],c):void c(a.acorn||(a.acorn={}))}(this,function(a){"use strict";function b(a){la=a||{};for(var b in pa)Object.prototype.hasOwnProperty.call(la,b)||(la[b]=pa[b]);oa=la.sourceFile||null}function c(a,b){var c=qa(ma,a);b+=" ("+c.line+":"+c.column+")";var d=new SyntaxError(b);throw d.pos=a,d.loc=c,d.raisedAt=ra,d}function d(a){function b(a){if(1==a.length)return c+="return str === "+JSON.stringify(a[0])+";";c+="switch(str){";for(var b=0;b<a.length;++b)c+="case "+JSON.stringify(a[b])+":";c+="return true}return false;"}a=a.split(" ");var c="",d=[];a:for(var e=0;e<a.length;++e){for(var f=0;f<d.length;++f)if(d[f][0].length==a[e].length){d[f].push(a[e]);continue a}d.push([a[e]])}if(d.length>3){d.sort(function(a,b){return b.length-a.length}),c+="switch(str.length){";for(var e=0;e<d.length;++e){var g=d[e];c+="case "+g[0].length+":",b(g)}c+="}"}else b(a);return new Function("str",c)}function e(){this.line=za,this.column=ra-Aa}function f(){za=1,ra=Aa=0,ya=!0,j()}function g(a,b){ta=ra,la.locations&&(va=new e),wa=a,j(),xa=b,ya=a.beforeExpr}function h(){var a=la.onComment&&la.locations&&new e,b=ra,d=ma.indexOf("*/",ra+=2);if(-1===d&&c(ra-2,"Unterminated comment"),ra=d+2,la.locations){Yb.lastIndex=b;for(var f;(f=Yb.exec(ma))&&f.index<ra;)++za,Aa=f.index+f[0].length}la.onComment&&la.onComment(!0,ma.slice(b+2,d),b,ra,a,la.locations&&new e)}function i(){for(var a=ra,b=la.onComment&&la.locations&&new e,c=ma.charCodeAt(ra+=2);na>ra&&10!==c&&13!==c&&8232!==c&&8233!==c;)++ra,c=ma.charCodeAt(ra);la.onComment&&la.onComment(!1,ma.slice(a+2,ra),a,ra,b,la.locations&&new e)}function j(){for(;na>ra;){var a=ma.charCodeAt(ra);if(32===a)++ra;else if(13===a){++ra;var b=ma.charCodeAt(ra);10===b&&++ra,la.locations&&(++za,Aa=ra)}else if(10===a||8232===a||8233===a)++ra,la.locations&&(++za,Aa=ra);else if(a>8&&14>a)++ra;else if(47===a){var b=ma.charCodeAt(ra+1);if(42===b)h();else{if(47!==b)break;i()}}else if(160===a)++ra;else{if(!(a>=5760&&Sb.test(String.fromCharCode(a))))break;++ra}}}function k(){var a=ma.charCodeAt(ra+1);return a>=48&&57>=a?y(!0):(++ra,g(ub))}function l(){var a=ma.charCodeAt(ra+1);return ya?(++ra,v()):61===a?u(yb,2):u(wb,1)}function m(){var a=ma.charCodeAt(ra+1);return 61===a?u(yb,2):u(Kb,1)}function n(a){var b=ma.charCodeAt(ra+1);return b===a?u(124===a?Bb:Cb,2):61===b?u(yb,2):u(124===a?Db:Fb,1)}function o(){var a=ma.charCodeAt(ra+1);return 61===a?u(yb,2):u(Eb,1)}function p(a){var b=ma.charCodeAt(ra+1);return b===a?45==b&&62==ma.charCodeAt(ra+2)&&Xb.test(ma.slice(Ca,ra))?(ra+=3,i(),j(),t()):u(zb,2):61===b?u(yb,2):u(Jb,1)}function q(a){var b=ma.charCodeAt(ra+1),c=1;return b===a?(c=62===a&&62===ma.charCodeAt(ra+2)?3:2,61===ma.charCodeAt(ra+c)?u(yb,c+1):u(Ib,c)):33==b&&60==a&&45==ma.charCodeAt(ra+2)&&45==ma.charCodeAt(ra+3)?(ra+=4,i(),j(),t()):(61===b&&(c=61===ma.charCodeAt(ra+2)?3:2),u(Hb,c))}function r(a){var b=ma.charCodeAt(ra+1);return 61===b?u(Gb,61===ma.charCodeAt(ra+2)?3:2):u(61===a?xb:Ab,1)}function s(a){switch(a){case 46:return k();case 40:return++ra,g(pb);case 41:return++ra,g(qb);case 59:return++ra,g(sb);case 44:return++ra,g(rb);case 91:return++ra,g(lb);case 93:return++ra,g(mb);case 123:return++ra,g(nb);case 125:return++ra,g(ob);case 58:return++ra,g(tb);case 63:return++ra,g(vb);case 48:var b=ma.charCodeAt(ra+1);if(120===b||88===b)return x();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return y(!1);case 34:case 39:return z(a);case 47:return l(a);case 37:case 42:return m();case 124:case 38:return n(a);case 94:return o();case 43:case 45:return p(a);case 60:case 62:return q(a);case 61:case 33:return r(a);case 126:return u(Ab,1)}return!1}function t(a){if(a?ra=sa+1:sa=ra,la.locations&&(ua=new e),a)return v();if(ra>=na)return g(Ma);var b=ma.charCodeAt(ra);if(Zb(b)||92===b)return C();var d=s(b);if(d===!1){var f=String.fromCharCode(b);if("\\"===f||Vb.test(f))return C();c(ra,"Unexpected character '"+f+"'")}return d}function u(a,b){var c=ma.slice(ra,ra+b);ra+=b,g(a,c)}function v(){for(var a,b,d="",e=ra;;){ra>=na&&c(e,"Unterminated regular expression");var f=ma.charAt(ra);if(Xb.test(f)&&c(e,"Unterminated regular expression"),a)a=!1;else{if("["===f)b=!0;else if("]"===f&&b)b=!1;else if("/"===f&&!b)break;a="\\"===f}++ra}var d=ma.slice(e,ra);++ra;var h=B();h&&!/^[gmsiy]*$/.test(h)&&c(e,"Invalid regexp flag");try{var i=new RegExp(d,h)}catch(j){j instanceof SyntaxError&&c(e,j.message),c(j)}return g(Ja,i)}function w(a,b){for(var c=ra,d=0,e=0,f=null==b?1/0:b;f>e;++e){var g,h=ma.charCodeAt(ra);if(g=h>=97?h-97+10:h>=65?h-65+10:h>=48&&57>=h?h-48:1/0,g>=a)break;++ra,d=d*a+g}return ra===c||null!=b&&ra-c!==b?null:d}function x(){ra+=2;var a=w(16);return null==a&&c(sa+2,"Expected hexadecimal number"),Zb(ma.charCodeAt(ra))&&c(ra,"Identifier directly after number"),g(Ia,a)}function y(a){var b=ra,d=!1,e=48===ma.charCodeAt(ra);a||null!==w(10)||c(b,"Invalid number"),46===ma.charCodeAt(ra)&&(++ra,w(10),d=!0);var f=ma.charCodeAt(ra);69!==f&&101!==f||(f=ma.charCodeAt(++ra),43!==f&&45!==f||++ra,null===w(10)&&c(b,"Invalid number"),d=!0),Zb(ma.charCodeAt(ra))&&c(ra,"Identifier directly after number");var h,i=ma.slice(b,ra);return d?h=parseFloat(i):e&&1!==i.length?/[89]/.test(i)||Ga?c(b,"Invalid number"):h=parseInt(i,8):h=parseInt(i,10),g(Ia,h)}function z(a){ra++;for(var b="";;){ra>=na&&c(sa,"Unterminated string constant");var d=ma.charCodeAt(ra);if(d===a)return++ra,g(Ka,b);if(92===d){d=ma.charCodeAt(++ra);var e=/^[0-7]+/.exec(ma.slice(ra,ra+3));for(e&&(e=e[0]);e&&parseInt(e,8)>255;)e=e.slice(0,-1);if("0"===e&&(e=null),++ra,e)Ga&&c(ra-2,"Octal literal in strict mode"),b+=String.fromCharCode(parseInt(e,8)),ra+=e.length-1;else switch(d){case 110:b+="\n";break;case 114:b+="\r";break;case 120:b+=String.fromCharCode(A(2));break;case 117:b+=String.fromCharCode(A(4));break;case 85:b+=String.fromCharCode(A(8));break;case 116:b+="\t";break;case 98:b+="\b";break;case 118:b+="\x0B";break;case 102:b+="\f";break;case 48:b+="\0";break;case 13:10===ma.charCodeAt(ra)&&++ra;case 10:la.locations&&(Aa=ra,++za);break;default:b+=String.fromCharCode(d)}}else 13!==d&&10!==d&&8232!==d&&8233!==d||c(sa,"Unterminated string constant"),b+=String.fromCharCode(d),++ra}}function A(a){var b=w(16,a);return null===b&&c(sa,"Bad character escape sequence"),b}function B(){Mb=!1;for(var a,b=!0,d=ra;;){var e=ma.charCodeAt(ra);if($b(e))Mb&&(a+=ma.charAt(ra)),++ra;else{if(92!==e)break;Mb||(a=ma.slice(d,ra)),Mb=!0,117!=ma.charCodeAt(++ra)&&c(ra,"Expecting Unicode escape sequence \\uXXXX"),++ra;var f=A(4),g=String.fromCharCode(f);g||c(ra-1,"Invalid Unicode escape"),(b?Zb(f):$b(f))||c(ra-4,"Invalid Unicode escape"),a+=g}b=!1}return Mb?a:ma.slice(d,ra)}function C(){var a=B(),b=La;return!Mb&&Rb(a)&&(b=kb[a]),g(b,a)}function D(){Ba=sa,Ca=ta,Da=va,t()}function E(a){if(Ga=a,ra=sa,la.locations)for(;Aa>ra;)Aa=ma.lastIndexOf("\n",Aa-2)+1,--za;j(),t()}function F(){this.type=null,this.start=sa,this.end=null}function G(){this.start=ua,this.end=null,null!==oa&&(this.source=oa)}function H(){var a=new F;return la.locations&&(a.loc=new G),la.directSourceFile&&(a.sourceFile=la.directSourceFile),la.ranges&&(a.range=[sa,0]),a}function I(a){var b=new F;return b.start=a.start,la.locations&&(b.loc=new G,b.loc.start=a.loc.start),la.ranges&&(b.range=[a.range[0],0]),b}function J(a,b){return a.type=b,a.end=Ca,la.locations&&(a.loc.end=Da),la.ranges&&(a.range[1]=Ca),a}function K(a){return la.ecmaVersion>=5&&"ExpressionStatement"===a.type&&"Literal"===a.expression.type&&"use strict"===a.expression.value}function L(a){return wa===a?(D(),!0):void 0}function M(){return!la.strictSemicolons&&(wa===Ma||wa===ob||Xb.test(ma.slice(Ca,sa)))}function N(){L(sb)||M()||P()}function O(a){wa===a?D():P()}function P(){c(sa,"Unexpected token")}function Q(a){"Identifier"!==a.type&&"MemberExpression"!==a.type&&c(a.start,"Assigning to rvalue"),Ga&&"Identifier"===a.type&&Qb(a.name)&&c(a.start,"Assigning to "+a.name+" in strict mode")}function R(a){Ba=Ca=ra,la.locations&&(Da=new e),Ea=Ga=null,Fa=[],t();var b=a||H(),c=!0;for(a||(b.body=[]);wa!==Ma;){var d=S();b.body.push(d),c&&K(d)&&E(!0),c=!1}return J(b,"Program")}function S(){(wa===wb||wa===yb&&"/="==xa)&&t(!0);var a=wa,b=H();switch(a){case Na:case Qa:D();var d=a===Na;L(sb)||M()?b.label=null:wa!==La?P():(b.label=ka(),N());for(var e=0;e<Fa.length;++e){var f=Fa[e];if(null==b.label||f.name===b.label.name){if(null!=f.kind&&(d||"loop"===f.kind))break;if(b.label&&d)break}}return e===Fa.length&&c(b.start,"Unsyntactic "+a.keyword),J(b,d?"BreakStatement":"ContinueStatement");case Ra:return D(),N(),J(b,"DebuggerStatement");case Ta:return D(),Fa.push(_b),b.body=S(),Fa.pop(),O(cb),b.test=T(),N(),J(b,"DoWhileStatement");case Wa:if(D(),Fa.push(_b),O(pb),wa===sb)return V(b,null);if(wa===bb){var g=H();return D(),X(g,!0),J(g,"VariableDeclaration"),1===g.declarations.length&&L(jb)?W(b,g):V(b,g)}var g=Y(!1,!0);return L(jb)?(Q(g),W(b,g)):V(b,g);case Xa:return D(),ia(b,!0);case Ya:return D(),b.test=T(),b.consequent=S(),b.alternate=L(Ua)?S():null,J(b,"IfStatement");case Za:return Ea||la.allowReturnOutsideFunction||c(sa,"'return' outside of function"),D(),L(sb)||M()?b.argument=null:(b.argument=Y(),N()),J(b,"ReturnStatement");case $a:D(),b.discriminant=T(),b.cases=[],O(nb),Fa.push(ac);for(var h,i;wa!=ob;)if(wa===Oa||wa===Sa){var j=wa===Oa;h&&J(h,"SwitchCase"),b.cases.push(h=H()),h.consequent=[],D(),j?h.test=Y():(i&&c(Ba,"Multiple default clauses"),i=!0,h.test=null),O(tb)}else h||P(),h.consequent.push(S());return h&&J(h,"SwitchCase"),D(),Fa.pop(),J(b,"SwitchStatement");case _a:return D(),Xb.test(ma.slice(Ca,sa))&&c(Ca,"Illegal newline after throw"),b.argument=Y(),N(),J(b,"ThrowStatement");case ab:if(D(),b.block=U(),b.handler=null,wa===Pa){var k=H();D(),O(pb),k.param=ka(),Ga&&Qb(k.param.name)&&c(k.param.start,"Binding "+k.param.name+" in strict mode"),O(qb),k.guard=null,k.body=U(),b.handler=J(k,"CatchClause")}return b.guardedHandlers=Ha,b.finalizer=L(Va)?U():null,b.handler||b.finalizer||c(b.start,"Missing catch or finally clause"),J(b,"TryStatement");case bb:return D(),X(b),N(),J(b,"VariableDeclaration");case cb:return D(),b.test=T(),Fa.push(_b),b.body=S(),Fa.pop(),J(b,"WhileStatement");case db:return Ga&&c(sa,"'with' in strict mode"),D(),b.object=T(),b.body=S(),J(b,"WithStatement");case nb:return U();case sb:return D(),J(b,"EmptyStatement");default:var l=xa,m=Y();if(a===La&&"Identifier"===m.type&&L(tb)){for(var e=0;e<Fa.length;++e)Fa[e].name===l&&c(m.start,"Label '"+l+"' is already declared");var n=wa.isLoop?"loop":wa===$a?"switch":null;return Fa.push({name:l,kind:n}),b.body=S(),Fa.pop(),b.label=m,J(b,"LabeledStatement")}return b.expression=m,N(),J(b,"ExpressionStatement")}}function T(){O(pb);var a=Y();return O(qb),a}function U(a){var b,c=H(),d=!0,e=!1;for(c.body=[],O(nb);!L(ob);){var f=S();c.body.push(f),d&&a&&K(f)&&(b=e,E(e=!0)),d=!1}return e&&!b&&E(!1),J(c,"BlockStatement")}function V(a,b){return a.init=b,O(sb),a.test=wa===sb?null:Y(),O(sb),a.update=wa===qb?null:Y(),O(qb),a.body=S(),Fa.pop(),J(a,"ForStatement")}function W(a,b){return a.left=b,a.right=Y(),O(qb),a.body=S(),Fa.pop(),J(a,"ForInStatement")}function X(a,b){for(a.declarations=[],a.kind="var";;){var d=H();if(d.id=ka(),Ga&&Qb(d.id.name)&&c(d.id.start,"Binding "+d.id.name+" in strict mode"),d.init=L(xb)?Y(!0,b):null,a.declarations.push(J(d,"VariableDeclarator")),!L(rb))break}return a}function Y(a,b){var c=Z(b);if(!a&&wa===rb){var d=I(c);for(d.expressions=[c];L(rb);)d.expressions.push(Z(b));return J(d,"SequenceExpression")}return c}function Z(a){var b=$(a);if(wa.isAssign){var c=I(b);return c.operator=xa,c.left=b,D(),c.right=Z(a),Q(b),J(c,"AssignmentExpression")}return b}function $(a){var b=_(a);if(L(vb)){var c=I(b);return c.test=b,c.consequent=Y(!0),O(tb),c.alternate=Y(!0,a),J(c,"ConditionalExpression")}return b}function _(a){return aa(ba(),-1,a)}function aa(a,b,c){var d=wa.binop;if(null!=d&&(!c||wa!==jb)&&d>b){var e=I(a);e.left=a,e.operator=xa;var f=wa;D(),e.right=aa(ba(),d,c);var g=J(e,f===Bb||f===Cb?"LogicalExpression":"BinaryExpression");return aa(g,b,c)}return a}function ba(){if(wa.prefix){var a=H(),b=wa.isUpdate;return a.operator=xa,a.prefix=!0,ya=!0,D(),a.argument=ba(),b?Q(a.argument):Ga&&"delete"===a.operator&&"Identifier"===a.argument.type&&c(a.start,"Deleting local variable in strict mode"),J(a,b?"UpdateExpression":"UnaryExpression")}for(var d=ca();wa.postfix&&!M();){var a=I(d);a.operator=xa,a.prefix=!1,a.argument=d,Q(d),D(),d=J(a,"UpdateExpression")}return d}function ca(){return da(ea())}function da(a,b){if(L(ub)){var c=I(a);return c.object=a,c.property=ka(!0),c.computed=!1,da(J(c,"MemberExpression"),b)}if(L(lb)){var c=I(a);return c.object=a,c.property=Y(),c.computed=!0,O(mb),da(J(c,"MemberExpression"),b)}if(!b&&L(pb)){var c=I(a);return c.callee=a,c.arguments=ja(qb,!1),da(J(c,"CallExpression"),b)}return a}function ea(){switch(wa){case fb:var a=H();return D(),J(a,"ThisExpression");case La:return ka();case Ia:case Ka:case Ja:var a=H();return a.value=xa,a.raw=ma.slice(sa,ta),D(),J(a,"Literal");case gb:case hb:case ib:var a=H();return a.value=wa.atomValue,a.raw=wa.keyword,D(),J(a,"Literal");case pb:var b=ua,c=sa;D();var d=Y();return d.start=c,d.end=ta,la.locations&&(d.loc.start=b,d.loc.end=va),la.ranges&&(d.range=[c,ta]),O(qb),d;case lb:var a=H();return D(),a.elements=ja(mb,!0,!0),J(a,"ArrayExpression");case nb:return ga();case Xa:var a=H();return D(),ia(a,!1);case eb:return fa();default:P()}}function fa(){var a=H();return D(),a.callee=da(ea(),!0),L(pb)?a.arguments=ja(qb,!1):a.arguments=Ha,J(a,"NewExpression")}function ga(){var a=H(),b=!0,d=!1;for(a.properties=[],D();!L(ob);){if(b)b=!1;else if(O(rb),la.allowTrailingCommas&&L(ob))break;var e,f={key:ha()},g=!1;if(L(tb)?(f.value=Y(!0),e=f.kind="init"):la.ecmaVersion>=5&&"Identifier"===f.key.type&&("get"===f.key.name||"set"===f.key.name)?(g=d=!0,e=f.kind=f.key.name,f.key=ha(),wa!==pb&&P(),f.value=ia(H(),!1)):P(),"Identifier"===f.key.type&&(Ga||d))for(var h=0;h<a.properties.length;++h){var i=a.properties[h];if(i.key.name===f.key.name){var j=e==i.kind||g&&"init"===i.kind||"init"===e&&("get"===i.kind||"set"===i.kind);j&&!Ga&&"init"===e&&"init"===i.kind&&(j=!1),j&&c(f.key.start,"Redefinition of property")}}a.properties.push(f)}return J(a,"ObjectExpression")}function ha(){return wa===Ia||wa===Ka?ea():ka(!0)}function ia(a,b){wa===La?a.id=ka():b?P():a.id=null,a.params=[];var d=!0;for(O(pb);!L(qb);)d?d=!1:O(rb),a.params.push(ka());var e=Ea,f=Fa;if(Ea=!0,Fa=[],a.body=U(!0),Ea=e,Fa=f,Ga||a.body.body.length&&K(a.body.body[0]))for(var g=a.id?-1:0;g<a.params.length;++g){var h=0>g?a.id:a.params[g];if((Pb(h.name)||Qb(h.name))&&c(h.start,"Defining '"+h.name+"' in strict mode"),g>=0)for(var i=0;g>i;++i)h.name===a.params[i].name&&c(h.start,"Argument name clash in strict mode")}return J(a,b?"FunctionDeclaration":"FunctionExpression")}function ja(a,b,c){for(var d=[],e=!0;!L(a);){if(e)e=!1;else if(O(rb),b&&la.allowTrailingCommas&&L(a))break;c&&wa===rb?d.push(null):d.push(Y(!0))}return d}function ka(a){var b=H();return a&&"everywhere"==la.forbidReserved&&(a=!1),wa===La?(!a&&(la.forbidReserved&&(3===la.ecmaVersion?Nb:Ob)(xa)||Ga&&Pb(xa))&&-1==ma.slice(sa,ta).indexOf("\\")&&c(sa,"The keyword '"+xa+"' is reserved"),b.name=xa):a&&wa.keyword?b.name=wa.keyword:P(),ya=!1,D(),J(b,"Identifier")}a.version="0.5.0";var la,ma,na,oa;a.parse=function(a,c){return ma=String(a),na=ma.length,b(c),f(),R(la.program)};var pa=a.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},qa=a.getLineInfo=function(a,b){for(var c=1,d=0;;){Yb.lastIndex=d;var e=Yb.exec(a);if(!(e&&e.index<b))break;++c,d=e.index+e[0].length}return{line:c,column:b-d}};a.tokenize=function(a,c){function d(a){return Ca=ta,t(a),e.start=sa,e.end=ta,e.startLoc=ua,e.endLoc=va,e.type=wa,e.value=xa,e}ma=String(a),na=ma.length,b(c),f();var e={};return d.jumpTo=function(a,b){if(ra=a,la.locations){za=1,Aa=Yb.lastIndex=0;for(var c;(c=Yb.exec(ma))&&c.index<a;)++za,Aa=c.index+c[0].length}ya=b,j()},d};var ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha=[],Ia={type:"num"},Ja={type:"regexp"},Ka={type:"string"},La={type:"name"},Ma={type:"eof"},Na={keyword:"break"},Oa={keyword:"case",beforeExpr:!0},Pa={keyword:"catch"},Qa={keyword:"continue"},Ra={keyword:"debugger"},Sa={keyword:"default"},Ta={keyword:"do",isLoop:!0},Ua={keyword:"else",beforeExpr:!0},Va={keyword:"finally"},Wa={keyword:"for",isLoop:!0},Xa={keyword:"function"},Ya={keyword:"if"},Za={keyword:"return",beforeExpr:!0},$a={keyword:"switch"},_a={keyword:"throw",beforeExpr:!0},ab={keyword:"try"},bb={keyword:"var"},cb={keyword:"while",isLoop:!0},db={keyword:"with"},eb={keyword:"new",beforeExpr:!0},fb={keyword:"this"},gb={keyword:"null",atomValue:null},hb={keyword:"true",atomValue:!0},ib={keyword:"false",atomValue:!1},jb={keyword:"in",binop:7,beforeExpr:!0},kb={"break":Na,"case":Oa,"catch":Pa,"continue":Qa,"debugger":Ra,"default":Sa,"do":Ta,"else":Ua,"finally":Va,"for":Wa,"function":Xa,"if":Ya,"return":Za,"switch":$a,"throw":_a,"try":ab,"var":bb,"while":cb,"with":db,"null":gb,"true":hb,"false":ib,"new":eb,"in":jb,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":fb,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},lb={type:"[",beforeExpr:!0},mb={type:"]"},nb={type:"{",beforeExpr:!0},ob={type:"}"},pb={type:"(",beforeExpr:!0},qb={type:")"},rb={type:",",beforeExpr:!0},sb={type:";",beforeExpr:!0},tb={type:":",beforeExpr:!0},ub={type:"."},vb={type:"?",beforeExpr:!0},wb={binop:10,beforeExpr:!0},xb={isAssign:!0,beforeExpr:!0},yb={isAssign:!0,beforeExpr:!0},zb={postfix:!0,prefix:!0,isUpdate:!0},Ab={prefix:!0,beforeExpr:!0},Bb={binop:1,beforeExpr:!0},Cb={binop:2,beforeExpr:!0},Db={binop:3,beforeExpr:!0},Eb={binop:4,beforeExpr:!0},Fb={binop:5,beforeExpr:!0},Gb={binop:6,beforeExpr:!0},Hb={binop:7,beforeExpr:!0},Ib={binop:8,beforeExpr:!0},Jb={binop:9,prefix:!0,beforeExpr:!0},Kb={binop:10,beforeExpr:!0};a.tokTypes={bracketL:lb,bracketR:mb,braceL:nb,braceR:ob,parenL:pb,parenR:qb,comma:rb,semi:sb,colon:tb,dot:ub,question:vb,slash:wb,eq:xb,name:La,eof:Ma,num:Ia,regexp:Ja,string:Ka};for(var Lb in kb)a.tokTypes["_"+Lb]=kb[Lb];var Mb,Nb=d("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ob=d("class enum extends super const export import"),Pb=d("implements interface let package private protected public static yield"),Qb=d("eval arguments"),Rb=d("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Sb=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Tb="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ub="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",Vb=new RegExp("["+Tb+"]"),Wb=new RegExp("["+Tb+Ub+"]"),Xb=/[\n\r\u2028\u2029]/,Yb=/\r\n|[\n\r\u2028\u2029]/g,Zb=a.isIdentifierStart=function(a){return 65>a?36===a:91>a||(97>a?95===a:123>a||a>=170&&Vb.test(String.fromCharCode(a)))},$b=a.isIdentifierChar=function(a){return 48>a?36===a:58>a||!(65>a)&&(91>a||(97>a?95===a:123>a||a>=170&&Wb.test(String.fromCharCode(a))))},_b={kind:"loop"},ac={kind:"switch"}});var t={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},u={"-":"__negate","+":null},v=h.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(a){this["__"+a]="#"+a},{});return o.inject(v),q.inject(v),Q.inject(v),f&&("complete"===g.readyState?setTimeout(m):V.add(f,{load:m})),{compile:i,execute:k,load:n,parse:e}}.call(this),d=new(j.inject(h.exports,{enumerable:!0,Base:h,Numerical:m,Key:$,DomEvent:V,DomElement:U,document:g,window:f,Symbol:D,PlacedSymbol:C})),d.agent.node&&a("./node/extend")(d),"function"==typeof define&&define.amd?define("paper",d):"object"==typeof b&&b&&(b.exports=d),d}.call(this,"object"==typeof self?self:null)},{"./node/extend":2,"./node/window":2}]},{},[1]);